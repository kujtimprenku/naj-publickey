function _mergeNamespaces(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const o=Object.getOwnPropertyDescriptor(n,a);o&&Object.defineProperty(e,a,o.get?o:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var browser$4={exports:{}},process$1=browser$4.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch{try{return cachedSetTimeout.call(null,e,0)}catch{return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch{try{return cachedClearTimeout.call(null,e)}catch{return cachedClearTimeout.call(this,e)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}process$1.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};process$1.title="browser";process$1.browser=!0;process$1.env={};process$1.argv=[];process$1.version="";process$1.versions={};function noop(){}process$1.on=noop;process$1.addListener=noop;process$1.once=noop;process$1.off=noop;process$1.removeListener=noop;process$1.removeAllListeners=noop;process$1.emit=noop;process$1.prependListener=noop;process$1.prependOnceListener=noop;process$1.listeners=function(e){return[]};process$1.binding=function(e){throw new Error("process.binding is not supported")};process$1.cwd=function(){return"/"};process$1.chdir=function(e){throw new Error("process.chdir is not supported")};process$1.umask=function(){return 0};var browserExports=browser$4.exports;const browser$3=getDefaultExportFromCjs(browserExports),process$2=_mergeNamespaces({__proto__:null,default:browser$3},[browserExports]);var buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code$2.length;i<len;++i)lookup[i]=code$2[i],revLookup[code$2.charCodeAt(i)]=i;revLookup[45]=62;revLookup[95]=63;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function byteLength(e){var t=getLens(e),r=t[0],n=t[1];return(r+n)*3/4-n}function _byteLength(e,t,r){return(t+r)*3/4-r}function toByteArray(e){var t,r=getLens(e),n=r[0],a=r[1],o=new Arr(_byteLength(e,n,a)),s=0,u=a>0?n-4:n,_;for(_=0;_<u;_+=4)t=revLookup[e.charCodeAt(_)]<<18|revLookup[e.charCodeAt(_+1)]<<12|revLookup[e.charCodeAt(_+2)]<<6|revLookup[e.charCodeAt(_+3)],o[s++]=t>>16&255,o[s++]=t>>8&255,o[s++]=t&255;return a===2&&(t=revLookup[e.charCodeAt(_)]<<2|revLookup[e.charCodeAt(_+1)]>>4,o[s++]=t&255),a===1&&(t=revLookup[e.charCodeAt(_)]<<10|revLookup[e.charCodeAt(_+1)]<<4|revLookup[e.charCodeAt(_+2)]>>2,o[s++]=t>>8&255,o[s++]=t&255),o}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[e&63]}function encodeChunk(e,t,r){for(var n,a=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),a.push(tripletToBase64(n));return a.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,a=[],o=16383,s=0,u=r-n;s<u;s+=o)a.push(encodeChunk(e,s,s+o>u?u:s+o));return n===1?(t=e[r-1],a.push(lookup[t>>2]+lookup[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],a.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),a.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(e,t,r,n,a){var o,s,u=a*8-n-1,_=(1<<u)-1,v=_>>1,g=-7,S=r?a-1:0,U=r?-1:1,k=e[t+S];for(S+=U,o=k&(1<<-g)-1,k>>=-g,g+=u;g>0;o=o*256+e[t+S],S+=U,g-=8);for(s=o&(1<<-g)-1,o>>=-g,g+=n;g>0;s=s*256+e[t+S],S+=U,g-=8);if(o===0)o=1-v;else{if(o===_)return s?NaN:(k?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-v}return(k?-1:1)*s*Math.pow(2,o-n)};ieee754.write=function(e,t,r,n,a,o){var s,u,_,v=o*8-a-1,g=(1<<v)-1,S=g>>1,U=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=n?0:o-1,B=n?1:-1,D=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=g):(s=Math.floor(Math.log(t)/Math.LN2),t*(_=Math.pow(2,-s))<1&&(s--,_*=2),s+S>=1?t+=U/_:t+=U*Math.pow(2,1-S),t*_>=2&&(s++,_/=2),s+S>=g?(u=0,s=g):s+S>=1?(u=(t*_-1)*Math.pow(2,a),s=s+S):(u=t*Math.pow(2,S-1)*Math.pow(2,a),s=0));a>=8;e[r+k]=u&255,k+=B,u/=256,a-=8);for(s=s<<a|u,v+=a;v>0;e[r+k]=s&255,k+=B,s/=256,v-=8);e[r+k-B]|=D*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=base64Js,r=ieee754,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=G,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a,u.TYPED_ARRAY_SUPPORT=o(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const $=new Uint8Array(1),d={foo:function(){return 42}};return Object.setPrototypeOf(d,Uint8Array.prototype),Object.setPrototypeOf($,d),$.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function s($){if($>a)throw new RangeError('The value "'+$+'" is invalid for option "size"');const d=new Uint8Array($);return Object.setPrototypeOf(d,u.prototype),d}function u($,d,h){if(typeof $=="number"){if(typeof d=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return S($)}return _($,d,h)}u.poolSize=8192;function _($,d,h){if(typeof $=="string")return U($,d);if(ArrayBuffer.isView($))return B($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if($t($,ArrayBuffer)||$&&$t($.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&($t($,SharedArrayBuffer)||$&&$t($.buffer,SharedArrayBuffer)))return D($,d,h);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const P=$.valueOf&&$.valueOf();if(P!=null&&P!==$)return u.from(P,d,h);const q=L($);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return u.from($[Symbol.toPrimitive]("string"),d,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}u.from=function($,d,h){return _($,d,h)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function v($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function g($,d,h){return v($),$<=0?s($):d!==void 0?typeof h=="string"?s($).fill(d,h):s($).fill(d):s($)}u.alloc=function($,d,h){return g($,d,h)};function S($){return v($),s($<0?0:R($)|0)}u.allocUnsafe=function($){return S($)},u.allocUnsafeSlow=function($){return S($)};function U($,d){if((typeof d!="string"||d==="")&&(d="utf8"),!u.isEncoding(d))throw new TypeError("Unknown encoding: "+d);const h=J($,d)|0;let P=s(h);const q=P.write($,d);return q!==h&&(P=P.slice(0,q)),P}function k($){const d=$.length<0?0:R($.length)|0,h=s(d);for(let P=0;P<d;P+=1)h[P]=$[P]&255;return h}function B($){if($t($,Uint8Array)){const d=new Uint8Array($);return D(d.buffer,d.byteOffset,d.byteLength)}return k($)}function D($,d,h){if(d<0||$.byteLength<d)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<d+(h||0))throw new RangeError('"length" is outside of buffer bounds');let P;return d===void 0&&h===void 0?P=new Uint8Array($):h===void 0?P=new Uint8Array($,d):P=new Uint8Array($,d,h),Object.setPrototypeOf(P,u.prototype),P}function L($){if(u.isBuffer($)){const d=R($.length)|0,h=s(d);return h.length===0||$.copy(h,0,0,d),h}if($.length!==void 0)return typeof $.length!="number"||tt($.length)?s(0):k($);if($.type==="Buffer"&&Array.isArray($.data))return k($.data)}function R($){if($>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return $|0}function G($){return+$!=$&&($=0),u.alloc(+$)}u.isBuffer=function(d){return d!=null&&d._isBuffer===!0&&d!==u.prototype},u.compare=function(d,h){if($t(d,Uint8Array)&&(d=u.from(d,d.offset,d.byteLength)),$t(h,Uint8Array)&&(h=u.from(h,h.offset,h.byteLength)),!u.isBuffer(d)||!u.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(d===h)return 0;let P=d.length,q=h.length;for(let W=0,Z=Math.min(P,q);W<Z;++W)if(d[W]!==h[W]){P=d[W],q=h[W];break}return P<q?-1:q<P?1:0},u.isEncoding=function(d){switch(String(d).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(d,h){if(!Array.isArray(d))throw new TypeError('"list" argument must be an Array of Buffers');if(d.length===0)return u.alloc(0);let P;if(h===void 0)for(h=0,P=0;P<d.length;++P)h+=d[P].length;const q=u.allocUnsafe(h);let W=0;for(P=0;P<d.length;++P){let Z=d[P];if($t(Z,Uint8Array))W+Z.length>q.length?(u.isBuffer(Z)||(Z=u.from(Z)),Z.copy(q,W)):Uint8Array.prototype.set.call(q,Z,W);else if(u.isBuffer(Z))Z.copy(q,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=Z.length}return q};function J($,d){if(u.isBuffer($))return $.length;if(ArrayBuffer.isView($)||$t($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);const h=$.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&h===0)return 0;let q=!1;for(;;)switch(d){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return nt($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Qe($).length;default:if(q)return P?-1:nt($).length;d=(""+d).toLowerCase(),q=!0}}u.byteLength=J;function ee($,d,h){let P=!1;if((d===void 0||d<0)&&(d=0),d>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,d>>>=0,h<=d))return"";for($||($="utf8");;)switch($){case"hex":return F(this,d,h);case"utf8":case"utf-8":return c(this,d,h);case"ascii":return T(this,d,h);case"latin1":case"binary":return C(this,d,h);case"base64":return M(this,d,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,d,h);default:if(P)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),P=!0}}u.prototype._isBuffer=!0;function re($,d,h){const P=$[d];$[d]=$[h],$[h]=P}u.prototype.swap16=function(){const d=this.length;if(d%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<d;h+=2)re(this,h,h+1);return this},u.prototype.swap32=function(){const d=this.length;if(d%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<d;h+=4)re(this,h,h+3),re(this,h+1,h+2);return this},u.prototype.swap64=function(){const d=this.length;if(d%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<d;h+=8)re(this,h,h+7),re(this,h+1,h+6),re(this,h+2,h+5),re(this,h+3,h+4);return this},u.prototype.toString=function(){const d=this.length;return d===0?"":arguments.length===0?c(this,0,d):ee.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(d){if(!u.isBuffer(d))throw new TypeError("Argument must be a Buffer");return this===d?!0:u.compare(this,d)===0},u.prototype.inspect=function(){let d="";const h=e.INSPECT_MAX_BYTES;return d=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(d+=" ... "),"<Buffer "+d+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(d,h,P,q,W){if($t(d,Uint8Array)&&(d=u.from(d,d.offset,d.byteLength)),!u.isBuffer(d))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof d);if(h===void 0&&(h=0),P===void 0&&(P=d?d.length:0),q===void 0&&(q=0),W===void 0&&(W=this.length),h<0||P>d.length||q<0||W>this.length)throw new RangeError("out of range index");if(q>=W&&h>=P)return 0;if(q>=W)return-1;if(h>=P)return 1;if(h>>>=0,P>>>=0,q>>>=0,W>>>=0,this===d)return 0;let Z=W-q,Fe=P-h;const Pe=Math.min(Z,Fe),Ie=this.slice(q,W),at=d.slice(h,P);for(let Ae=0;Ae<Pe;++Ae)if(Ie[Ae]!==at[Ae]){Z=Ie[Ae],Fe=at[Ae];break}return Z<Fe?-1:Fe<Z?1:0};function le($,d,h,P,q){if($.length===0)return-1;if(typeof h=="string"?(P=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,tt(h)&&(h=q?0:$.length-1),h<0&&(h=$.length+h),h>=$.length){if(q)return-1;h=$.length-1}else if(h<0)if(q)h=0;else return-1;if(typeof d=="string"&&(d=u.from(d,P)),u.isBuffer(d))return d.length===0?-1:je($,d,h,P,q);if(typeof d=="number")return d=d&255,typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call($,d,h):Uint8Array.prototype.lastIndexOf.call($,d,h):je($,[d],h,P,q);throw new TypeError("val must be string, number or Buffer")}function je($,d,h,P,q){let W=1,Z=$.length,Fe=d.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if($.length<2||d.length<2)return-1;W=2,Z/=2,Fe/=2,h/=2}function Pe(at,Ae){return W===1?at[Ae]:at.readUInt16BE(Ae*W)}let Ie;if(q){let at=-1;for(Ie=h;Ie<Z;Ie++)if(Pe($,Ie)===Pe(d,at===-1?0:Ie-at)){if(at===-1&&(at=Ie),Ie-at+1===Fe)return at*W}else at!==-1&&(Ie-=Ie-at),at=-1}else for(h+Fe>Z&&(h=Z-Fe),Ie=h;Ie>=0;Ie--){let at=!0;for(let Ae=0;Ae<Fe;Ae++)if(Pe($,Ie+Ae)!==Pe(d,Ae)){at=!1;break}if(at)return Ie}return-1}u.prototype.includes=function(d,h,P){return this.indexOf(d,h,P)!==-1},u.prototype.indexOf=function(d,h,P){return le(this,d,h,P,!0)},u.prototype.lastIndexOf=function(d,h,P){return le(this,d,h,P,!1)};function rt($,d,h,P){h=Number(h)||0;const q=$.length-h;P?(P=Number(P),P>q&&(P=q)):P=q;const W=d.length;P>W/2&&(P=W/2);let Z;for(Z=0;Z<P;++Z){const Fe=parseInt(d.substr(Z*2,2),16);if(tt(Fe))return Z;$[h+Z]=Fe}return Z}function _e($,d,h,P){return et(nt(d,$.length-h),$,h,P)}function we($,d,h,P){return et(ct(d),$,h,P)}function Ee($,d,h,P){return et(Qe(d),$,h,P)}function ie($,d,h,P){return et(xt(d,$.length-h),$,h,P)}u.prototype.write=function(d,h,P,q){if(h===void 0)q="utf8",P=this.length,h=0;else if(P===void 0&&typeof h=="string")q=h,P=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(P)?(P=P>>>0,q===void 0&&(q="utf8")):(q=P,P=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-h;if((P===void 0||P>W)&&(P=W),d.length>0&&(P<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let Z=!1;for(;;)switch(q){case"hex":return rt(this,d,h,P);case"utf8":case"utf-8":return _e(this,d,h,P);case"ascii":case"latin1":case"binary":return we(this,d,h,P);case"base64":return Ee(this,d,h,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,d,h,P);default:if(Z)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),Z=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M($,d,h){return d===0&&h===$.length?t.fromByteArray($):t.fromByteArray($.slice(d,h))}function c($,d,h){h=Math.min($.length,h);const P=[];let q=d;for(;q<h;){const W=$[q];let Z=null,Fe=W>239?4:W>223?3:W>191?2:1;if(q+Fe<=h){let Pe,Ie,at,Ae;switch(Fe){case 1:W<128&&(Z=W);break;case 2:Pe=$[q+1],(Pe&192)===128&&(Ae=(W&31)<<6|Pe&63,Ae>127&&(Z=Ae));break;case 3:Pe=$[q+1],Ie=$[q+2],(Pe&192)===128&&(Ie&192)===128&&(Ae=(W&15)<<12|(Pe&63)<<6|Ie&63,Ae>2047&&(Ae<55296||Ae>57343)&&(Z=Ae));break;case 4:Pe=$[q+1],Ie=$[q+2],at=$[q+3],(Pe&192)===128&&(Ie&192)===128&&(at&192)===128&&(Ae=(W&15)<<18|(Pe&63)<<12|(Ie&63)<<6|at&63,Ae>65535&&Ae<1114112&&(Z=Ae))}}Z===null?(Z=65533,Fe=1):Z>65535&&(Z-=65536,P.push(Z>>>10&1023|55296),Z=56320|Z&1023),P.push(Z),q+=Fe}return E(P)}const p=4096;function E($){const d=$.length;if(d<=p)return String.fromCharCode.apply(String,$);let h="",P=0;for(;P<d;)h+=String.fromCharCode.apply(String,$.slice(P,P+=p));return h}function T($,d,h){let P="";h=Math.min($.length,h);for(let q=d;q<h;++q)P+=String.fromCharCode($[q]&127);return P}function C($,d,h){let P="";h=Math.min($.length,h);for(let q=d;q<h;++q)P+=String.fromCharCode($[q]);return P}function F($,d,h){const P=$.length;(!d||d<0)&&(d=0),(!h||h<0||h>P)&&(h=P);let q="";for(let W=d;W<h;++W)q+=ot[$[W]];return q}function j($,d,h){const P=$.slice(d,h);let q="";for(let W=0;W<P.length-1;W+=2)q+=String.fromCharCode(P[W]+P[W+1]*256);return q}u.prototype.slice=function(d,h){const P=this.length;d=~~d,h=h===void 0?P:~~h,d<0?(d+=P,d<0&&(d=0)):d>P&&(d=P),h<0?(h+=P,h<0&&(h=0)):h>P&&(h=P),h<d&&(h=d);const q=this.subarray(d,h);return Object.setPrototypeOf(q,u.prototype),q};function y($,d,h){if($%1!==0||$<0)throw new RangeError("offset is not uint");if($+d>h)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(d,h,P){d=d>>>0,h=h>>>0,P||y(d,h,this.length);let q=this[d],W=1,Z=0;for(;++Z<h&&(W*=256);)q+=this[d+Z]*W;return q},u.prototype.readUintBE=u.prototype.readUIntBE=function(d,h,P){d=d>>>0,h=h>>>0,P||y(d,h,this.length);let q=this[d+--h],W=1;for(;h>0&&(W*=256);)q+=this[d+--h]*W;return q},u.prototype.readUint8=u.prototype.readUInt8=function(d,h){return d=d>>>0,h||y(d,1,this.length),this[d]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(d,h){return d=d>>>0,h||y(d,2,this.length),this[d]|this[d+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(d,h){return d=d>>>0,h||y(d,2,this.length),this[d]<<8|this[d+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(d,h){return d=d>>>0,h||y(d,4,this.length),(this[d]|this[d+1]<<8|this[d+2]<<16)+this[d+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(d,h){return d=d>>>0,h||y(d,4,this.length),this[d]*16777216+(this[d+1]<<16|this[d+2]<<8|this[d+3])},u.prototype.readBigUInt64LE=St(function(d){d=d>>>0,dt(d,"offset");const h=this[d],P=this[d+7];(h===void 0||P===void 0)&&He(d,this.length-8);const q=h+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24,W=this[++d]+this[++d]*2**8+this[++d]*2**16+P*2**24;return BigInt(q)+(BigInt(W)<<BigInt(32))}),u.prototype.readBigUInt64BE=St(function(d){d=d>>>0,dt(d,"offset");const h=this[d],P=this[d+7];(h===void 0||P===void 0)&&He(d,this.length-8);const q=h*2**24+this[++d]*2**16+this[++d]*2**8+this[++d],W=this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+P;return(BigInt(q)<<BigInt(32))+BigInt(W)}),u.prototype.readIntLE=function(d,h,P){d=d>>>0,h=h>>>0,P||y(d,h,this.length);let q=this[d],W=1,Z=0;for(;++Z<h&&(W*=256);)q+=this[d+Z]*W;return W*=128,q>=W&&(q-=Math.pow(2,8*h)),q},u.prototype.readIntBE=function(d,h,P){d=d>>>0,h=h>>>0,P||y(d,h,this.length);let q=h,W=1,Z=this[d+--q];for(;q>0&&(W*=256);)Z+=this[d+--q]*W;return W*=128,Z>=W&&(Z-=Math.pow(2,8*h)),Z},u.prototype.readInt8=function(d,h){return d=d>>>0,h||y(d,1,this.length),this[d]&128?(255-this[d]+1)*-1:this[d]},u.prototype.readInt16LE=function(d,h){d=d>>>0,h||y(d,2,this.length);const P=this[d]|this[d+1]<<8;return P&32768?P|4294901760:P},u.prototype.readInt16BE=function(d,h){d=d>>>0,h||y(d,2,this.length);const P=this[d+1]|this[d]<<8;return P&32768?P|4294901760:P},u.prototype.readInt32LE=function(d,h){return d=d>>>0,h||y(d,4,this.length),this[d]|this[d+1]<<8|this[d+2]<<16|this[d+3]<<24},u.prototype.readInt32BE=function(d,h){return d=d>>>0,h||y(d,4,this.length),this[d]<<24|this[d+1]<<16|this[d+2]<<8|this[d+3]},u.prototype.readBigInt64LE=St(function(d){d=d>>>0,dt(d,"offset");const h=this[d],P=this[d+7];(h===void 0||P===void 0)&&He(d,this.length-8);const q=this[d+4]+this[d+5]*2**8+this[d+6]*2**16+(P<<24);return(BigInt(q)<<BigInt(32))+BigInt(h+this[++d]*2**8+this[++d]*2**16+this[++d]*2**24)}),u.prototype.readBigInt64BE=St(function(d){d=d>>>0,dt(d,"offset");const h=this[d],P=this[d+7];(h===void 0||P===void 0)&&He(d,this.length-8);const q=(h<<24)+this[++d]*2**16+this[++d]*2**8+this[++d];return(BigInt(q)<<BigInt(32))+BigInt(this[++d]*2**24+this[++d]*2**16+this[++d]*2**8+P)}),u.prototype.readFloatLE=function(d,h){return d=d>>>0,h||y(d,4,this.length),r.read(this,d,!0,23,4)},u.prototype.readFloatBE=function(d,h){return d=d>>>0,h||y(d,4,this.length),r.read(this,d,!1,23,4)},u.prototype.readDoubleLE=function(d,h){return d=d>>>0,h||y(d,8,this.length),r.read(this,d,!0,52,8)},u.prototype.readDoubleBE=function(d,h){return d=d>>>0,h||y(d,8,this.length),r.read(this,d,!1,52,8)};function l($,d,h,P,q,W){if(!u.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(d>q||d<W)throw new RangeError('"value" argument is out of bounds');if(h+P>$.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(d,h,P,q){if(d=+d,h=h>>>0,P=P>>>0,!q){const Fe=Math.pow(2,8*P)-1;l(this,d,h,P,Fe,0)}let W=1,Z=0;for(this[h]=d&255;++Z<P&&(W*=256);)this[h+Z]=d/W&255;return h+P},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(d,h,P,q){if(d=+d,h=h>>>0,P=P>>>0,!q){const Fe=Math.pow(2,8*P)-1;l(this,d,h,P,Fe,0)}let W=P-1,Z=1;for(this[h+W]=d&255;--W>=0&&(Z*=256);)this[h+W]=d/Z&255;return h+P},u.prototype.writeUint8=u.prototype.writeUInt8=function(d,h,P){return d=+d,h=h>>>0,P||l(this,d,h,1,255,0),this[h]=d&255,h+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(d,h,P){return d=+d,h=h>>>0,P||l(this,d,h,2,65535,0),this[h]=d&255,this[h+1]=d>>>8,h+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(d,h,P){return d=+d,h=h>>>0,P||l(this,d,h,2,65535,0),this[h]=d>>>8,this[h+1]=d&255,h+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(d,h,P){return d=+d,h=h>>>0,P||l(this,d,h,4,4294967295,0),this[h+3]=d>>>24,this[h+2]=d>>>16,this[h+1]=d>>>8,this[h]=d&255,h+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(d,h,P){return d=+d,h=h>>>0,P||l(this,d,h,4,4294967295,0),this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=d&255,h+4};function b($,d,h,P,q){Le(d,P,q,$,h,7);let W=Number(d&BigInt(4294967295));$[h++]=W,W=W>>8,$[h++]=W,W=W>>8,$[h++]=W,W=W>>8,$[h++]=W;let Z=Number(d>>BigInt(32)&BigInt(4294967295));return $[h++]=Z,Z=Z>>8,$[h++]=Z,Z=Z>>8,$[h++]=Z,Z=Z>>8,$[h++]=Z,h}function x($,d,h,P,q){Le(d,P,q,$,h,7);let W=Number(d&BigInt(4294967295));$[h+7]=W,W=W>>8,$[h+6]=W,W=W>>8,$[h+5]=W,W=W>>8,$[h+4]=W;let Z=Number(d>>BigInt(32)&BigInt(4294967295));return $[h+3]=Z,Z=Z>>8,$[h+2]=Z,Z=Z>>8,$[h+1]=Z,Z=Z>>8,$[h]=Z,h+8}u.prototype.writeBigUInt64LE=St(function(d,h=0){return b(this,d,h,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=St(function(d,h=0){return x(this,d,h,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(d,h,P,q){if(d=+d,h=h>>>0,!q){const Pe=Math.pow(2,8*P-1);l(this,d,h,P,Pe-1,-Pe)}let W=0,Z=1,Fe=0;for(this[h]=d&255;++W<P&&(Z*=256);)d<0&&Fe===0&&this[h+W-1]!==0&&(Fe=1),this[h+W]=(d/Z>>0)-Fe&255;return h+P},u.prototype.writeIntBE=function(d,h,P,q){if(d=+d,h=h>>>0,!q){const Pe=Math.pow(2,8*P-1);l(this,d,h,P,Pe-1,-Pe)}let W=P-1,Z=1,Fe=0;for(this[h+W]=d&255;--W>=0&&(Z*=256);)d<0&&Fe===0&&this[h+W+1]!==0&&(Fe=1),this[h+W]=(d/Z>>0)-Fe&255;return h+P},u.prototype.writeInt8=function(d,h,P){return d=+d,h=h>>>0,P||l(this,d,h,1,127,-128),d<0&&(d=255+d+1),this[h]=d&255,h+1},u.prototype.writeInt16LE=function(d,h,P){return d=+d,h=h>>>0,P||l(this,d,h,2,32767,-32768),this[h]=d&255,this[h+1]=d>>>8,h+2},u.prototype.writeInt16BE=function(d,h,P){return d=+d,h=h>>>0,P||l(this,d,h,2,32767,-32768),this[h]=d>>>8,this[h+1]=d&255,h+2},u.prototype.writeInt32LE=function(d,h,P){return d=+d,h=h>>>0,P||l(this,d,h,4,2147483647,-2147483648),this[h]=d&255,this[h+1]=d>>>8,this[h+2]=d>>>16,this[h+3]=d>>>24,h+4},u.prototype.writeInt32BE=function(d,h,P){return d=+d,h=h>>>0,P||l(this,d,h,4,2147483647,-2147483648),d<0&&(d=4294967295+d+1),this[h]=d>>>24,this[h+1]=d>>>16,this[h+2]=d>>>8,this[h+3]=d&255,h+4},u.prototype.writeBigInt64LE=St(function(d,h=0){return b(this,d,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=St(function(d,h=0){return x(this,d,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function O($,d,h,P,q,W){if(h+P>$.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function z($,d,h,P,q){return d=+d,h=h>>>0,q||O($,d,h,4),r.write($,d,h,P,23,4),h+4}u.prototype.writeFloatLE=function(d,h,P){return z(this,d,h,!0,P)},u.prototype.writeFloatBE=function(d,h,P){return z(this,d,h,!1,P)};function ae($,d,h,P,q){return d=+d,h=h>>>0,q||O($,d,h,8),r.write($,d,h,P,52,8),h+8}u.prototype.writeDoubleLE=function(d,h,P){return ae(this,d,h,!0,P)},u.prototype.writeDoubleBE=function(d,h,P){return ae(this,d,h,!1,P)},u.prototype.copy=function(d,h,P,q){if(!u.isBuffer(d))throw new TypeError("argument should be a Buffer");if(P||(P=0),!q&&q!==0&&(q=this.length),h>=d.length&&(h=d.length),h||(h=0),q>0&&q<P&&(q=P),q===P||d.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),d.length-h<q-P&&(q=d.length-h+P);const W=q-P;return this===d&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(h,P,q):Uint8Array.prototype.set.call(d,this.subarray(P,q),h),W},u.prototype.fill=function(d,h,P,q){if(typeof d=="string"){if(typeof h=="string"?(q=h,h=0,P=this.length):typeof P=="string"&&(q=P,P=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!u.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(d.length===1){const Z=d.charCodeAt(0);(q==="utf8"&&Z<128||q==="latin1")&&(d=Z)}}else typeof d=="number"?d=d&255:typeof d=="boolean"&&(d=Number(d));if(h<0||this.length<h||this.length<P)throw new RangeError("Out of range index");if(P<=h)return this;h=h>>>0,P=P===void 0?this.length:P>>>0,d||(d=0);let W;if(typeof d=="number")for(W=h;W<P;++W)this[W]=d;else{const Z=u.isBuffer(d)?d:u.from(d,q),Fe=Z.length;if(Fe===0)throw new TypeError('The value "'+d+'" is invalid for argument "value"');for(W=0;W<P-h;++W)this[W+h]=Z[W%Fe]}return this};const se={};function he($,d,h){se[$]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:d.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${$}]`,this.stack,delete this.name}get code(){return $}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${$}]: ${this.message}`}}}he("ERR_BUFFER_OUT_OF_BOUNDS",function($){return $?`${$} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),he("ERR_INVALID_ARG_TYPE",function($,d){return`The "${$}" argument must be of type number. Received type ${typeof d}`},TypeError),he("ERR_OUT_OF_RANGE",function($,d,h){let P=`The value of "${$}" is out of range.`,q=h;return Number.isInteger(h)&&Math.abs(h)>2**32?q=Se(String(h)):typeof h=="bigint"&&(q=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(q=Se(q)),q+="n"),P+=` It must be ${d}. Received ${q}`,P},RangeError);function Se($){let d="",h=$.length;const P=$[0]==="-"?1:0;for(;h>=P+4;h-=3)d=`_${$.slice(h-3,h)}${d}`;return`${$.slice(0,h)}${d}`}function Te($,d,h){dt(d,"offset"),($[d]===void 0||$[d+h]===void 0)&&He(d,$.length-(h+1))}function Le($,d,h,P,q,W){if($>h||$<d){const Z=typeof d=="bigint"?"n":"";let Fe;throw d===0||d===BigInt(0)?Fe=`>= 0${Z} and < 2${Z} ** ${(W+1)*8}${Z}`:Fe=`>= -(2${Z} ** ${(W+1)*8-1}${Z}) and < 2 ** ${(W+1)*8-1}${Z}`,new se.ERR_OUT_OF_RANGE("value",Fe,$)}Te(P,q,W)}function dt($,d){if(typeof $!="number")throw new se.ERR_INVALID_ARG_TYPE(d,"number",$)}function He($,d,h){throw Math.floor($)!==$?(dt($,h),new se.ERR_OUT_OF_RANGE("offset","an integer",$)):d<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${d}`,$)}const it=/[^+/0-9A-Za-z-_]/g;function Et($){if($=$.split("=")[0],$=$.trim().replace(it,""),$.length<2)return"";for(;$.length%4!==0;)$=$+"=";return $}function nt($,d){d=d||1/0;let h;const P=$.length;let q=null;const W=[];for(let Z=0;Z<P;++Z){if(h=$.charCodeAt(Z),h>55295&&h<57344){if(!q){if(h>56319){(d-=3)>-1&&W.push(239,191,189);continue}else if(Z+1===P){(d-=3)>-1&&W.push(239,191,189);continue}q=h;continue}if(h<56320){(d-=3)>-1&&W.push(239,191,189),q=h;continue}h=(q-55296<<10|h-56320)+65536}else q&&(d-=3)>-1&&W.push(239,191,189);if(q=null,h<128){if((d-=1)<0)break;W.push(h)}else if(h<2048){if((d-=2)<0)break;W.push(h>>6|192,h&63|128)}else if(h<65536){if((d-=3)<0)break;W.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((d-=4)<0)break;W.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return W}function ct($){const d=[];for(let h=0;h<$.length;++h)d.push($.charCodeAt(h)&255);return d}function xt($,d){let h,P,q;const W=[];for(let Z=0;Z<$.length&&!((d-=2)<0);++Z)h=$.charCodeAt(Z),P=h>>8,q=h%256,W.push(q),W.push(P);return W}function Qe($){return t.toByteArray(Et($))}function et($,d,h,P){let q;for(q=0;q<P&&!(q+h>=d.length||q>=$.length);++q)d[q+h]=$[q];return q}function $t($,d){return $ instanceof d||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===d.name}function tt($){return $!==$}const ot=function(){const $="0123456789abcdef",d=new Array(256);for(let h=0;h<16;++h){const P=h*16;for(let q=0;q<16;++q)d[P+q]=$[h]+$[q]}return d}();function St($){return typeof BigInt>"u"?Xe:$}function Xe(){throw new Error("BigInt not supported")}})(buffer);Object.assign(self,{process:process$2,global:self,Buffer:buffer.Buffer});var browserIndex$1={},browserIndex={},keystore$1={},lib$e={},in_memory_key_store$1={},lib$d={},constants$2={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.KeyType=void 0,function(t){t[t.ED25519=0]="ED25519"}(e.KeyType||(e.KeyType={}))})(constants$2);var key_pair$1={},key_pair_base={};Object.defineProperty(key_pair_base,"__esModule",{value:!0});key_pair_base.KeyPairBase=void 0;class KeyPairBase{}key_pair_base.KeyPairBase=KeyPairBase;var key_pair_ed25519={},lib$c={},bn={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(__viteBrowserExternal$1);bn.exports;(function(e){(function(t,r){function n(M,c){if(!M)throw new Error(c||"Assertion failed")}function a(M,c){M.super_=c;var p=function(){};p.prototype=c.prototype,M.prototype=new p,M.prototype.constructor=M}function o(M,c,p){if(o.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((c==="le"||c==="be")&&(p=c,c=10),this._init(M||0,c||10,p||"be"))}typeof t=="object"?t.exports=o:r.BN=o,o.BN=o,o.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=require$$2$1.Buffer}catch{}o.isBN=function(c){return c instanceof o?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===o.wordSize&&Array.isArray(c.words)},o.max=function(c,p){return c.cmp(p)>0?c:p},o.min=function(c,p){return c.cmp(p)<0?c:p},o.prototype._init=function(c,p,E){if(typeof c=="number")return this._initNumber(c,p,E);if(typeof c=="object")return this._initArray(c,p,E);p==="hex"&&(p=16),n(p===(p|0)&&p>=2&&p<=36),c=c.toString().replace(/\s+/g,"");var T=0;c[0]==="-"&&(T++,this.negative=1),T<c.length&&(p===16?this._parseHex(c,T,E):(this._parseBase(c,p,T),E==="le"&&this._initArray(this.toArray(),p,E)))},o.prototype._initNumber=function(c,p,E){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),p,E)},o.prototype._initArray=function(c,p,E){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var C,F,j=0;if(E==="be")for(T=c.length-1,C=0;T>=0;T-=3)F=c[T]|c[T-1]<<8|c[T-2]<<16,this.words[C]|=F<<j&67108863,this.words[C+1]=F>>>26-j&67108863,j+=24,j>=26&&(j-=26,C++);else if(E==="le")for(T=0,C=0;T<c.length;T+=3)F=c[T]|c[T+1]<<8|c[T+2]<<16,this.words[C]|=F<<j&67108863,this.words[C+1]=F>>>26-j&67108863,j+=24,j>=26&&(j-=26,C++);return this._strip()};function u(M,c){var p=M.charCodeAt(c);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+M)}function _(M,c,p){var E=u(M,p);return p-1>=c&&(E|=u(M,p-1)<<4),E}o.prototype._parseHex=function(c,p,E){this.length=Math.ceil((c.length-p)/6),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var C=0,F=0,j;if(E==="be")for(T=c.length-1;T>=p;T-=2)j=_(c,p,T)<<C,this.words[F]|=j&67108863,C>=18?(C-=18,F+=1,this.words[F]|=j>>>26):C+=8;else{var y=c.length-p;for(T=y%2===0?p+1:p;T<c.length;T+=2)j=_(c,p,T)<<C,this.words[F]|=j&67108863,C>=18?(C-=18,F+=1,this.words[F]|=j>>>26):C+=8}this._strip()};function v(M,c,p,E){for(var T=0,C=0,F=Math.min(M.length,p),j=c;j<F;j++){var y=M.charCodeAt(j)-48;T*=E,y>=49?C=y-49+10:y>=17?C=y-17+10:C=y,n(y>=0&&C<E,"Invalid character"),T+=C}return T}o.prototype._parseBase=function(c,p,E){this.words=[0],this.length=1;for(var T=0,C=1;C<=67108863;C*=p)T++;T--,C=C/p|0;for(var F=c.length-E,j=F%T,y=Math.min(F,F-j)+E,l=0,b=E;b<y;b+=T)l=v(c,b,b+T,p),this.imuln(C),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(j!==0){var x=1;for(l=v(c,b,c.length,p),b=0;b<j;b++)x*=p;this.imuln(x),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},o.prototype.copy=function(c){c.words=new Array(this.length);for(var p=0;p<this.length;p++)c.words[p]=this.words[p];c.length=this.length,c.negative=this.negative,c.red=this.red};function g(M,c){M.words=c.words,M.length=c.length,M.negative=c.negative,M.red=c.red}if(o.prototype._move=function(c){g(c,this)},o.prototype.clone=function(){var c=new o(null);return this.copy(c),c},o.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=S}catch{o.prototype.inspect=S}else o.prototype.inspect=S;function S(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var U=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(c,p){c=c||10,p=p|0||1;var E;if(c===16||c==="hex"){E="";for(var T=0,C=0,F=0;F<this.length;F++){var j=this.words[F],y=((j<<T|C)&16777215).toString(16);C=j>>>24-T&16777215,T+=2,T>=26&&(T-=26,F--),C!==0||F!==this.length-1?E=U[6-y.length]+y+E:E=y+E}for(C!==0&&(E=C.toString(16)+E);E.length%p!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(c===(c|0)&&c>=2&&c<=36){var l=k[c],b=B[c];E="";var x=this.clone();for(x.negative=0;!x.isZero();){var O=x.modrn(b).toString(c);x=x.idivn(b),x.isZero()?E=O+E:E=U[l-O.length]+O+E}for(this.isZero()&&(E="0"+E);E.length%p!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},o.prototype.toJSON=function(){return this.toString(16,2)},s&&(o.prototype.toBuffer=function(c,p){return this.toArrayLike(s,c,p)}),o.prototype.toArray=function(c,p){return this.toArrayLike(Array,c,p)};var D=function(c,p){return c.allocUnsafe?c.allocUnsafe(p):new c(p)};o.prototype.toArrayLike=function(c,p,E){this._strip();var T=this.byteLength(),C=E||Math.max(1,T);n(T<=C,"byte array longer than desired length"),n(C>0,"Requested array length <= 0");var F=D(c,C),j=p==="le"?"LE":"BE";return this["_toArrayLike"+j](F,T),F},o.prototype._toArrayLikeLE=function(c,p){for(var E=0,T=0,C=0,F=0;C<this.length;C++){var j=this.words[C]<<F|T;c[E++]=j&255,E<c.length&&(c[E++]=j>>8&255),E<c.length&&(c[E++]=j>>16&255),F===6?(E<c.length&&(c[E++]=j>>24&255),T=0,F=0):(T=j>>>24,F+=2)}if(E<c.length)for(c[E++]=T;E<c.length;)c[E++]=0},o.prototype._toArrayLikeBE=function(c,p){for(var E=c.length-1,T=0,C=0,F=0;C<this.length;C++){var j=this.words[C]<<F|T;c[E--]=j&255,E>=0&&(c[E--]=j>>8&255),E>=0&&(c[E--]=j>>16&255),F===6?(E>=0&&(c[E--]=j>>24&255),T=0,F=0):(T=j>>>24,F+=2)}if(E>=0)for(c[E--]=T;E>=0;)c[E--]=0},Math.clz32?o.prototype._countBits=function(c){return 32-Math.clz32(c)}:o.prototype._countBits=function(c){var p=c,E=0;return p>=4096&&(E+=13,p>>>=13),p>=64&&(E+=7,p>>>=7),p>=8&&(E+=4,p>>>=4),p>=2&&(E+=2,p>>>=2),E+p},o.prototype._zeroBits=function(c){if(c===0)return 26;var p=c,E=0;return p&8191||(E+=13,p>>>=13),p&127||(E+=7,p>>>=7),p&15||(E+=4,p>>>=4),p&3||(E+=2,p>>>=2),p&1||E++,E},o.prototype.bitLength=function(){var c=this.words[this.length-1],p=this._countBits(c);return(this.length-1)*26+p};function L(M){for(var c=new Array(M.bitLength()),p=0;p<c.length;p++){var E=p/26|0,T=p%26;c[p]=M.words[E]>>>T&1}return c}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,p=0;p<this.length;p++){var E=this._zeroBits(this.words[p]);if(c+=E,E!==26)break}return c},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},o.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var p=0;p<c.length;p++)this.words[p]=this.words[p]|c.words[p];return this._strip()},o.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},o.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},o.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},o.prototype.iuand=function(c){var p;this.length>c.length?p=c:p=this;for(var E=0;E<p.length;E++)this.words[E]=this.words[E]&c.words[E];return this.length=p.length,this._strip()},o.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},o.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},o.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},o.prototype.iuxor=function(c){var p,E;this.length>c.length?(p=this,E=c):(p=c,E=this);for(var T=0;T<E.length;T++)this.words[T]=p.words[T]^E.words[T];if(this!==p)for(;T<p.length;T++)this.words[T]=p.words[T];return this.length=p.length,this._strip()},o.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},o.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},o.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},o.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var p=Math.ceil(c/26)|0,E=c%26;this._expand(p),E>0&&p--;for(var T=0;T<p;T++)this.words[T]=~this.words[T]&67108863;return E>0&&(this.words[T]=~this.words[T]&67108863>>26-E),this._strip()},o.prototype.notn=function(c){return this.clone().inotn(c)},o.prototype.setn=function(c,p){n(typeof c=="number"&&c>=0);var E=c/26|0,T=c%26;return this._expand(E+1),p?this.words[E]=this.words[E]|1<<T:this.words[E]=this.words[E]&~(1<<T),this._strip()},o.prototype.iadd=function(c){var p;if(this.negative!==0&&c.negative===0)return this.negative=0,p=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,p=this.isub(c),c.negative=1,p._normSign();var E,T;this.length>c.length?(E=this,T=c):(E=c,T=this);for(var C=0,F=0;F<T.length;F++)p=(E.words[F]|0)+(T.words[F]|0)+C,this.words[F]=p&67108863,C=p>>>26;for(;C!==0&&F<E.length;F++)p=(E.words[F]|0)+C,this.words[F]=p&67108863,C=p>>>26;if(this.length=E.length,C!==0)this.words[this.length]=C,this.length++;else if(E!==this)for(;F<E.length;F++)this.words[F]=E.words[F];return this},o.prototype.add=function(c){var p;return c.negative!==0&&this.negative===0?(c.negative=0,p=this.sub(c),c.negative^=1,p):c.negative===0&&this.negative!==0?(this.negative=0,p=c.sub(this),this.negative=1,p):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},o.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var p=this.iadd(c);return c.negative=1,p._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var E=this.cmp(c);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var T,C;E>0?(T=this,C=c):(T=c,C=this);for(var F=0,j=0;j<C.length;j++)p=(T.words[j]|0)-(C.words[j]|0)+F,F=p>>26,this.words[j]=p&67108863;for(;F!==0&&j<T.length;j++)p=(T.words[j]|0)+F,F=p>>26,this.words[j]=p&67108863;if(F===0&&j<T.length&&T!==this)for(;j<T.length;j++)this.words[j]=T.words[j];return this.length=Math.max(this.length,j),T!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(c){return this.clone().isub(c)};function R(M,c,p){p.negative=c.negative^M.negative;var E=M.length+c.length|0;p.length=E,E=E-1|0;var T=M.words[0]|0,C=c.words[0]|0,F=T*C,j=F&67108863,y=F/67108864|0;p.words[0]=j;for(var l=1;l<E;l++){for(var b=y>>>26,x=y&67108863,O=Math.min(l,c.length-1),z=Math.max(0,l-M.length+1);z<=O;z++){var ae=l-z|0;T=M.words[ae]|0,C=c.words[z]|0,F=T*C+x,b+=F/67108864|0,x=F&67108863}p.words[l]=x|0,y=b|0}return y!==0?p.words[l]=y|0:p.length--,p._strip()}var G=function(c,p,E){var T=c.words,C=p.words,F=E.words,j=0,y,l,b,x=T[0]|0,O=x&8191,z=x>>>13,ae=T[1]|0,se=ae&8191,he=ae>>>13,Se=T[2]|0,Te=Se&8191,Le=Se>>>13,dt=T[3]|0,He=dt&8191,it=dt>>>13,Et=T[4]|0,nt=Et&8191,ct=Et>>>13,xt=T[5]|0,Qe=xt&8191,et=xt>>>13,$t=T[6]|0,tt=$t&8191,ot=$t>>>13,St=T[7]|0,Xe=St&8191,$=St>>>13,d=T[8]|0,h=d&8191,P=d>>>13,q=T[9]|0,W=q&8191,Z=q>>>13,Fe=C[0]|0,Pe=Fe&8191,Ie=Fe>>>13,at=C[1]|0,Ae=at&8191,lt=at>>>13,Ot=C[2]|0,mt=Ot&8191,_t=Ot>>>13,jt=C[3]|0,st=jt&8191,ft=jt>>>13,Pt=C[4]|0,ht=Pt&8191,pt=Pt>>>13,Ct=C[5]|0,yt=Ct&8191,Ve=Ct>>>13,Rt=C[6]|0,m=Rt&8191,w=Rt>>>13,A=C[7]|0,f=A&8191,I=A>>>13,V=C[8]|0,H=V&8191,Q=V>>>13,ue=C[9]|0,de=ue&8191,fe=ue>>>13;E.negative=c.negative^p.negative,E.length=19,y=Math.imul(O,Pe),l=Math.imul(O,Ie),l=l+Math.imul(z,Pe)|0,b=Math.imul(z,Ie);var ze=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(ze>>>26)|0,ze&=67108863,y=Math.imul(se,Pe),l=Math.imul(se,Ie),l=l+Math.imul(he,Pe)|0,b=Math.imul(he,Ie),y=y+Math.imul(O,Ae)|0,l=l+Math.imul(O,lt)|0,l=l+Math.imul(z,Ae)|0,b=b+Math.imul(z,lt)|0;var ye=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(ye>>>26)|0,ye&=67108863,y=Math.imul(Te,Pe),l=Math.imul(Te,Ie),l=l+Math.imul(Le,Pe)|0,b=Math.imul(Le,Ie),y=y+Math.imul(se,Ae)|0,l=l+Math.imul(se,lt)|0,l=l+Math.imul(he,Ae)|0,b=b+Math.imul(he,lt)|0,y=y+Math.imul(O,mt)|0,l=l+Math.imul(O,_t)|0,l=l+Math.imul(z,mt)|0,b=b+Math.imul(z,_t)|0;var Me=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(Me>>>26)|0,Me&=67108863,y=Math.imul(He,Pe),l=Math.imul(He,Ie),l=l+Math.imul(it,Pe)|0,b=Math.imul(it,Ie),y=y+Math.imul(Te,Ae)|0,l=l+Math.imul(Te,lt)|0,l=l+Math.imul(Le,Ae)|0,b=b+Math.imul(Le,lt)|0,y=y+Math.imul(se,mt)|0,l=l+Math.imul(se,_t)|0,l=l+Math.imul(he,mt)|0,b=b+Math.imul(he,_t)|0,y=y+Math.imul(O,st)|0,l=l+Math.imul(O,ft)|0,l=l+Math.imul(z,st)|0,b=b+Math.imul(z,ft)|0;var Oe=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,y=Math.imul(nt,Pe),l=Math.imul(nt,Ie),l=l+Math.imul(ct,Pe)|0,b=Math.imul(ct,Ie),y=y+Math.imul(He,Ae)|0,l=l+Math.imul(He,lt)|0,l=l+Math.imul(it,Ae)|0,b=b+Math.imul(it,lt)|0,y=y+Math.imul(Te,mt)|0,l=l+Math.imul(Te,_t)|0,l=l+Math.imul(Le,mt)|0,b=b+Math.imul(Le,_t)|0,y=y+Math.imul(se,st)|0,l=l+Math.imul(se,ft)|0,l=l+Math.imul(he,st)|0,b=b+Math.imul(he,ft)|0,y=y+Math.imul(O,ht)|0,l=l+Math.imul(O,pt)|0,l=l+Math.imul(z,ht)|0,b=b+Math.imul(z,pt)|0;var De=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(De>>>26)|0,De&=67108863,y=Math.imul(Qe,Pe),l=Math.imul(Qe,Ie),l=l+Math.imul(et,Pe)|0,b=Math.imul(et,Ie),y=y+Math.imul(nt,Ae)|0,l=l+Math.imul(nt,lt)|0,l=l+Math.imul(ct,Ae)|0,b=b+Math.imul(ct,lt)|0,y=y+Math.imul(He,mt)|0,l=l+Math.imul(He,_t)|0,l=l+Math.imul(it,mt)|0,b=b+Math.imul(it,_t)|0,y=y+Math.imul(Te,st)|0,l=l+Math.imul(Te,ft)|0,l=l+Math.imul(Le,st)|0,b=b+Math.imul(Le,ft)|0,y=y+Math.imul(se,ht)|0,l=l+Math.imul(se,pt)|0,l=l+Math.imul(he,ht)|0,b=b+Math.imul(he,pt)|0,y=y+Math.imul(O,yt)|0,l=l+Math.imul(O,Ve)|0,l=l+Math.imul(z,yt)|0,b=b+Math.imul(z,Ve)|0;var Ne=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,y=Math.imul(tt,Pe),l=Math.imul(tt,Ie),l=l+Math.imul(ot,Pe)|0,b=Math.imul(ot,Ie),y=y+Math.imul(Qe,Ae)|0,l=l+Math.imul(Qe,lt)|0,l=l+Math.imul(et,Ae)|0,b=b+Math.imul(et,lt)|0,y=y+Math.imul(nt,mt)|0,l=l+Math.imul(nt,_t)|0,l=l+Math.imul(ct,mt)|0,b=b+Math.imul(ct,_t)|0,y=y+Math.imul(He,st)|0,l=l+Math.imul(He,ft)|0,l=l+Math.imul(it,st)|0,b=b+Math.imul(it,ft)|0,y=y+Math.imul(Te,ht)|0,l=l+Math.imul(Te,pt)|0,l=l+Math.imul(Le,ht)|0,b=b+Math.imul(Le,pt)|0,y=y+Math.imul(se,yt)|0,l=l+Math.imul(se,Ve)|0,l=l+Math.imul(he,yt)|0,b=b+Math.imul(he,Ve)|0,y=y+Math.imul(O,m)|0,l=l+Math.imul(O,w)|0,l=l+Math.imul(z,m)|0,b=b+Math.imul(z,w)|0;var Ce=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,y=Math.imul(Xe,Pe),l=Math.imul(Xe,Ie),l=l+Math.imul($,Pe)|0,b=Math.imul($,Ie),y=y+Math.imul(tt,Ae)|0,l=l+Math.imul(tt,lt)|0,l=l+Math.imul(ot,Ae)|0,b=b+Math.imul(ot,lt)|0,y=y+Math.imul(Qe,mt)|0,l=l+Math.imul(Qe,_t)|0,l=l+Math.imul(et,mt)|0,b=b+Math.imul(et,_t)|0,y=y+Math.imul(nt,st)|0,l=l+Math.imul(nt,ft)|0,l=l+Math.imul(ct,st)|0,b=b+Math.imul(ct,ft)|0,y=y+Math.imul(He,ht)|0,l=l+Math.imul(He,pt)|0,l=l+Math.imul(it,ht)|0,b=b+Math.imul(it,pt)|0,y=y+Math.imul(Te,yt)|0,l=l+Math.imul(Te,Ve)|0,l=l+Math.imul(Le,yt)|0,b=b+Math.imul(Le,Ve)|0,y=y+Math.imul(se,m)|0,l=l+Math.imul(se,w)|0,l=l+Math.imul(he,m)|0,b=b+Math.imul(he,w)|0,y=y+Math.imul(O,f)|0,l=l+Math.imul(O,I)|0,l=l+Math.imul(z,f)|0,b=b+Math.imul(z,I)|0;var ke=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(ke>>>26)|0,ke&=67108863,y=Math.imul(h,Pe),l=Math.imul(h,Ie),l=l+Math.imul(P,Pe)|0,b=Math.imul(P,Ie),y=y+Math.imul(Xe,Ae)|0,l=l+Math.imul(Xe,lt)|0,l=l+Math.imul($,Ae)|0,b=b+Math.imul($,lt)|0,y=y+Math.imul(tt,mt)|0,l=l+Math.imul(tt,_t)|0,l=l+Math.imul(ot,mt)|0,b=b+Math.imul(ot,_t)|0,y=y+Math.imul(Qe,st)|0,l=l+Math.imul(Qe,ft)|0,l=l+Math.imul(et,st)|0,b=b+Math.imul(et,ft)|0,y=y+Math.imul(nt,ht)|0,l=l+Math.imul(nt,pt)|0,l=l+Math.imul(ct,ht)|0,b=b+Math.imul(ct,pt)|0,y=y+Math.imul(He,yt)|0,l=l+Math.imul(He,Ve)|0,l=l+Math.imul(it,yt)|0,b=b+Math.imul(it,Ve)|0,y=y+Math.imul(Te,m)|0,l=l+Math.imul(Te,w)|0,l=l+Math.imul(Le,m)|0,b=b+Math.imul(Le,w)|0,y=y+Math.imul(se,f)|0,l=l+Math.imul(se,I)|0,l=l+Math.imul(he,f)|0,b=b+Math.imul(he,I)|0,y=y+Math.imul(O,H)|0,l=l+Math.imul(O,Q)|0,l=l+Math.imul(z,H)|0,b=b+Math.imul(z,Q)|0;var Re=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(Re>>>26)|0,Re&=67108863,y=Math.imul(W,Pe),l=Math.imul(W,Ie),l=l+Math.imul(Z,Pe)|0,b=Math.imul(Z,Ie),y=y+Math.imul(h,Ae)|0,l=l+Math.imul(h,lt)|0,l=l+Math.imul(P,Ae)|0,b=b+Math.imul(P,lt)|0,y=y+Math.imul(Xe,mt)|0,l=l+Math.imul(Xe,_t)|0,l=l+Math.imul($,mt)|0,b=b+Math.imul($,_t)|0,y=y+Math.imul(tt,st)|0,l=l+Math.imul(tt,ft)|0,l=l+Math.imul(ot,st)|0,b=b+Math.imul(ot,ft)|0,y=y+Math.imul(Qe,ht)|0,l=l+Math.imul(Qe,pt)|0,l=l+Math.imul(et,ht)|0,b=b+Math.imul(et,pt)|0,y=y+Math.imul(nt,yt)|0,l=l+Math.imul(nt,Ve)|0,l=l+Math.imul(ct,yt)|0,b=b+Math.imul(ct,Ve)|0,y=y+Math.imul(He,m)|0,l=l+Math.imul(He,w)|0,l=l+Math.imul(it,m)|0,b=b+Math.imul(it,w)|0,y=y+Math.imul(Te,f)|0,l=l+Math.imul(Te,I)|0,l=l+Math.imul(Le,f)|0,b=b+Math.imul(Le,I)|0,y=y+Math.imul(se,H)|0,l=l+Math.imul(se,Q)|0,l=l+Math.imul(he,H)|0,b=b+Math.imul(he,Q)|0,y=y+Math.imul(O,de)|0,l=l+Math.imul(O,fe)|0,l=l+Math.imul(z,de)|0,b=b+Math.imul(z,fe)|0;var ge=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(ge>>>26)|0,ge&=67108863,y=Math.imul(W,Ae),l=Math.imul(W,lt),l=l+Math.imul(Z,Ae)|0,b=Math.imul(Z,lt),y=y+Math.imul(h,mt)|0,l=l+Math.imul(h,_t)|0,l=l+Math.imul(P,mt)|0,b=b+Math.imul(P,_t)|0,y=y+Math.imul(Xe,st)|0,l=l+Math.imul(Xe,ft)|0,l=l+Math.imul($,st)|0,b=b+Math.imul($,ft)|0,y=y+Math.imul(tt,ht)|0,l=l+Math.imul(tt,pt)|0,l=l+Math.imul(ot,ht)|0,b=b+Math.imul(ot,pt)|0,y=y+Math.imul(Qe,yt)|0,l=l+Math.imul(Qe,Ve)|0,l=l+Math.imul(et,yt)|0,b=b+Math.imul(et,Ve)|0,y=y+Math.imul(nt,m)|0,l=l+Math.imul(nt,w)|0,l=l+Math.imul(ct,m)|0,b=b+Math.imul(ct,w)|0,y=y+Math.imul(He,f)|0,l=l+Math.imul(He,I)|0,l=l+Math.imul(it,f)|0,b=b+Math.imul(it,I)|0,y=y+Math.imul(Te,H)|0,l=l+Math.imul(Te,Q)|0,l=l+Math.imul(Le,H)|0,b=b+Math.imul(Le,Q)|0,y=y+Math.imul(se,de)|0,l=l+Math.imul(se,fe)|0,l=l+Math.imul(he,de)|0,b=b+Math.imul(he,fe)|0;var $e=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+($e>>>26)|0,$e&=67108863,y=Math.imul(W,mt),l=Math.imul(W,_t),l=l+Math.imul(Z,mt)|0,b=Math.imul(Z,_t),y=y+Math.imul(h,st)|0,l=l+Math.imul(h,ft)|0,l=l+Math.imul(P,st)|0,b=b+Math.imul(P,ft)|0,y=y+Math.imul(Xe,ht)|0,l=l+Math.imul(Xe,pt)|0,l=l+Math.imul($,ht)|0,b=b+Math.imul($,pt)|0,y=y+Math.imul(tt,yt)|0,l=l+Math.imul(tt,Ve)|0,l=l+Math.imul(ot,yt)|0,b=b+Math.imul(ot,Ve)|0,y=y+Math.imul(Qe,m)|0,l=l+Math.imul(Qe,w)|0,l=l+Math.imul(et,m)|0,b=b+Math.imul(et,w)|0,y=y+Math.imul(nt,f)|0,l=l+Math.imul(nt,I)|0,l=l+Math.imul(ct,f)|0,b=b+Math.imul(ct,I)|0,y=y+Math.imul(He,H)|0,l=l+Math.imul(He,Q)|0,l=l+Math.imul(it,H)|0,b=b+Math.imul(it,Q)|0,y=y+Math.imul(Te,de)|0,l=l+Math.imul(Te,fe)|0,l=l+Math.imul(Le,de)|0,b=b+Math.imul(Le,fe)|0;var me=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(me>>>26)|0,me&=67108863,y=Math.imul(W,st),l=Math.imul(W,ft),l=l+Math.imul(Z,st)|0,b=Math.imul(Z,ft),y=y+Math.imul(h,ht)|0,l=l+Math.imul(h,pt)|0,l=l+Math.imul(P,ht)|0,b=b+Math.imul(P,pt)|0,y=y+Math.imul(Xe,yt)|0,l=l+Math.imul(Xe,Ve)|0,l=l+Math.imul($,yt)|0,b=b+Math.imul($,Ve)|0,y=y+Math.imul(tt,m)|0,l=l+Math.imul(tt,w)|0,l=l+Math.imul(ot,m)|0,b=b+Math.imul(ot,w)|0,y=y+Math.imul(Qe,f)|0,l=l+Math.imul(Qe,I)|0,l=l+Math.imul(et,f)|0,b=b+Math.imul(et,I)|0,y=y+Math.imul(nt,H)|0,l=l+Math.imul(nt,Q)|0,l=l+Math.imul(ct,H)|0,b=b+Math.imul(ct,Q)|0,y=y+Math.imul(He,de)|0,l=l+Math.imul(He,fe)|0,l=l+Math.imul(it,de)|0,b=b+Math.imul(it,fe)|0;var ve=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(ve>>>26)|0,ve&=67108863,y=Math.imul(W,ht),l=Math.imul(W,pt),l=l+Math.imul(Z,ht)|0,b=Math.imul(Z,pt),y=y+Math.imul(h,yt)|0,l=l+Math.imul(h,Ve)|0,l=l+Math.imul(P,yt)|0,b=b+Math.imul(P,Ve)|0,y=y+Math.imul(Xe,m)|0,l=l+Math.imul(Xe,w)|0,l=l+Math.imul($,m)|0,b=b+Math.imul($,w)|0,y=y+Math.imul(tt,f)|0,l=l+Math.imul(tt,I)|0,l=l+Math.imul(ot,f)|0,b=b+Math.imul(ot,I)|0,y=y+Math.imul(Qe,H)|0,l=l+Math.imul(Qe,Q)|0,l=l+Math.imul(et,H)|0,b=b+Math.imul(et,Q)|0,y=y+Math.imul(nt,de)|0,l=l+Math.imul(nt,fe)|0,l=l+Math.imul(ct,de)|0,b=b+Math.imul(ct,fe)|0;var be=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(be>>>26)|0,be&=67108863,y=Math.imul(W,yt),l=Math.imul(W,Ve),l=l+Math.imul(Z,yt)|0,b=Math.imul(Z,Ve),y=y+Math.imul(h,m)|0,l=l+Math.imul(h,w)|0,l=l+Math.imul(P,m)|0,b=b+Math.imul(P,w)|0,y=y+Math.imul(Xe,f)|0,l=l+Math.imul(Xe,I)|0,l=l+Math.imul($,f)|0,b=b+Math.imul($,I)|0,y=y+Math.imul(tt,H)|0,l=l+Math.imul(tt,Q)|0,l=l+Math.imul(ot,H)|0,b=b+Math.imul(ot,Q)|0,y=y+Math.imul(Qe,de)|0,l=l+Math.imul(Qe,fe)|0,l=l+Math.imul(et,de)|0,b=b+Math.imul(et,fe)|0;var pe=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(pe>>>26)|0,pe&=67108863,y=Math.imul(W,m),l=Math.imul(W,w),l=l+Math.imul(Z,m)|0,b=Math.imul(Z,w),y=y+Math.imul(h,f)|0,l=l+Math.imul(h,I)|0,l=l+Math.imul(P,f)|0,b=b+Math.imul(P,I)|0,y=y+Math.imul(Xe,H)|0,l=l+Math.imul(Xe,Q)|0,l=l+Math.imul($,H)|0,b=b+Math.imul($,Q)|0,y=y+Math.imul(tt,de)|0,l=l+Math.imul(tt,fe)|0,l=l+Math.imul(ot,de)|0,b=b+Math.imul(ot,fe)|0;var X=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(X>>>26)|0,X&=67108863,y=Math.imul(W,f),l=Math.imul(W,I),l=l+Math.imul(Z,f)|0,b=Math.imul(Z,I),y=y+Math.imul(h,H)|0,l=l+Math.imul(h,Q)|0,l=l+Math.imul(P,H)|0,b=b+Math.imul(P,Q)|0,y=y+Math.imul(Xe,de)|0,l=l+Math.imul(Xe,fe)|0,l=l+Math.imul($,de)|0,b=b+Math.imul($,fe)|0;var Y=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(Y>>>26)|0,Y&=67108863,y=Math.imul(W,H),l=Math.imul(W,Q),l=l+Math.imul(Z,H)|0,b=Math.imul(Z,Q),y=y+Math.imul(h,de)|0,l=l+Math.imul(h,fe)|0,l=l+Math.imul(P,de)|0,b=b+Math.imul(P,fe)|0;var oe=(j+y|0)+((l&8191)<<13)|0;j=(b+(l>>>13)|0)+(oe>>>26)|0,oe&=67108863,y=Math.imul(W,de),l=Math.imul(W,fe),l=l+Math.imul(Z,de)|0,b=Math.imul(Z,fe);var te=(j+y|0)+((l&8191)<<13)|0;return j=(b+(l>>>13)|0)+(te>>>26)|0,te&=67108863,F[0]=ze,F[1]=ye,F[2]=Me,F[3]=Oe,F[4]=De,F[5]=Ne,F[6]=Ce,F[7]=ke,F[8]=Re,F[9]=ge,F[10]=$e,F[11]=me,F[12]=ve,F[13]=be,F[14]=pe,F[15]=X,F[16]=Y,F[17]=oe,F[18]=te,j!==0&&(F[19]=j,E.length++),E};Math.imul||(G=R);function J(M,c,p){p.negative=c.negative^M.negative,p.length=M.length+c.length;for(var E=0,T=0,C=0;C<p.length-1;C++){var F=T;T=0;for(var j=E&67108863,y=Math.min(C,c.length-1),l=Math.max(0,C-M.length+1);l<=y;l++){var b=C-l,x=M.words[b]|0,O=c.words[l]|0,z=x*O,ae=z&67108863;F=F+(z/67108864|0)|0,ae=ae+j|0,j=ae&67108863,F=F+(ae>>>26)|0,T+=F>>>26,F&=67108863}p.words[C]=j,E=F,F=T}return E!==0?p.words[C]=E:p.length--,p._strip()}function ee(M,c,p){return J(M,c,p)}o.prototype.mulTo=function(c,p){var E,T=this.length+c.length;return this.length===10&&c.length===10?E=G(this,c,p):T<63?E=R(this,c,p):T<1024?E=J(this,c,p):E=ee(this,c,p),E},o.prototype.mul=function(c){var p=new o(null);return p.words=new Array(this.length+c.length),this.mulTo(c,p)},o.prototype.mulf=function(c){var p=new o(null);return p.words=new Array(this.length+c.length),ee(this,c,p)},o.prototype.imul=function(c){return this.clone().mulTo(c,this)},o.prototype.imuln=function(c){var p=c<0;p&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var E=0,T=0;T<this.length;T++){var C=(this.words[T]|0)*c,F=(C&67108863)+(E&67108863);E>>=26,E+=C/67108864|0,E+=F>>>26,this.words[T]=F&67108863}return E!==0&&(this.words[T]=E,this.length++),p?this.ineg():this},o.prototype.muln=function(c){return this.clone().imuln(c)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(c){var p=L(c);if(p.length===0)return new o(1);for(var E=this,T=0;T<p.length&&p[T]===0;T++,E=E.sqr());if(++T<p.length)for(var C=E.sqr();T<p.length;T++,C=C.sqr())p[T]!==0&&(E=E.mul(C));return E},o.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var p=c%26,E=(c-p)/26,T=67108863>>>26-p<<26-p,C;if(p!==0){var F=0;for(C=0;C<this.length;C++){var j=this.words[C]&T,y=(this.words[C]|0)-j<<p;this.words[C]=y|F,F=j>>>26-p}F&&(this.words[C]=F,this.length++)}if(E!==0){for(C=this.length-1;C>=0;C--)this.words[C+E]=this.words[C];for(C=0;C<E;C++)this.words[C]=0;this.length+=E}return this._strip()},o.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},o.prototype.iushrn=function(c,p,E){n(typeof c=="number"&&c>=0);var T;p?T=(p-p%26)/26:T=0;var C=c%26,F=Math.min((c-C)/26,this.length),j=67108863^67108863>>>C<<C,y=E;if(T-=F,T=Math.max(0,T),y){for(var l=0;l<F;l++)y.words[l]=this.words[l];y.length=F}if(F!==0)if(this.length>F)for(this.length-=F,l=0;l<this.length;l++)this.words[l]=this.words[l+F];else this.words[0]=0,this.length=1;var b=0;for(l=this.length-1;l>=0&&(b!==0||l>=T);l--){var x=this.words[l]|0;this.words[l]=b<<26-C|x>>>C,b=x&j}return y&&b!==0&&(y.words[y.length++]=b),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(c,p,E){return n(this.negative===0),this.iushrn(c,p,E)},o.prototype.shln=function(c){return this.clone().ishln(c)},o.prototype.ushln=function(c){return this.clone().iushln(c)},o.prototype.shrn=function(c){return this.clone().ishrn(c)},o.prototype.ushrn=function(c){return this.clone().iushrn(c)},o.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var p=c%26,E=(c-p)/26,T=1<<p;if(this.length<=E)return!1;var C=this.words[E];return!!(C&T)},o.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var p=c%26,E=(c-p)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(p!==0&&E++,this.length=Math.min(E,this.length),p!==0){var T=67108863^67108863>>>p<<p;this.words[this.length-1]&=T}return this._strip()},o.prototype.maskn=function(c){return this.clone().imaskn(c)},o.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},o.prototype._iaddn=function(c){this.words[0]+=c;for(var p=0;p<this.length&&this.words[p]>=67108864;p++)this.words[p]-=67108864,p===this.length-1?this.words[p+1]=1:this.words[p+1]++;return this.length=Math.max(this.length,p+1),this},o.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var p=0;p<this.length&&this.words[p]<0;p++)this.words[p]+=67108864,this.words[p+1]-=1;return this._strip()},o.prototype.addn=function(c){return this.clone().iaddn(c)},o.prototype.subn=function(c){return this.clone().isubn(c)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(c,p,E){var T=c.length+E,C;this._expand(T);var F,j=0;for(C=0;C<c.length;C++){F=(this.words[C+E]|0)+j;var y=(c.words[C]|0)*p;F-=y&67108863,j=(F>>26)-(y/67108864|0),this.words[C+E]=F&67108863}for(;C<this.length-E;C++)F=(this.words[C+E]|0)+j,j=F>>26,this.words[C+E]=F&67108863;if(j===0)return this._strip();for(n(j===-1),j=0,C=0;C<this.length;C++)F=-(this.words[C]|0)+j,j=F>>26,this.words[C]=F&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(c,p){var E=this.length-c.length,T=this.clone(),C=c,F=C.words[C.length-1]|0,j=this._countBits(F);E=26-j,E!==0&&(C=C.ushln(E),T.iushln(E),F=C.words[C.length-1]|0);var y=T.length-C.length,l;if(p!=="mod"){l=new o(null),l.length=y+1,l.words=new Array(l.length);for(var b=0;b<l.length;b++)l.words[b]=0}var x=T.clone()._ishlnsubmul(C,1,y);x.negative===0&&(T=x,l&&(l.words[y]=1));for(var O=y-1;O>=0;O--){var z=(T.words[C.length+O]|0)*67108864+(T.words[C.length+O-1]|0);for(z=Math.min(z/F|0,67108863),T._ishlnsubmul(C,z,O);T.negative!==0;)z--,T.negative=0,T._ishlnsubmul(C,1,O),T.isZero()||(T.negative^=1);l&&(l.words[O]=z)}return l&&l._strip(),T._strip(),p!=="div"&&E!==0&&T.iushrn(E),{div:l||null,mod:T}},o.prototype.divmod=function(c,p,E){if(n(!c.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var T,C,F;return this.negative!==0&&c.negative===0?(F=this.neg().divmod(c,p),p!=="mod"&&(T=F.div.neg()),p!=="div"&&(C=F.mod.neg(),E&&C.negative!==0&&C.iadd(c)),{div:T,mod:C}):this.negative===0&&c.negative!==0?(F=this.divmod(c.neg(),p),p!=="mod"&&(T=F.div.neg()),{div:T,mod:F.mod}):this.negative&c.negative?(F=this.neg().divmod(c.neg(),p),p!=="div"&&(C=F.mod.neg(),E&&C.negative!==0&&C.isub(c)),{div:F.div,mod:C}):c.length>this.length||this.cmp(c)<0?{div:new o(0),mod:this}:c.length===1?p==="div"?{div:this.divn(c.words[0]),mod:null}:p==="mod"?{div:null,mod:new o(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new o(this.modrn(c.words[0]))}:this._wordDiv(c,p)},o.prototype.div=function(c){return this.divmod(c,"div",!1).div},o.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},o.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},o.prototype.divRound=function(c){var p=this.divmod(c);if(p.mod.isZero())return p.div;var E=p.div.negative!==0?p.mod.isub(c):p.mod,T=c.ushrn(1),C=c.andln(1),F=E.cmp(T);return F<0||C===1&&F===0?p.div:p.div.negative!==0?p.div.isubn(1):p.div.iaddn(1)},o.prototype.modrn=function(c){var p=c<0;p&&(c=-c),n(c<=67108863);for(var E=(1<<26)%c,T=0,C=this.length-1;C>=0;C--)T=(E*T+(this.words[C]|0))%c;return p?-T:T},o.prototype.modn=function(c){return this.modrn(c)},o.prototype.idivn=function(c){var p=c<0;p&&(c=-c),n(c<=67108863);for(var E=0,T=this.length-1;T>=0;T--){var C=(this.words[T]|0)+E*67108864;this.words[T]=C/c|0,E=C%c}return this._strip(),p?this.ineg():this},o.prototype.divn=function(c){return this.clone().idivn(c)},o.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var p=this,E=c.clone();p.negative!==0?p=p.umod(c):p=p.clone();for(var T=new o(1),C=new o(0),F=new o(0),j=new o(1),y=0;p.isEven()&&E.isEven();)p.iushrn(1),E.iushrn(1),++y;for(var l=E.clone(),b=p.clone();!p.isZero();){for(var x=0,O=1;!(p.words[0]&O)&&x<26;++x,O<<=1);if(x>0)for(p.iushrn(x);x-- >0;)(T.isOdd()||C.isOdd())&&(T.iadd(l),C.isub(b)),T.iushrn(1),C.iushrn(1);for(var z=0,ae=1;!(E.words[0]&ae)&&z<26;++z,ae<<=1);if(z>0)for(E.iushrn(z);z-- >0;)(F.isOdd()||j.isOdd())&&(F.iadd(l),j.isub(b)),F.iushrn(1),j.iushrn(1);p.cmp(E)>=0?(p.isub(E),T.isub(F),C.isub(j)):(E.isub(p),F.isub(T),j.isub(C))}return{a:F,b:j,gcd:E.iushln(y)}},o.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var p=this,E=c.clone();p.negative!==0?p=p.umod(c):p=p.clone();for(var T=new o(1),C=new o(0),F=E.clone();p.cmpn(1)>0&&E.cmpn(1)>0;){for(var j=0,y=1;!(p.words[0]&y)&&j<26;++j,y<<=1);if(j>0)for(p.iushrn(j);j-- >0;)T.isOdd()&&T.iadd(F),T.iushrn(1);for(var l=0,b=1;!(E.words[0]&b)&&l<26;++l,b<<=1);if(l>0)for(E.iushrn(l);l-- >0;)C.isOdd()&&C.iadd(F),C.iushrn(1);p.cmp(E)>=0?(p.isub(E),T.isub(C)):(E.isub(p),C.isub(T))}var x;return p.cmpn(1)===0?x=T:x=C,x.cmpn(0)<0&&x.iadd(c),x},o.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var p=this.clone(),E=c.clone();p.negative=0,E.negative=0;for(var T=0;p.isEven()&&E.isEven();T++)p.iushrn(1),E.iushrn(1);do{for(;p.isEven();)p.iushrn(1);for(;E.isEven();)E.iushrn(1);var C=p.cmp(E);if(C<0){var F=p;p=E,E=F}else if(C===0||E.cmpn(1)===0)break;p.isub(E)}while(!0);return E.iushln(T)},o.prototype.invm=function(c){return this.egcd(c).a.umod(c)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(c){return this.words[0]&c},o.prototype.bincn=function(c){n(typeof c=="number");var p=c%26,E=(c-p)/26,T=1<<p;if(this.length<=E)return this._expand(E+1),this.words[E]|=T,this;for(var C=T,F=E;C!==0&&F<this.length;F++){var j=this.words[F]|0;j+=C,C=j>>>26,j&=67108863,this.words[F]=j}return C!==0&&(this.words[F]=C,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(c){var p=c<0;if(this.negative!==0&&!p)return-1;if(this.negative===0&&p)return 1;this._strip();var E;if(this.length>1)E=1;else{p&&(c=-c),n(c<=67108863,"Number is too big");var T=this.words[0]|0;E=T===c?0:T<c?-1:1}return this.negative!==0?-E|0:E},o.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var p=this.ucmp(c);return this.negative!==0?-p|0:p},o.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var p=0,E=this.length-1;E>=0;E--){var T=this.words[E]|0,C=c.words[E]|0;if(T!==C){T<C?p=-1:T>C&&(p=1);break}}return p},o.prototype.gtn=function(c){return this.cmpn(c)===1},o.prototype.gt=function(c){return this.cmp(c)===1},o.prototype.gten=function(c){return this.cmpn(c)>=0},o.prototype.gte=function(c){return this.cmp(c)>=0},o.prototype.ltn=function(c){return this.cmpn(c)===-1},o.prototype.lt=function(c){return this.cmp(c)===-1},o.prototype.lten=function(c){return this.cmpn(c)<=0},o.prototype.lte=function(c){return this.cmp(c)<=0},o.prototype.eqn=function(c){return this.cmpn(c)===0},o.prototype.eq=function(c){return this.cmp(c)===0},o.red=function(c){return new Ee(c)},o.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(c){return this.red=c,this},o.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},o.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},o.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},o.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},o.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},o.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},o.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},o.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var re={k256:null,p224:null,p192:null,p25519:null};function le(M,c){this.name=M,this.p=new o(c,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}le.prototype._tmp=function(){var c=new o(null);return c.words=new Array(Math.ceil(this.n/13)),c},le.prototype.ireduce=function(c){var p=c,E;do this.split(p,this.tmp),p=this.imulK(p),p=p.iadd(this.tmp),E=p.bitLength();while(E>this.n);var T=E<this.n?-1:p.ucmp(this.p);return T===0?(p.words[0]=0,p.length=1):T>0?p.isub(this.p):p.strip!==void 0?p.strip():p._strip(),p},le.prototype.split=function(c,p){c.iushrn(this.n,0,p)},le.prototype.imulK=function(c){return c.imul(this.k)};function je(){le.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(je,le),je.prototype.split=function(c,p){for(var E=4194303,T=Math.min(c.length,9),C=0;C<T;C++)p.words[C]=c.words[C];if(p.length=T,c.length<=9){c.words[0]=0,c.length=1;return}var F=c.words[9];for(p.words[p.length++]=F&E,C=10;C<c.length;C++){var j=c.words[C]|0;c.words[C-10]=(j&E)<<4|F>>>22,F=j}F>>>=22,c.words[C-10]=F,F===0&&c.length>10?c.length-=10:c.length-=9},je.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var p=0,E=0;E<c.length;E++){var T=c.words[E]|0;p+=T*977,c.words[E]=p&67108863,p=T*64+(p/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function rt(){le.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(rt,le);function _e(){le.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(_e,le);function we(){le.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(we,le),we.prototype.imulK=function(c){for(var p=0,E=0;E<c.length;E++){var T=(c.words[E]|0)*19+p,C=T&67108863;T>>>=26,c.words[E]=C,p=T}return p!==0&&(c.words[c.length++]=p),c},o._prime=function(c){if(re[c])return re[c];var p;if(c==="k256")p=new je;else if(c==="p224")p=new rt;else if(c==="p192")p=new _e;else if(c==="p25519")p=new we;else throw new Error("Unknown prime "+c);return re[c]=p,p};function Ee(M){if(typeof M=="string"){var c=o._prime(M);this.m=c.p,this.prime=c}else n(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}Ee.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},Ee.prototype._verify2=function(c,p){n((c.negative|p.negative)===0,"red works only with positives"),n(c.red&&c.red===p.red,"red works only with red numbers")},Ee.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(g(c,c.umod(this.m)._forceRed(this)),c)},Ee.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},Ee.prototype.add=function(c,p){this._verify2(c,p);var E=c.add(p);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},Ee.prototype.iadd=function(c,p){this._verify2(c,p);var E=c.iadd(p);return E.cmp(this.m)>=0&&E.isub(this.m),E},Ee.prototype.sub=function(c,p){this._verify2(c,p);var E=c.sub(p);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},Ee.prototype.isub=function(c,p){this._verify2(c,p);var E=c.isub(p);return E.cmpn(0)<0&&E.iadd(this.m),E},Ee.prototype.shl=function(c,p){return this._verify1(c),this.imod(c.ushln(p))},Ee.prototype.imul=function(c,p){return this._verify2(c,p),this.imod(c.imul(p))},Ee.prototype.mul=function(c,p){return this._verify2(c,p),this.imod(c.mul(p))},Ee.prototype.isqr=function(c){return this.imul(c,c.clone())},Ee.prototype.sqr=function(c){return this.mul(c,c)},Ee.prototype.sqrt=function(c){if(c.isZero())return c.clone();var p=this.m.andln(3);if(n(p%2===1),p===3){var E=this.m.add(new o(1)).iushrn(2);return this.pow(c,E)}for(var T=this.m.subn(1),C=0;!T.isZero()&&T.andln(1)===0;)C++,T.iushrn(1);n(!T.isZero());var F=new o(1).toRed(this),j=F.redNeg(),y=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);this.pow(l,y).cmp(j)!==0;)l.redIAdd(j);for(var b=this.pow(l,T),x=this.pow(c,T.addn(1).iushrn(1)),O=this.pow(c,T),z=C;O.cmp(F)!==0;){for(var ae=O,se=0;ae.cmp(F)!==0;se++)ae=ae.redSqr();n(se<z);var he=this.pow(b,new o(1).iushln(z-se-1));x=x.redMul(he),b=he.redSqr(),O=O.redMul(b),z=se}return x},Ee.prototype.invm=function(c){var p=c._invmp(this.m);return p.negative!==0?(p.negative=0,this.imod(p).redNeg()):this.imod(p)},Ee.prototype.pow=function(c,p){if(p.isZero())return new o(1).toRed(this);if(p.cmpn(1)===0)return c.clone();var E=4,T=new Array(1<<E);T[0]=new o(1).toRed(this),T[1]=c;for(var C=2;C<T.length;C++)T[C]=this.mul(T[C-1],c);var F=T[0],j=0,y=0,l=p.bitLength()%26;for(l===0&&(l=26),C=p.length-1;C>=0;C--){for(var b=p.words[C],x=l-1;x>=0;x--){var O=b>>x&1;if(F!==T[0]&&(F=this.sqr(F)),O===0&&j===0){y=0;continue}j<<=1,j|=O,y++,!(y!==E&&(C!==0||x!==0))&&(F=this.mul(F,T[j]),y=0,j=0)}l=26}return F},Ee.prototype.convertTo=function(c){var p=c.umod(this.m);return p===c?p.clone():p},Ee.prototype.convertFrom=function(c){var p=c.clone();return p.red=null,p},o.mont=function(c){return new ie(c)};function ie(M){Ee.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a(ie,Ee),ie.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},ie.prototype.convertFrom=function(c){var p=this.imod(c.mul(this.rinv));return p.red=null,p},ie.prototype.imul=function(c,p){if(c.isZero()||p.isZero())return c.words[0]=0,c.length=1,c;var E=c.imul(p),T=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=E.isub(T).iushrn(this.shift),F=C;return C.cmp(this.m)>=0?F=C.isub(this.m):C.cmpn(0)<0&&(F=C.iadd(this.m)),F._forceRed(this)},ie.prototype.mul=function(c,p){if(c.isZero()||p.isZero())return new o(0)._forceRed(this);var E=c.mul(p),T=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=E.isub(T).iushrn(this.shift),F=C;return C.cmp(this.m)>=0?F=C.isub(this.m):C.cmpn(0)<0&&(F=C.iadd(this.m)),F._forceRed(this)},ie.prototype.invm=function(c){var p=this.imod(c._invmp(this.m).mul(this.r2));return p._forceRed(this)}})(e,commonjsGlobal)})(bn);var bnExports=bn.exports,safeBuffer={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(e,t){var r=buffer,n=r.Buffer;function a(s,u){for(var _ in s)u[_]=s[_]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o);function o(s,u,_){return n(s,u,_)}o.prototype=Object.create(n.prototype),a(n,o),o.from=function(s,u,_){if(typeof s=="number")throw new TypeError("Argument must not be a number");return n(s,u,_)},o.alloc=function(s,u,_){if(typeof s!="number")throw new TypeError("Argument must be a number");var v=n(s);return u!==void 0?typeof _=="string"?v.fill(u,_):v.fill(u):v.fill(0),v},o.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n(s)},o.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(s)}})(safeBuffer,safeBuffer.exports);var safeBufferExports=safeBuffer.exports,_Buffer=safeBufferExports.Buffer;function base(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var a=e.charAt(n),o=a.charCodeAt(0);if(t[o]!==255)throw new TypeError(a+" is ambiguous");t[o]=n}var s=e.length,u=e.charAt(0),_=Math.log(s)/Math.log(256),v=Math.log(256)/Math.log(s);function g(k){if((Array.isArray(k)||k instanceof Uint8Array)&&(k=_Buffer.from(k)),!_Buffer.isBuffer(k))throw new TypeError("Expected Buffer");if(k.length===0)return"";for(var B=0,D=0,L=0,R=k.length;L!==R&&k[L]===0;)L++,B++;for(var G=(R-L)*v+1>>>0,J=new Uint8Array(G);L!==R;){for(var ee=k[L],re=0,le=G-1;(ee!==0||re<D)&&le!==-1;le--,re++)ee+=256*J[le]>>>0,J[le]=ee%s>>>0,ee=ee/s>>>0;if(ee!==0)throw new Error("Non-zero carry");D=re,L++}for(var je=G-D;je!==G&&J[je]===0;)je++;for(var rt=u.repeat(B);je<G;++je)rt+=e.charAt(J[je]);return rt}function S(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return _Buffer.alloc(0);for(var B=0,D=0,L=0;k[B]===u;)D++,B++;for(var R=(k.length-B)*_+1>>>0,G=new Uint8Array(R);B<k.length;){var J=t[k.charCodeAt(B)];if(J===255)return;for(var ee=0,re=R-1;(J!==0||ee<L)&&re!==-1;re--,ee++)J+=s*G[re]>>>0,G[re]=J%256>>>0,J=J/256>>>0;if(J!==0)throw new Error("Non-zero carry");L=ee,B++}for(var le=R-L;le!==R&&G[le]===0;)le++;var je=_Buffer.allocUnsafe(D+(R-le));je.fill(0,0,D);for(var rt=D;le!==R;)je[rt++]=G[le++];return je}function U(k){var B=S(k);if(B)return B;throw new Error("Non-base"+s+" character")}return{encode:g,decodeUnsafe:S,decode:U}}var src=base,basex=src,ALPHABET="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",bs58=basex(ALPHABET);function inRange(e,t,r){return t<=e&&e<=r}function ToDictionary(e){if(e===void 0)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function stringToCodePoints(e){for(var t=String(e),r=t.length,n=0,a=[];n<r;){var o=t.charCodeAt(n);if(o<55296||o>57343)a.push(o);else if(56320<=o&&o<=57343)a.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)a.push(65533);else{var s=e.charCodeAt(n+1);if(56320<=s&&s<=57343){var u=o&1023,_=s&1023;a.push(65536+(u<<10)+_),n+=1}else a.push(65533)}n+=1}return a}function codePointsToString(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var end_of_stream=-1;function Stream(e){this.tokens=[].slice.call(e)}Stream.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():end_of_stream},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var finished=-1;function decoderError(e,t){if(e)throw TypeError("Decoder error");return t||65533}var DEFAULT_ENCODING="utf-8";function TextDecoder$1(e,t){if(!(this instanceof TextDecoder$1))return new TextDecoder$1(e,t);if(e=e!==void 0?String(e).toLowerCase():DEFAULT_ENCODING,e!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");t=ToDictionary(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}TextDecoder$1.prototype={decode:function(t,r){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),r=ToDictionary(r),this._streaming||(this._decoder=new UTF8Decoder({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var a=new Stream(n),o=[],s;!a.endOfStream()&&(s=this._decoder.handler(a,a.read()),s!==finished);)s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s));if(!this._streaming){do{if(s=this._decoder.handler(a,a.read()),s===finished)break;s!==null&&(Array.isArray(s)?o.push.apply(o,s):o.push(s))}while(!a.endOfStream());this._decoder=null}return o.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(o[0]===65279?(this._BOMseen=!0,o.shift()):this._BOMseen=!0),codePointsToString(o)}};function TextEncoder(e,t){if(!(this instanceof TextEncoder))return new TextEncoder(e,t);if(e=e!==void 0?String(e).toLowerCase():DEFAULT_ENCODING,e!==DEFAULT_ENCODING)throw new Error("Encoding not supported. Only utf-8 is supported");t=ToDictionary(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}TextEncoder.prototype={encode:function(t,r){t=t?String(t):"",r=ToDictionary(r),this._streaming||(this._encoder=new UTF8Encoder(this._options)),this._streaming=!!r.stream;for(var n=[],a=new Stream(stringToCodePoints(t)),o;!a.endOfStream()&&(o=this._encoder.handler(a,a.read()),o!==finished);)Array.isArray(o)?n.push.apply(n,o):n.push(o);if(!this._streaming){for(;o=this._encoder.handler(a,a.read()),o!==finished;)Array.isArray(o)?n.push.apply(n,o):n.push(o);this._encoder=null}return new Uint8Array(n)}};function UTF8Decoder(e){var t=e.fatal,r=0,n=0,a=0,o=128,s=191;this.handler=function(u,_){if(_===end_of_stream&&a!==0)return a=0,decoderError(t);if(_===end_of_stream)return finished;if(a===0){if(inRange(_,0,127))return _;if(inRange(_,194,223))a=1,r=_-192;else if(inRange(_,224,239))_===224&&(o=160),_===237&&(s=159),a=2,r=_-224;else if(inRange(_,240,244))_===240&&(o=144),_===244&&(s=143),a=3,r=_-240;else return decoderError(t);return r=r<<6*a,null}if(!inRange(_,o,s))return r=a=n=0,o=128,s=191,u.prepend(_),decoderError(t);if(o=128,s=191,n+=1,r+=_-128<<6*(a-n),n!==a)return null;var v=r;return r=a=n=0,v}}function UTF8Encoder(e){e.fatal,this.handler=function(t,r){if(r===end_of_stream)return finished;if(inRange(r,0,127))return r;var n,a;inRange(r,128,2047)?(n=1,a=192):inRange(r,2048,65535)?(n=2,a=224):inRange(r,65536,1114111)&&(n=3,a=240);for(var o=[(r>>6*n)+a];n>0;){var s=r>>6*(n-1);o.push(128|s&63),n-=1}return o}}const encoding$1=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:TextDecoder$1,TextEncoder},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(encoding$1);var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__decorate=commonjsGlobal&&commonjsGlobal.__decorate||function(e,t,r,n){var a=arguments.length,o=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(s=e[u])&&(o=(a<3?s(o):a>3?s(t,r,o):s(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&__createBinding$1(t,e,r);return __setModuleDefault$1(t,e),t},__importDefault$e=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lib$c,"__esModule",{value:!0});lib$c.deserializeUnchecked=lib$c.deserialize=lib$c.serialize=lib$c.BinaryReader=lib$c.BinaryWriter=lib$c.BorshError=lib$c.baseDecode=lib$c.baseEncode=void 0;const bn_js_1$8=__importDefault$e(bnExports),bs58_1=__importDefault$e(bs58),encoding=__importStar$1(require$$2),ResolvedTextDecoder=typeof TextDecoder!="function"?encoding.TextDecoder:TextDecoder,textDecoder=new ResolvedTextDecoder("utf-8",{fatal:!0});function baseEncode(e){return typeof e=="string"&&(e=Buffer.from(e,"utf8")),bs58_1.default.encode(Buffer.from(e))}lib$c.baseEncode=baseEncode;function baseDecode(e){return Buffer.from(bs58_1.default.decode(e))}lib$c.baseDecode=baseDecode;const INITIAL_LENGTH=1024;class BorshError extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}lib$c.BorshError=BorshError;class BinaryWriter{constructor(){this.buf=Buffer.alloc(INITIAL_LENGTH),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(INITIAL_LENGTH)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$8.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$8.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$8.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new bn_js_1$8.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(INITIAL_LENGTH)]),this.length+=t.length}writeString(t){this.maybeResize();const r=Buffer.from(t,"utf8");this.writeU32(r.length),this.writeBuffer(r)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,r){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),r(n)}toArray(){return this.buf.subarray(0,this.length)}}lib$c.BinaryWriter=BinaryWriter;function handlingRangeError(e,t,r){const n=r.value;r.value=function(...a){try{return n.apply(this,a)}catch(o){if(o instanceof RangeError){const s=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new BorshError("Reached the end of buffer when deserializing")}throw o}}}class BinaryReader{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new bn_js_1$8.default(t,"le")}readU128(){const t=this.readBuffer(16);return new bn_js_1$8.default(t,"le")}readU256(){const t=this.readBuffer(32);return new bn_js_1$8.default(t,"le")}readU512(){const t=this.readBuffer(64);return new bn_js_1$8.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new BorshError(`Expected buffer length ${t} isn't within bounds`);const r=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,r}readString(){const t=this.readU32(),r=this.readBuffer(t);try{return textDecoder.decode(r)}catch(n){throw new BorshError(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const r=this.readU32(),n=Array();for(let a=0;a<r;++a)n.push(t());return n}}__decorate([handlingRangeError],BinaryReader.prototype,"readU8",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU16",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU32",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU64",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU128",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU256",null);__decorate([handlingRangeError],BinaryReader.prototype,"readU512",null);__decorate([handlingRangeError],BinaryReader.prototype,"readString",null);__decorate([handlingRangeError],BinaryReader.prototype,"readFixedArray",null);__decorate([handlingRangeError],BinaryReader.prototype,"readArray",null);lib$c.BinaryReader=BinaryReader;function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function serializeField(e,t,r,n,a){try{if(typeof n=="string")a[`write${capitalizeFirstLetter(n)}`](r);else if(n instanceof Array)if(typeof n[0]=="number"){if(r.length!==n[0])throw new BorshError(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);a.writeFixedArray(r)}else if(n.length===2&&typeof n[1]=="number"){if(r.length!==n[1])throw new BorshError(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let o=0;o<n[1];o++)serializeField(e,null,r[o],n[0],a)}else a.writeArray(r,o=>{serializeField(e,t,o,n[0],a)});else if(n.kind!==void 0)switch(n.kind){case"option":{r==null?a.writeU8(0):(a.writeU8(1),serializeField(e,t,r,n.type,a));break}case"map":{a.writeU32(r.size),r.forEach((o,s)=>{serializeField(e,t,s,n.key,a),serializeField(e,t,o,n.value,a)});break}default:throw new BorshError(`FieldType ${n} unrecognized`)}else serializeStruct(e,r,a)}catch(o){throw o instanceof BorshError&&o.addToFieldPath(t),o}}function serializeStruct(e,t,r){if(typeof t.borshSerialize=="function"){t.borshSerialize(r);return}const n=e.get(t.constructor);if(!n)throw new BorshError(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([a,o])=>{serializeField(e,a,t[a],o,r)});else if(n.kind==="enum"){const a=t[n.field];for(let o=0;o<n.values.length;++o){const[s,u]=n.values[o];if(s===a){r.writeU8(o),serializeField(e,s,t[s],u,r);break}}}else throw new BorshError(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function serialize$2(e,t,r=BinaryWriter){const n=new r;return serializeStruct(e,t,n),n.toArray()}lib$c.serialize=serialize$2;function deserializeField(e,t,r,n){try{if(typeof r=="string")return n[`read${capitalizeFirstLetter(r)}`]();if(r instanceof Array){if(typeof r[0]=="number")return n.readFixedArray(r[0]);if(typeof r[1]=="number"){const a=[];for(let o=0;o<r[1];o++)a.push(deserializeField(e,null,r[0],n));return a}else return n.readArray(()=>deserializeField(e,t,r[0],n))}if(r.kind==="option")return n.readU8()?deserializeField(e,t,r.type,n):void 0;if(r.kind==="map"){let a=new Map;const o=n.readU32();for(let s=0;s<o;s++){const u=deserializeField(e,t,r.key,n),_=deserializeField(e,t,r.value,n);a.set(u,_)}return a}return deserializeStruct(e,r,n)}catch(a){throw a instanceof BorshError&&a.addToFieldPath(t),a}}function deserializeStruct(e,t,r){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new BorshError(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const a={};for(const[o,s]of e.get(t).fields)a[o]=deserializeField(e,o,s,r);return new t(a)}if(n.kind==="enum"){const a=r.readU8();if(a>=n.values.length)throw new BorshError(`Enum index: ${a} is out of range`);const[o,s]=n.values[a],u=deserializeField(e,o,s,r);return new t({[o]:u})}throw new BorshError(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function deserialize(e,t,r,n=BinaryReader){const a=new n(r),o=deserializeStruct(e,t,a);if(a.offset<r.length)throw new BorshError(`Unexpected ${r.length-a.offset} bytes after deserialized data`);return o}lib$c.deserialize=deserialize;function deserializeUnchecked(e,t,r,n=BinaryReader){const a=new n(r);return deserializeStruct(e,t,a)}lib$c.deserializeUnchecked=deserializeUnchecked;function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var naclFast={exports:{}};(function(e){(function(t){var r=function(m){var w,A=new Float64Array(16);if(m)for(w=0;w<m.length;w++)A[w]=m[w];return A},n=function(){throw new Error("no PRNG")},a=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var s=r(),u=r([1]),_=r([56129,1]),v=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),g=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),S=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),U=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),k=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function B(m,w,A,f){m[w]=A>>24&255,m[w+1]=A>>16&255,m[w+2]=A>>8&255,m[w+3]=A&255,m[w+4]=f>>24&255,m[w+5]=f>>16&255,m[w+6]=f>>8&255,m[w+7]=f&255}function D(m,w,A,f,I){var V,H=0;for(V=0;V<I;V++)H|=m[w+V]^A[f+V];return(1&H-1>>>8)-1}function L(m,w,A,f){return D(m,w,A,f,16)}function R(m,w,A,f){return D(m,w,A,f,32)}function G(m,w,A,f){for(var I=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,V=A[0]&255|(A[1]&255)<<8|(A[2]&255)<<16|(A[3]&255)<<24,H=A[4]&255|(A[5]&255)<<8|(A[6]&255)<<16|(A[7]&255)<<24,Q=A[8]&255|(A[9]&255)<<8|(A[10]&255)<<16|(A[11]&255)<<24,ue=A[12]&255|(A[13]&255)<<8|(A[14]&255)<<16|(A[15]&255)<<24,de=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,fe=w[0]&255|(w[1]&255)<<8|(w[2]&255)<<16|(w[3]&255)<<24,ze=w[4]&255|(w[5]&255)<<8|(w[6]&255)<<16|(w[7]&255)<<24,ye=w[8]&255|(w[9]&255)<<8|(w[10]&255)<<16|(w[11]&255)<<24,Me=w[12]&255|(w[13]&255)<<8|(w[14]&255)<<16|(w[15]&255)<<24,Oe=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,De=A[16]&255|(A[17]&255)<<8|(A[18]&255)<<16|(A[19]&255)<<24,Ne=A[20]&255|(A[21]&255)<<8|(A[22]&255)<<16|(A[23]&255)<<24,Ce=A[24]&255|(A[25]&255)<<8|(A[26]&255)<<16|(A[27]&255)<<24,ke=A[28]&255|(A[29]&255)<<8|(A[30]&255)<<16|(A[31]&255)<<24,Re=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,ge=I,$e=V,me=H,ve=Q,be=ue,pe=de,X=fe,Y=ze,oe=ye,te=Me,ne=Oe,ce=De,xe=Ne,Ue=Ce,Ke=ke,Be=Re,N,Ge=0;Ge<20;Ge+=2)N=ge+xe|0,be^=N<<7|N>>>25,N=be+ge|0,oe^=N<<9|N>>>23,N=oe+be|0,xe^=N<<13|N>>>19,N=xe+oe|0,ge^=N<<18|N>>>14,N=pe+$e|0,te^=N<<7|N>>>25,N=te+pe|0,Ue^=N<<9|N>>>23,N=Ue+te|0,$e^=N<<13|N>>>19,N=$e+Ue|0,pe^=N<<18|N>>>14,N=ne+X|0,Ke^=N<<7|N>>>25,N=Ke+ne|0,me^=N<<9|N>>>23,N=me+Ke|0,X^=N<<13|N>>>19,N=X+me|0,ne^=N<<18|N>>>14,N=Be+ce|0,ve^=N<<7|N>>>25,N=ve+Be|0,Y^=N<<9|N>>>23,N=Y+ve|0,ce^=N<<13|N>>>19,N=ce+Y|0,Be^=N<<18|N>>>14,N=ge+ve|0,$e^=N<<7|N>>>25,N=$e+ge|0,me^=N<<9|N>>>23,N=me+$e|0,ve^=N<<13|N>>>19,N=ve+me|0,ge^=N<<18|N>>>14,N=pe+be|0,X^=N<<7|N>>>25,N=X+pe|0,Y^=N<<9|N>>>23,N=Y+X|0,be^=N<<13|N>>>19,N=be+Y|0,pe^=N<<18|N>>>14,N=ne+te|0,ce^=N<<7|N>>>25,N=ce+ne|0,oe^=N<<9|N>>>23,N=oe+ce|0,te^=N<<13|N>>>19,N=te+oe|0,ne^=N<<18|N>>>14,N=Be+Ke|0,xe^=N<<7|N>>>25,N=xe+Be|0,Ue^=N<<9|N>>>23,N=Ue+xe|0,Ke^=N<<13|N>>>19,N=Ke+Ue|0,Be^=N<<18|N>>>14;ge=ge+I|0,$e=$e+V|0,me=me+H|0,ve=ve+Q|0,be=be+ue|0,pe=pe+de|0,X=X+fe|0,Y=Y+ze|0,oe=oe+ye|0,te=te+Me|0,ne=ne+Oe|0,ce=ce+De|0,xe=xe+Ne|0,Ue=Ue+Ce|0,Ke=Ke+ke|0,Be=Be+Re|0,m[0]=ge>>>0&255,m[1]=ge>>>8&255,m[2]=ge>>>16&255,m[3]=ge>>>24&255,m[4]=$e>>>0&255,m[5]=$e>>>8&255,m[6]=$e>>>16&255,m[7]=$e>>>24&255,m[8]=me>>>0&255,m[9]=me>>>8&255,m[10]=me>>>16&255,m[11]=me>>>24&255,m[12]=ve>>>0&255,m[13]=ve>>>8&255,m[14]=ve>>>16&255,m[15]=ve>>>24&255,m[16]=be>>>0&255,m[17]=be>>>8&255,m[18]=be>>>16&255,m[19]=be>>>24&255,m[20]=pe>>>0&255,m[21]=pe>>>8&255,m[22]=pe>>>16&255,m[23]=pe>>>24&255,m[24]=X>>>0&255,m[25]=X>>>8&255,m[26]=X>>>16&255,m[27]=X>>>24&255,m[28]=Y>>>0&255,m[29]=Y>>>8&255,m[30]=Y>>>16&255,m[31]=Y>>>24&255,m[32]=oe>>>0&255,m[33]=oe>>>8&255,m[34]=oe>>>16&255,m[35]=oe>>>24&255,m[36]=te>>>0&255,m[37]=te>>>8&255,m[38]=te>>>16&255,m[39]=te>>>24&255,m[40]=ne>>>0&255,m[41]=ne>>>8&255,m[42]=ne>>>16&255,m[43]=ne>>>24&255,m[44]=ce>>>0&255,m[45]=ce>>>8&255,m[46]=ce>>>16&255,m[47]=ce>>>24&255,m[48]=xe>>>0&255,m[49]=xe>>>8&255,m[50]=xe>>>16&255,m[51]=xe>>>24&255,m[52]=Ue>>>0&255,m[53]=Ue>>>8&255,m[54]=Ue>>>16&255,m[55]=Ue>>>24&255,m[56]=Ke>>>0&255,m[57]=Ke>>>8&255,m[58]=Ke>>>16&255,m[59]=Ke>>>24&255,m[60]=Be>>>0&255,m[61]=Be>>>8&255,m[62]=Be>>>16&255,m[63]=Be>>>24&255}function J(m,w,A,f){for(var I=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,V=A[0]&255|(A[1]&255)<<8|(A[2]&255)<<16|(A[3]&255)<<24,H=A[4]&255|(A[5]&255)<<8|(A[6]&255)<<16|(A[7]&255)<<24,Q=A[8]&255|(A[9]&255)<<8|(A[10]&255)<<16|(A[11]&255)<<24,ue=A[12]&255|(A[13]&255)<<8|(A[14]&255)<<16|(A[15]&255)<<24,de=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,fe=w[0]&255|(w[1]&255)<<8|(w[2]&255)<<16|(w[3]&255)<<24,ze=w[4]&255|(w[5]&255)<<8|(w[6]&255)<<16|(w[7]&255)<<24,ye=w[8]&255|(w[9]&255)<<8|(w[10]&255)<<16|(w[11]&255)<<24,Me=w[12]&255|(w[13]&255)<<8|(w[14]&255)<<16|(w[15]&255)<<24,Oe=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,De=A[16]&255|(A[17]&255)<<8|(A[18]&255)<<16|(A[19]&255)<<24,Ne=A[20]&255|(A[21]&255)<<8|(A[22]&255)<<16|(A[23]&255)<<24,Ce=A[24]&255|(A[25]&255)<<8|(A[26]&255)<<16|(A[27]&255)<<24,ke=A[28]&255|(A[29]&255)<<8|(A[30]&255)<<16|(A[31]&255)<<24,Re=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,ge=I,$e=V,me=H,ve=Q,be=ue,pe=de,X=fe,Y=ze,oe=ye,te=Me,ne=Oe,ce=De,xe=Ne,Ue=Ce,Ke=ke,Be=Re,N,Ge=0;Ge<20;Ge+=2)N=ge+xe|0,be^=N<<7|N>>>25,N=be+ge|0,oe^=N<<9|N>>>23,N=oe+be|0,xe^=N<<13|N>>>19,N=xe+oe|0,ge^=N<<18|N>>>14,N=pe+$e|0,te^=N<<7|N>>>25,N=te+pe|0,Ue^=N<<9|N>>>23,N=Ue+te|0,$e^=N<<13|N>>>19,N=$e+Ue|0,pe^=N<<18|N>>>14,N=ne+X|0,Ke^=N<<7|N>>>25,N=Ke+ne|0,me^=N<<9|N>>>23,N=me+Ke|0,X^=N<<13|N>>>19,N=X+me|0,ne^=N<<18|N>>>14,N=Be+ce|0,ve^=N<<7|N>>>25,N=ve+Be|0,Y^=N<<9|N>>>23,N=Y+ve|0,ce^=N<<13|N>>>19,N=ce+Y|0,Be^=N<<18|N>>>14,N=ge+ve|0,$e^=N<<7|N>>>25,N=$e+ge|0,me^=N<<9|N>>>23,N=me+$e|0,ve^=N<<13|N>>>19,N=ve+me|0,ge^=N<<18|N>>>14,N=pe+be|0,X^=N<<7|N>>>25,N=X+pe|0,Y^=N<<9|N>>>23,N=Y+X|0,be^=N<<13|N>>>19,N=be+Y|0,pe^=N<<18|N>>>14,N=ne+te|0,ce^=N<<7|N>>>25,N=ce+ne|0,oe^=N<<9|N>>>23,N=oe+ce|0,te^=N<<13|N>>>19,N=te+oe|0,ne^=N<<18|N>>>14,N=Be+Ke|0,xe^=N<<7|N>>>25,N=xe+Be|0,Ue^=N<<9|N>>>23,N=Ue+xe|0,Ke^=N<<13|N>>>19,N=Ke+Ue|0,Be^=N<<18|N>>>14;m[0]=ge>>>0&255,m[1]=ge>>>8&255,m[2]=ge>>>16&255,m[3]=ge>>>24&255,m[4]=pe>>>0&255,m[5]=pe>>>8&255,m[6]=pe>>>16&255,m[7]=pe>>>24&255,m[8]=ne>>>0&255,m[9]=ne>>>8&255,m[10]=ne>>>16&255,m[11]=ne>>>24&255,m[12]=Be>>>0&255,m[13]=Be>>>8&255,m[14]=Be>>>16&255,m[15]=Be>>>24&255,m[16]=X>>>0&255,m[17]=X>>>8&255,m[18]=X>>>16&255,m[19]=X>>>24&255,m[20]=Y>>>0&255,m[21]=Y>>>8&255,m[22]=Y>>>16&255,m[23]=Y>>>24&255,m[24]=oe>>>0&255,m[25]=oe>>>8&255,m[26]=oe>>>16&255,m[27]=oe>>>24&255,m[28]=te>>>0&255,m[29]=te>>>8&255,m[30]=te>>>16&255,m[31]=te>>>24&255}function ee(m,w,A,f){G(m,w,A,f)}function re(m,w,A,f){J(m,w,A,f)}var le=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function je(m,w,A,f,I,V,H){var Q=new Uint8Array(16),ue=new Uint8Array(64),de,fe;for(fe=0;fe<16;fe++)Q[fe]=0;for(fe=0;fe<8;fe++)Q[fe]=V[fe];for(;I>=64;){for(ee(ue,Q,H,le),fe=0;fe<64;fe++)m[w+fe]=A[f+fe]^ue[fe];for(de=1,fe=8;fe<16;fe++)de=de+(Q[fe]&255)|0,Q[fe]=de&255,de>>>=8;I-=64,w+=64,f+=64}if(I>0)for(ee(ue,Q,H,le),fe=0;fe<I;fe++)m[w+fe]=A[f+fe]^ue[fe];return 0}function rt(m,w,A,f,I){var V=new Uint8Array(16),H=new Uint8Array(64),Q,ue;for(ue=0;ue<16;ue++)V[ue]=0;for(ue=0;ue<8;ue++)V[ue]=f[ue];for(;A>=64;){for(ee(H,V,I,le),ue=0;ue<64;ue++)m[w+ue]=H[ue];for(Q=1,ue=8;ue<16;ue++)Q=Q+(V[ue]&255)|0,V[ue]=Q&255,Q>>>=8;A-=64,w+=64}if(A>0)for(ee(H,V,I,le),ue=0;ue<A;ue++)m[w+ue]=H[ue];return 0}function _e(m,w,A,f,I){var V=new Uint8Array(32);re(V,f,I,le);for(var H=new Uint8Array(8),Q=0;Q<8;Q++)H[Q]=f[Q+16];return rt(m,w,A,H,V)}function we(m,w,A,f,I,V,H){var Q=new Uint8Array(32);re(Q,V,H,le);for(var ue=new Uint8Array(8),de=0;de<8;de++)ue[de]=V[de+16];return je(m,w,A,f,I,ue,Q)}var Ee=function(m){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var w,A,f,I,V,H,Q,ue;w=m[0]&255|(m[1]&255)<<8,this.r[0]=w&8191,A=m[2]&255|(m[3]&255)<<8,this.r[1]=(w>>>13|A<<3)&8191,f=m[4]&255|(m[5]&255)<<8,this.r[2]=(A>>>10|f<<6)&7939,I=m[6]&255|(m[7]&255)<<8,this.r[3]=(f>>>7|I<<9)&8191,V=m[8]&255|(m[9]&255)<<8,this.r[4]=(I>>>4|V<<12)&255,this.r[5]=V>>>1&8190,H=m[10]&255|(m[11]&255)<<8,this.r[6]=(V>>>14|H<<2)&8191,Q=m[12]&255|(m[13]&255)<<8,this.r[7]=(H>>>11|Q<<5)&8065,ue=m[14]&255|(m[15]&255)<<8,this.r[8]=(Q>>>8|ue<<8)&8191,this.r[9]=ue>>>5&127,this.pad[0]=m[16]&255|(m[17]&255)<<8,this.pad[1]=m[18]&255|(m[19]&255)<<8,this.pad[2]=m[20]&255|(m[21]&255)<<8,this.pad[3]=m[22]&255|(m[23]&255)<<8,this.pad[4]=m[24]&255|(m[25]&255)<<8,this.pad[5]=m[26]&255|(m[27]&255)<<8,this.pad[6]=m[28]&255|(m[29]&255)<<8,this.pad[7]=m[30]&255|(m[31]&255)<<8};Ee.prototype.blocks=function(m,w,A){for(var f=this.fin?0:2048,I,V,H,Q,ue,de,fe,ze,ye,Me,Oe,De,Ne,Ce,ke,Re,ge,$e,me,ve=this.h[0],be=this.h[1],pe=this.h[2],X=this.h[3],Y=this.h[4],oe=this.h[5],te=this.h[6],ne=this.h[7],ce=this.h[8],xe=this.h[9],Ue=this.r[0],Ke=this.r[1],Be=this.r[2],N=this.r[3],Ge=this.r[4],Ye=this.r[5],Ze=this.r[6],qe=this.r[7],We=this.r[8],Je=this.r[9];A>=16;)I=m[w+0]&255|(m[w+1]&255)<<8,ve+=I&8191,V=m[w+2]&255|(m[w+3]&255)<<8,be+=(I>>>13|V<<3)&8191,H=m[w+4]&255|(m[w+5]&255)<<8,pe+=(V>>>10|H<<6)&8191,Q=m[w+6]&255|(m[w+7]&255)<<8,X+=(H>>>7|Q<<9)&8191,ue=m[w+8]&255|(m[w+9]&255)<<8,Y+=(Q>>>4|ue<<12)&8191,oe+=ue>>>1&8191,de=m[w+10]&255|(m[w+11]&255)<<8,te+=(ue>>>14|de<<2)&8191,fe=m[w+12]&255|(m[w+13]&255)<<8,ne+=(de>>>11|fe<<5)&8191,ze=m[w+14]&255|(m[w+15]&255)<<8,ce+=(fe>>>8|ze<<8)&8191,xe+=ze>>>5|f,ye=0,Me=ye,Me+=ve*Ue,Me+=be*(5*Je),Me+=pe*(5*We),Me+=X*(5*qe),Me+=Y*(5*Ze),ye=Me>>>13,Me&=8191,Me+=oe*(5*Ye),Me+=te*(5*Ge),Me+=ne*(5*N),Me+=ce*(5*Be),Me+=xe*(5*Ke),ye+=Me>>>13,Me&=8191,Oe=ye,Oe+=ve*Ke,Oe+=be*Ue,Oe+=pe*(5*Je),Oe+=X*(5*We),Oe+=Y*(5*qe),ye=Oe>>>13,Oe&=8191,Oe+=oe*(5*Ze),Oe+=te*(5*Ye),Oe+=ne*(5*Ge),Oe+=ce*(5*N),Oe+=xe*(5*Be),ye+=Oe>>>13,Oe&=8191,De=ye,De+=ve*Be,De+=be*Ke,De+=pe*Ue,De+=X*(5*Je),De+=Y*(5*We),ye=De>>>13,De&=8191,De+=oe*(5*qe),De+=te*(5*Ze),De+=ne*(5*Ye),De+=ce*(5*Ge),De+=xe*(5*N),ye+=De>>>13,De&=8191,Ne=ye,Ne+=ve*N,Ne+=be*Be,Ne+=pe*Ke,Ne+=X*Ue,Ne+=Y*(5*Je),ye=Ne>>>13,Ne&=8191,Ne+=oe*(5*We),Ne+=te*(5*qe),Ne+=ne*(5*Ze),Ne+=ce*(5*Ye),Ne+=xe*(5*Ge),ye+=Ne>>>13,Ne&=8191,Ce=ye,Ce+=ve*Ge,Ce+=be*N,Ce+=pe*Be,Ce+=X*Ke,Ce+=Y*Ue,ye=Ce>>>13,Ce&=8191,Ce+=oe*(5*Je),Ce+=te*(5*We),Ce+=ne*(5*qe),Ce+=ce*(5*Ze),Ce+=xe*(5*Ye),ye+=Ce>>>13,Ce&=8191,ke=ye,ke+=ve*Ye,ke+=be*Ge,ke+=pe*N,ke+=X*Be,ke+=Y*Ke,ye=ke>>>13,ke&=8191,ke+=oe*Ue,ke+=te*(5*Je),ke+=ne*(5*We),ke+=ce*(5*qe),ke+=xe*(5*Ze),ye+=ke>>>13,ke&=8191,Re=ye,Re+=ve*Ze,Re+=be*Ye,Re+=pe*Ge,Re+=X*N,Re+=Y*Be,ye=Re>>>13,Re&=8191,Re+=oe*Ke,Re+=te*Ue,Re+=ne*(5*Je),Re+=ce*(5*We),Re+=xe*(5*qe),ye+=Re>>>13,Re&=8191,ge=ye,ge+=ve*qe,ge+=be*Ze,ge+=pe*Ye,ge+=X*Ge,ge+=Y*N,ye=ge>>>13,ge&=8191,ge+=oe*Be,ge+=te*Ke,ge+=ne*Ue,ge+=ce*(5*Je),ge+=xe*(5*We),ye+=ge>>>13,ge&=8191,$e=ye,$e+=ve*We,$e+=be*qe,$e+=pe*Ze,$e+=X*Ye,$e+=Y*Ge,ye=$e>>>13,$e&=8191,$e+=oe*N,$e+=te*Be,$e+=ne*Ke,$e+=ce*Ue,$e+=xe*(5*Je),ye+=$e>>>13,$e&=8191,me=ye,me+=ve*Je,me+=be*We,me+=pe*qe,me+=X*Ze,me+=Y*Ye,ye=me>>>13,me&=8191,me+=oe*Ge,me+=te*N,me+=ne*Be,me+=ce*Ke,me+=xe*Ue,ye+=me>>>13,me&=8191,ye=(ye<<2)+ye|0,ye=ye+Me|0,Me=ye&8191,ye=ye>>>13,Oe+=ye,ve=Me,be=Oe,pe=De,X=Ne,Y=Ce,oe=ke,te=Re,ne=ge,ce=$e,xe=me,w+=16,A-=16;this.h[0]=ve,this.h[1]=be,this.h[2]=pe,this.h[3]=X,this.h[4]=Y,this.h[5]=oe,this.h[6]=te,this.h[7]=ne,this.h[8]=ce,this.h[9]=xe},Ee.prototype.finish=function(m,w){var A=new Uint16Array(10),f,I,V,H;if(this.leftover){for(H=this.leftover,this.buffer[H++]=1;H<16;H++)this.buffer[H]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(f=this.h[1]>>>13,this.h[1]&=8191,H=2;H<10;H++)this.h[H]+=f,f=this.h[H]>>>13,this.h[H]&=8191;for(this.h[0]+=f*5,f=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=f,f=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=f,A[0]=this.h[0]+5,f=A[0]>>>13,A[0]&=8191,H=1;H<10;H++)A[H]=this.h[H]+f,f=A[H]>>>13,A[H]&=8191;for(A[9]-=8192,I=(f^1)-1,H=0;H<10;H++)A[H]&=I;for(I=~I,H=0;H<10;H++)this.h[H]=this.h[H]&I|A[H];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,V=this.h[0]+this.pad[0],this.h[0]=V&65535,H=1;H<8;H++)V=(this.h[H]+this.pad[H]|0)+(V>>>16)|0,this.h[H]=V&65535;m[w+0]=this.h[0]>>>0&255,m[w+1]=this.h[0]>>>8&255,m[w+2]=this.h[1]>>>0&255,m[w+3]=this.h[1]>>>8&255,m[w+4]=this.h[2]>>>0&255,m[w+5]=this.h[2]>>>8&255,m[w+6]=this.h[3]>>>0&255,m[w+7]=this.h[3]>>>8&255,m[w+8]=this.h[4]>>>0&255,m[w+9]=this.h[4]>>>8&255,m[w+10]=this.h[5]>>>0&255,m[w+11]=this.h[5]>>>8&255,m[w+12]=this.h[6]>>>0&255,m[w+13]=this.h[6]>>>8&255,m[w+14]=this.h[7]>>>0&255,m[w+15]=this.h[7]>>>8&255},Ee.prototype.update=function(m,w,A){var f,I;if(this.leftover){for(I=16-this.leftover,I>A&&(I=A),f=0;f<I;f++)this.buffer[this.leftover+f]=m[w+f];if(A-=I,w+=I,this.leftover+=I,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(A>=16&&(I=A-A%16,this.blocks(m,w,I),w+=I,A-=I),A){for(f=0;f<A;f++)this.buffer[this.leftover+f]=m[w+f];this.leftover+=A}};function ie(m,w,A,f,I,V){var H=new Ee(V);return H.update(A,f,I),H.finish(m,w),0}function M(m,w,A,f,I,V){var H=new Uint8Array(16);return ie(H,0,A,f,I,V),L(m,w,H,0)}function c(m,w,A,f,I){var V;if(A<32)return-1;for(we(m,0,w,0,A,f,I),ie(m,16,m,32,A-32,m),V=0;V<16;V++)m[V]=0;return 0}function p(m,w,A,f,I){var V,H=new Uint8Array(32);if(A<32||(_e(H,0,32,f,I),M(w,16,w,32,A-32,H)!==0))return-1;for(we(m,0,w,0,A,f,I),V=0;V<32;V++)m[V]=0;return 0}function E(m,w){var A;for(A=0;A<16;A++)m[A]=w[A]|0}function T(m){var w,A,f=1;for(w=0;w<16;w++)A=m[w]+f+65535,f=Math.floor(A/65536),m[w]=A-f*65536;m[0]+=f-1+37*(f-1)}function C(m,w,A){for(var f,I=~(A-1),V=0;V<16;V++)f=I&(m[V]^w[V]),m[V]^=f,w[V]^=f}function F(m,w){var A,f,I,V=r(),H=r();for(A=0;A<16;A++)H[A]=w[A];for(T(H),T(H),T(H),f=0;f<2;f++){for(V[0]=H[0]-65517,A=1;A<15;A++)V[A]=H[A]-65535-(V[A-1]>>16&1),V[A-1]&=65535;V[15]=H[15]-32767-(V[14]>>16&1),I=V[15]>>16&1,V[14]&=65535,C(H,V,1-I)}for(A=0;A<16;A++)m[2*A]=H[A]&255,m[2*A+1]=H[A]>>8}function j(m,w){var A=new Uint8Array(32),f=new Uint8Array(32);return F(A,m),F(f,w),R(A,0,f,0)}function y(m){var w=new Uint8Array(32);return F(w,m),w[0]&1}function l(m,w){var A;for(A=0;A<16;A++)m[A]=w[2*A]+(w[2*A+1]<<8);m[15]&=32767}function b(m,w,A){for(var f=0;f<16;f++)m[f]=w[f]+A[f]}function x(m,w,A){for(var f=0;f<16;f++)m[f]=w[f]-A[f]}function O(m,w,A){var f,I,V=0,H=0,Q=0,ue=0,de=0,fe=0,ze=0,ye=0,Me=0,Oe=0,De=0,Ne=0,Ce=0,ke=0,Re=0,ge=0,$e=0,me=0,ve=0,be=0,pe=0,X=0,Y=0,oe=0,te=0,ne=0,ce=0,xe=0,Ue=0,Ke=0,Be=0,N=A[0],Ge=A[1],Ye=A[2],Ze=A[3],qe=A[4],We=A[5],Je=A[6],wt=A[7],ut=A[8],gt=A[9],vt=A[10],bt=A[11],At=A[12],It=A[13],Mt=A[14],Tt=A[15];f=w[0],V+=f*N,H+=f*Ge,Q+=f*Ye,ue+=f*Ze,de+=f*qe,fe+=f*We,ze+=f*Je,ye+=f*wt,Me+=f*ut,Oe+=f*gt,De+=f*vt,Ne+=f*bt,Ce+=f*At,ke+=f*It,Re+=f*Mt,ge+=f*Tt,f=w[1],H+=f*N,Q+=f*Ge,ue+=f*Ye,de+=f*Ze,fe+=f*qe,ze+=f*We,ye+=f*Je,Me+=f*wt,Oe+=f*ut,De+=f*gt,Ne+=f*vt,Ce+=f*bt,ke+=f*At,Re+=f*It,ge+=f*Mt,$e+=f*Tt,f=w[2],Q+=f*N,ue+=f*Ge,de+=f*Ye,fe+=f*Ze,ze+=f*qe,ye+=f*We,Me+=f*Je,Oe+=f*wt,De+=f*ut,Ne+=f*gt,Ce+=f*vt,ke+=f*bt,Re+=f*At,ge+=f*It,$e+=f*Mt,me+=f*Tt,f=w[3],ue+=f*N,de+=f*Ge,fe+=f*Ye,ze+=f*Ze,ye+=f*qe,Me+=f*We,Oe+=f*Je,De+=f*wt,Ne+=f*ut,Ce+=f*gt,ke+=f*vt,Re+=f*bt,ge+=f*At,$e+=f*It,me+=f*Mt,ve+=f*Tt,f=w[4],de+=f*N,fe+=f*Ge,ze+=f*Ye,ye+=f*Ze,Me+=f*qe,Oe+=f*We,De+=f*Je,Ne+=f*wt,Ce+=f*ut,ke+=f*gt,Re+=f*vt,ge+=f*bt,$e+=f*At,me+=f*It,ve+=f*Mt,be+=f*Tt,f=w[5],fe+=f*N,ze+=f*Ge,ye+=f*Ye,Me+=f*Ze,Oe+=f*qe,De+=f*We,Ne+=f*Je,Ce+=f*wt,ke+=f*ut,Re+=f*gt,ge+=f*vt,$e+=f*bt,me+=f*At,ve+=f*It,be+=f*Mt,pe+=f*Tt,f=w[6],ze+=f*N,ye+=f*Ge,Me+=f*Ye,Oe+=f*Ze,De+=f*qe,Ne+=f*We,Ce+=f*Je,ke+=f*wt,Re+=f*ut,ge+=f*gt,$e+=f*vt,me+=f*bt,ve+=f*At,be+=f*It,pe+=f*Mt,X+=f*Tt,f=w[7],ye+=f*N,Me+=f*Ge,Oe+=f*Ye,De+=f*Ze,Ne+=f*qe,Ce+=f*We,ke+=f*Je,Re+=f*wt,ge+=f*ut,$e+=f*gt,me+=f*vt,ve+=f*bt,be+=f*At,pe+=f*It,X+=f*Mt,Y+=f*Tt,f=w[8],Me+=f*N,Oe+=f*Ge,De+=f*Ye,Ne+=f*Ze,Ce+=f*qe,ke+=f*We,Re+=f*Je,ge+=f*wt,$e+=f*ut,me+=f*gt,ve+=f*vt,be+=f*bt,pe+=f*At,X+=f*It,Y+=f*Mt,oe+=f*Tt,f=w[9],Oe+=f*N,De+=f*Ge,Ne+=f*Ye,Ce+=f*Ze,ke+=f*qe,Re+=f*We,ge+=f*Je,$e+=f*wt,me+=f*ut,ve+=f*gt,be+=f*vt,pe+=f*bt,X+=f*At,Y+=f*It,oe+=f*Mt,te+=f*Tt,f=w[10],De+=f*N,Ne+=f*Ge,Ce+=f*Ye,ke+=f*Ze,Re+=f*qe,ge+=f*We,$e+=f*Je,me+=f*wt,ve+=f*ut,be+=f*gt,pe+=f*vt,X+=f*bt,Y+=f*At,oe+=f*It,te+=f*Mt,ne+=f*Tt,f=w[11],Ne+=f*N,Ce+=f*Ge,ke+=f*Ye,Re+=f*Ze,ge+=f*qe,$e+=f*We,me+=f*Je,ve+=f*wt,be+=f*ut,pe+=f*gt,X+=f*vt,Y+=f*bt,oe+=f*At,te+=f*It,ne+=f*Mt,ce+=f*Tt,f=w[12],Ce+=f*N,ke+=f*Ge,Re+=f*Ye,ge+=f*Ze,$e+=f*qe,me+=f*We,ve+=f*Je,be+=f*wt,pe+=f*ut,X+=f*gt,Y+=f*vt,oe+=f*bt,te+=f*At,ne+=f*It,ce+=f*Mt,xe+=f*Tt,f=w[13],ke+=f*N,Re+=f*Ge,ge+=f*Ye,$e+=f*Ze,me+=f*qe,ve+=f*We,be+=f*Je,pe+=f*wt,X+=f*ut,Y+=f*gt,oe+=f*vt,te+=f*bt,ne+=f*At,ce+=f*It,xe+=f*Mt,Ue+=f*Tt,f=w[14],Re+=f*N,ge+=f*Ge,$e+=f*Ye,me+=f*Ze,ve+=f*qe,be+=f*We,pe+=f*Je,X+=f*wt,Y+=f*ut,oe+=f*gt,te+=f*vt,ne+=f*bt,ce+=f*At,xe+=f*It,Ue+=f*Mt,Ke+=f*Tt,f=w[15],ge+=f*N,$e+=f*Ge,me+=f*Ye,ve+=f*Ze,be+=f*qe,pe+=f*We,X+=f*Je,Y+=f*wt,oe+=f*ut,te+=f*gt,ne+=f*vt,ce+=f*bt,xe+=f*At,Ue+=f*It,Ke+=f*Mt,Be+=f*Tt,V+=38*$e,H+=38*me,Q+=38*ve,ue+=38*be,de+=38*pe,fe+=38*X,ze+=38*Y,ye+=38*oe,Me+=38*te,Oe+=38*ne,De+=38*ce,Ne+=38*xe,Ce+=38*Ue,ke+=38*Ke,Re+=38*Be,I=1,f=V+I+65535,I=Math.floor(f/65536),V=f-I*65536,f=H+I+65535,I=Math.floor(f/65536),H=f-I*65536,f=Q+I+65535,I=Math.floor(f/65536),Q=f-I*65536,f=ue+I+65535,I=Math.floor(f/65536),ue=f-I*65536,f=de+I+65535,I=Math.floor(f/65536),de=f-I*65536,f=fe+I+65535,I=Math.floor(f/65536),fe=f-I*65536,f=ze+I+65535,I=Math.floor(f/65536),ze=f-I*65536,f=ye+I+65535,I=Math.floor(f/65536),ye=f-I*65536,f=Me+I+65535,I=Math.floor(f/65536),Me=f-I*65536,f=Oe+I+65535,I=Math.floor(f/65536),Oe=f-I*65536,f=De+I+65535,I=Math.floor(f/65536),De=f-I*65536,f=Ne+I+65535,I=Math.floor(f/65536),Ne=f-I*65536,f=Ce+I+65535,I=Math.floor(f/65536),Ce=f-I*65536,f=ke+I+65535,I=Math.floor(f/65536),ke=f-I*65536,f=Re+I+65535,I=Math.floor(f/65536),Re=f-I*65536,f=ge+I+65535,I=Math.floor(f/65536),ge=f-I*65536,V+=I-1+37*(I-1),I=1,f=V+I+65535,I=Math.floor(f/65536),V=f-I*65536,f=H+I+65535,I=Math.floor(f/65536),H=f-I*65536,f=Q+I+65535,I=Math.floor(f/65536),Q=f-I*65536,f=ue+I+65535,I=Math.floor(f/65536),ue=f-I*65536,f=de+I+65535,I=Math.floor(f/65536),de=f-I*65536,f=fe+I+65535,I=Math.floor(f/65536),fe=f-I*65536,f=ze+I+65535,I=Math.floor(f/65536),ze=f-I*65536,f=ye+I+65535,I=Math.floor(f/65536),ye=f-I*65536,f=Me+I+65535,I=Math.floor(f/65536),Me=f-I*65536,f=Oe+I+65535,I=Math.floor(f/65536),Oe=f-I*65536,f=De+I+65535,I=Math.floor(f/65536),De=f-I*65536,f=Ne+I+65535,I=Math.floor(f/65536),Ne=f-I*65536,f=Ce+I+65535,I=Math.floor(f/65536),Ce=f-I*65536,f=ke+I+65535,I=Math.floor(f/65536),ke=f-I*65536,f=Re+I+65535,I=Math.floor(f/65536),Re=f-I*65536,f=ge+I+65535,I=Math.floor(f/65536),ge=f-I*65536,V+=I-1+37*(I-1),m[0]=V,m[1]=H,m[2]=Q,m[3]=ue,m[4]=de,m[5]=fe,m[6]=ze,m[7]=ye,m[8]=Me,m[9]=Oe,m[10]=De,m[11]=Ne,m[12]=Ce,m[13]=ke,m[14]=Re,m[15]=ge}function z(m,w){O(m,w,w)}function ae(m,w){var A=r(),f;for(f=0;f<16;f++)A[f]=w[f];for(f=253;f>=0;f--)z(A,A),f!==2&&f!==4&&O(A,A,w);for(f=0;f<16;f++)m[f]=A[f]}function se(m,w){var A=r(),f;for(f=0;f<16;f++)A[f]=w[f];for(f=250;f>=0;f--)z(A,A),f!==1&&O(A,A,w);for(f=0;f<16;f++)m[f]=A[f]}function he(m,w,A){var f=new Uint8Array(32),I=new Float64Array(80),V,H,Q=r(),ue=r(),de=r(),fe=r(),ze=r(),ye=r();for(H=0;H<31;H++)f[H]=w[H];for(f[31]=w[31]&127|64,f[0]&=248,l(I,A),H=0;H<16;H++)ue[H]=I[H],fe[H]=Q[H]=de[H]=0;for(Q[0]=fe[0]=1,H=254;H>=0;--H)V=f[H>>>3]>>>(H&7)&1,C(Q,ue,V),C(de,fe,V),b(ze,Q,de),x(Q,Q,de),b(de,ue,fe),x(ue,ue,fe),z(fe,ze),z(ye,Q),O(Q,de,Q),O(de,ue,ze),b(ze,Q,de),x(Q,Q,de),z(ue,Q),x(de,fe,ye),O(Q,de,_),b(Q,Q,fe),O(de,de,Q),O(Q,fe,ye),O(fe,ue,I),z(ue,ze),C(Q,ue,V),C(de,fe,V);for(H=0;H<16;H++)I[H+16]=Q[H],I[H+32]=de[H],I[H+48]=ue[H],I[H+64]=fe[H];var Me=I.subarray(32),Oe=I.subarray(16);return ae(Me,Me),O(Oe,Oe,Me),F(m,Oe),0}function Se(m,w){return he(m,w,o)}function Te(m,w){return n(w,32),Se(m,w)}function Le(m,w,A){var f=new Uint8Array(32);return he(f,A,w),re(m,a,f,le)}var dt=c,He=p;function it(m,w,A,f,I,V){var H=new Uint8Array(32);return Le(H,I,V),dt(m,w,A,f,H)}function Et(m,w,A,f,I,V){var H=new Uint8Array(32);return Le(H,I,V),He(m,w,A,f,H)}var nt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function ct(m,w,A,f){for(var I=new Int32Array(16),V=new Int32Array(16),H,Q,ue,de,fe,ze,ye,Me,Oe,De,Ne,Ce,ke,Re,ge,$e,me,ve,be,pe,X,Y,oe,te,ne,ce,xe=m[0],Ue=m[1],Ke=m[2],Be=m[3],N=m[4],Ge=m[5],Ye=m[6],Ze=m[7],qe=w[0],We=w[1],Je=w[2],wt=w[3],ut=w[4],gt=w[5],vt=w[6],bt=w[7],At=0;f>=128;){for(be=0;be<16;be++)pe=8*be+At,I[be]=A[pe+0]<<24|A[pe+1]<<16|A[pe+2]<<8|A[pe+3],V[be]=A[pe+4]<<24|A[pe+5]<<16|A[pe+6]<<8|A[pe+7];for(be=0;be<80;be++)if(H=xe,Q=Ue,ue=Ke,de=Be,fe=N,ze=Ge,ye=Ye,Me=Ze,Oe=qe,De=We,Ne=Je,Ce=wt,ke=ut,Re=gt,ge=vt,$e=bt,X=Ze,Y=bt,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=(N>>>14|ut<<18)^(N>>>18|ut<<14)^(ut>>>9|N<<23),Y=(ut>>>14|N<<18)^(ut>>>18|N<<14)^(N>>>9|ut<<23),oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,X=N&Ge^~N&Ye,Y=ut&gt^~ut&vt,oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,X=nt[be*2],Y=nt[be*2+1],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,X=I[be%16],Y=V[be%16],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,me=ne&65535|ce<<16,ve=oe&65535|te<<16,X=me,Y=ve,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=(xe>>>28|qe<<4)^(qe>>>2|xe<<30)^(qe>>>7|xe<<25),Y=(qe>>>28|xe<<4)^(xe>>>2|qe<<30)^(xe>>>7|qe<<25),oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,X=xe&Ue^xe&Ke^Ue&Ke,Y=qe&We^qe&Je^We&Je,oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,Me=ne&65535|ce<<16,$e=oe&65535|te<<16,X=de,Y=Ce,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=me,Y=ve,oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,de=ne&65535|ce<<16,Ce=oe&65535|te<<16,Ue=H,Ke=Q,Be=ue,N=de,Ge=fe,Ye=ze,Ze=ye,xe=Me,We=Oe,Je=De,wt=Ne,ut=Ce,gt=ke,vt=Re,bt=ge,qe=$e,be%16===15)for(pe=0;pe<16;pe++)X=I[pe],Y=V[pe],oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=I[(pe+9)%16],Y=V[(pe+9)%16],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,me=I[(pe+1)%16],ve=V[(pe+1)%16],X=(me>>>1|ve<<31)^(me>>>8|ve<<24)^me>>>7,Y=(ve>>>1|me<<31)^(ve>>>8|me<<24)^(ve>>>7|me<<25),oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,me=I[(pe+14)%16],ve=V[(pe+14)%16],X=(me>>>19|ve<<13)^(ve>>>29|me<<3)^me>>>6,Y=(ve>>>19|me<<13)^(me>>>29|ve<<3)^(ve>>>6|me<<26),oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,I[pe]=ne&65535|ce<<16,V[pe]=oe&65535|te<<16;X=xe,Y=qe,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=m[0],Y=w[0],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,m[0]=xe=ne&65535|ce<<16,w[0]=qe=oe&65535|te<<16,X=Ue,Y=We,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=m[1],Y=w[1],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,m[1]=Ue=ne&65535|ce<<16,w[1]=We=oe&65535|te<<16,X=Ke,Y=Je,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=m[2],Y=w[2],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,m[2]=Ke=ne&65535|ce<<16,w[2]=Je=oe&65535|te<<16,X=Be,Y=wt,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=m[3],Y=w[3],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,m[3]=Be=ne&65535|ce<<16,w[3]=wt=oe&65535|te<<16,X=N,Y=ut,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=m[4],Y=w[4],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,m[4]=N=ne&65535|ce<<16,w[4]=ut=oe&65535|te<<16,X=Ge,Y=gt,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=m[5],Y=w[5],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,m[5]=Ge=ne&65535|ce<<16,w[5]=gt=oe&65535|te<<16,X=Ye,Y=vt,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=m[6],Y=w[6],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,m[6]=Ye=ne&65535|ce<<16,w[6]=vt=oe&65535|te<<16,X=Ze,Y=bt,oe=Y&65535,te=Y>>>16,ne=X&65535,ce=X>>>16,X=m[7],Y=w[7],oe+=Y&65535,te+=Y>>>16,ne+=X&65535,ce+=X>>>16,te+=oe>>>16,ne+=te>>>16,ce+=ne>>>16,m[7]=Ze=ne&65535|ce<<16,w[7]=bt=oe&65535|te<<16,At+=128,f-=128}return f}function xt(m,w,A){var f=new Int32Array(8),I=new Int32Array(8),V=new Uint8Array(256),H,Q=A;for(f[0]=1779033703,f[1]=3144134277,f[2]=1013904242,f[3]=2773480762,f[4]=1359893119,f[5]=2600822924,f[6]=528734635,f[7]=1541459225,I[0]=4089235720,I[1]=2227873595,I[2]=4271175723,I[3]=1595750129,I[4]=2917565137,I[5]=725511199,I[6]=4215389547,I[7]=327033209,ct(f,I,w,A),A%=128,H=0;H<A;H++)V[H]=w[Q-A+H];for(V[A]=128,A=256-128*(A<112?1:0),V[A-9]=0,B(V,A-8,Q/536870912|0,Q<<3),ct(f,I,V,A),H=0;H<8;H++)B(m,8*H,f[H],I[H]);return 0}function Qe(m,w){var A=r(),f=r(),I=r(),V=r(),H=r(),Q=r(),ue=r(),de=r(),fe=r();x(A,m[1],m[0]),x(fe,w[1],w[0]),O(A,A,fe),b(f,m[0],m[1]),b(fe,w[0],w[1]),O(f,f,fe),O(I,m[3],w[3]),O(I,I,g),O(V,m[2],w[2]),b(V,V,V),x(H,f,A),x(Q,V,I),b(ue,V,I),b(de,f,A),O(m[0],H,Q),O(m[1],de,ue),O(m[2],ue,Q),O(m[3],H,de)}function et(m,w,A){var f;for(f=0;f<4;f++)C(m[f],w[f],A)}function $t(m,w){var A=r(),f=r(),I=r();ae(I,w[2]),O(A,w[0],I),O(f,w[1],I),F(m,f),m[31]^=y(A)<<7}function tt(m,w,A){var f,I;for(E(m[0],s),E(m[1],u),E(m[2],u),E(m[3],s),I=255;I>=0;--I)f=A[I/8|0]>>(I&7)&1,et(m,w,f),Qe(w,m),Qe(m,m),et(m,w,f)}function ot(m,w){var A=[r(),r(),r(),r()];E(A[0],S),E(A[1],U),E(A[2],u),O(A[3],S,U),tt(m,A,w)}function St(m,w,A){var f=new Uint8Array(64),I=[r(),r(),r(),r()],V;for(A||n(w,32),xt(f,w,32),f[0]&=248,f[31]&=127,f[31]|=64,ot(I,f),$t(m,I),V=0;V<32;V++)w[V+32]=m[V];return 0}var Xe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function $(m,w){var A,f,I,V;for(f=63;f>=32;--f){for(A=0,I=f-32,V=f-12;I<V;++I)w[I]+=A-16*w[f]*Xe[I-(f-32)],A=Math.floor((w[I]+128)/256),w[I]-=A*256;w[I]+=A,w[f]=0}for(A=0,I=0;I<32;I++)w[I]+=A-(w[31]>>4)*Xe[I],A=w[I]>>8,w[I]&=255;for(I=0;I<32;I++)w[I]-=A*Xe[I];for(f=0;f<32;f++)w[f+1]+=w[f]>>8,m[f]=w[f]&255}function d(m){var w=new Float64Array(64),A;for(A=0;A<64;A++)w[A]=m[A];for(A=0;A<64;A++)m[A]=0;$(m,w)}function h(m,w,A,f){var I=new Uint8Array(64),V=new Uint8Array(64),H=new Uint8Array(64),Q,ue,de=new Float64Array(64),fe=[r(),r(),r(),r()];xt(I,f,32),I[0]&=248,I[31]&=127,I[31]|=64;var ze=A+64;for(Q=0;Q<A;Q++)m[64+Q]=w[Q];for(Q=0;Q<32;Q++)m[32+Q]=I[32+Q];for(xt(H,m.subarray(32),A+32),d(H),ot(fe,H),$t(m,fe),Q=32;Q<64;Q++)m[Q]=f[Q];for(xt(V,m,A+64),d(V),Q=0;Q<64;Q++)de[Q]=0;for(Q=0;Q<32;Q++)de[Q]=H[Q];for(Q=0;Q<32;Q++)for(ue=0;ue<32;ue++)de[Q+ue]+=V[Q]*I[ue];return $(m.subarray(32),de),ze}function P(m,w){var A=r(),f=r(),I=r(),V=r(),H=r(),Q=r(),ue=r();return E(m[2],u),l(m[1],w),z(I,m[1]),O(V,I,v),x(I,I,m[2]),b(V,m[2],V),z(H,V),z(Q,H),O(ue,Q,H),O(A,ue,I),O(A,A,V),se(A,A),O(A,A,I),O(A,A,V),O(A,A,V),O(m[0],A,V),z(f,m[0]),O(f,f,V),j(f,I)&&O(m[0],m[0],k),z(f,m[0]),O(f,f,V),j(f,I)?-1:(y(m[0])===w[31]>>7&&x(m[0],s,m[0]),O(m[3],m[0],m[1]),0)}function q(m,w,A,f){var I,V=new Uint8Array(32),H=new Uint8Array(64),Q=[r(),r(),r(),r()],ue=[r(),r(),r(),r()];if(A<64||P(ue,f))return-1;for(I=0;I<A;I++)m[I]=w[I];for(I=0;I<32;I++)m[I+32]=f[I];if(xt(H,m,A),d(H),tt(Q,ue,H),ot(ue,w.subarray(32)),Qe(Q,ue),$t(V,Q),A-=64,R(w,0,V,0)){for(I=0;I<A;I++)m[I]=0;return-1}for(I=0;I<A;I++)m[I]=w[I+64];return A}var W=32,Z=24,Fe=32,Pe=16,Ie=32,at=32,Ae=32,lt=32,Ot=32,mt=Z,_t=Fe,jt=Pe,st=64,ft=32,Pt=64,ht=32,pt=64;t.lowlevel={crypto_core_hsalsa20:re,crypto_stream_xor:we,crypto_stream:_e,crypto_stream_salsa20_xor:je,crypto_stream_salsa20:rt,crypto_onetimeauth:ie,crypto_onetimeauth_verify:M,crypto_verify_16:L,crypto_verify_32:R,crypto_secretbox:c,crypto_secretbox_open:p,crypto_scalarmult:he,crypto_scalarmult_base:Se,crypto_box_beforenm:Le,crypto_box_afternm:dt,crypto_box:it,crypto_box_open:Et,crypto_box_keypair:Te,crypto_hash:xt,crypto_sign:h,crypto_sign_keypair:St,crypto_sign_open:q,crypto_secretbox_KEYBYTES:W,crypto_secretbox_NONCEBYTES:Z,crypto_secretbox_ZEROBYTES:Fe,crypto_secretbox_BOXZEROBYTES:Pe,crypto_scalarmult_BYTES:Ie,crypto_scalarmult_SCALARBYTES:at,crypto_box_PUBLICKEYBYTES:Ae,crypto_box_SECRETKEYBYTES:lt,crypto_box_BEFORENMBYTES:Ot,crypto_box_NONCEBYTES:mt,crypto_box_ZEROBYTES:_t,crypto_box_BOXZEROBYTES:jt,crypto_sign_BYTES:st,crypto_sign_PUBLICKEYBYTES:ft,crypto_sign_SECRETKEYBYTES:Pt,crypto_sign_SEEDBYTES:ht,crypto_hash_BYTES:pt,gf:r,D:v,L:Xe,pack25519:F,unpack25519:l,M:O,A:b,S:z,Z:x,pow2523:se,add:Qe,set25519:E,modL:$,scalarmult:tt,scalarbase:ot};function Ct(m,w){if(m.length!==W)throw new Error("bad key size");if(w.length!==Z)throw new Error("bad nonce size")}function yt(m,w){if(m.length!==Ae)throw new Error("bad public key size");if(w.length!==lt)throw new Error("bad secret key size")}function Ve(){for(var m=0;m<arguments.length;m++)if(!(arguments[m]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Rt(m){for(var w=0;w<m.length;w++)m[w]=0}t.randomBytes=function(m){var w=new Uint8Array(m);return n(w,m),w},t.secretbox=function(m,w,A){Ve(m,w,A),Ct(A,w);for(var f=new Uint8Array(Fe+m.length),I=new Uint8Array(f.length),V=0;V<m.length;V++)f[V+Fe]=m[V];return c(I,f,f.length,w,A),I.subarray(Pe)},t.secretbox.open=function(m,w,A){Ve(m,w,A),Ct(A,w);for(var f=new Uint8Array(Pe+m.length),I=new Uint8Array(f.length),V=0;V<m.length;V++)f[V+Pe]=m[V];return f.length<32||p(I,f,f.length,w,A)!==0?null:I.subarray(Fe)},t.secretbox.keyLength=W,t.secretbox.nonceLength=Z,t.secretbox.overheadLength=Pe,t.scalarMult=function(m,w){if(Ve(m,w),m.length!==at)throw new Error("bad n size");if(w.length!==Ie)throw new Error("bad p size");var A=new Uint8Array(Ie);return he(A,m,w),A},t.scalarMult.base=function(m){if(Ve(m),m.length!==at)throw new Error("bad n size");var w=new Uint8Array(Ie);return Se(w,m),w},t.scalarMult.scalarLength=at,t.scalarMult.groupElementLength=Ie,t.box=function(m,w,A,f){var I=t.box.before(A,f);return t.secretbox(m,w,I)},t.box.before=function(m,w){Ve(m,w),yt(m,w);var A=new Uint8Array(Ot);return Le(A,m,w),A},t.box.after=t.secretbox,t.box.open=function(m,w,A,f){var I=t.box.before(A,f);return t.secretbox.open(m,w,I)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var m=new Uint8Array(Ae),w=new Uint8Array(lt);return Te(m,w),{publicKey:m,secretKey:w}},t.box.keyPair.fromSecretKey=function(m){if(Ve(m),m.length!==lt)throw new Error("bad secret key size");var w=new Uint8Array(Ae);return Se(w,m),{publicKey:w,secretKey:new Uint8Array(m)}},t.box.publicKeyLength=Ae,t.box.secretKeyLength=lt,t.box.sharedKeyLength=Ot,t.box.nonceLength=mt,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(m,w){if(Ve(m,w),w.length!==Pt)throw new Error("bad secret key size");var A=new Uint8Array(st+m.length);return h(A,m,m.length,w),A},t.sign.open=function(m,w){if(Ve(m,w),w.length!==ft)throw new Error("bad public key size");var A=new Uint8Array(m.length),f=q(A,m,m.length,w);if(f<0)return null;for(var I=new Uint8Array(f),V=0;V<I.length;V++)I[V]=A[V];return I},t.sign.detached=function(m,w){for(var A=t.sign(m,w),f=new Uint8Array(st),I=0;I<f.length;I++)f[I]=A[I];return f},t.sign.detached.verify=function(m,w,A){if(Ve(m,w,A),w.length!==st)throw new Error("bad signature size");if(A.length!==ft)throw new Error("bad public key size");var f=new Uint8Array(st+m.length),I=new Uint8Array(st+m.length),V;for(V=0;V<st;V++)f[V]=w[V];for(V=0;V<m.length;V++)f[V+st]=m[V];return q(I,f,f.length,A)>=0},t.sign.keyPair=function(){var m=new Uint8Array(ft),w=new Uint8Array(Pt);return St(m,w),{publicKey:m,secretKey:w}},t.sign.keyPair.fromSecretKey=function(m){if(Ve(m),m.length!==Pt)throw new Error("bad secret key size");for(var w=new Uint8Array(ft),A=0;A<w.length;A++)w[A]=m[32+A];return{publicKey:w,secretKey:new Uint8Array(m)}},t.sign.keyPair.fromSeed=function(m){if(Ve(m),m.length!==ht)throw new Error("bad seed size");for(var w=new Uint8Array(ft),A=new Uint8Array(Pt),f=0;f<32;f++)A[f]=m[f];return St(w,A,!0),{publicKey:w,secretKey:A}},t.sign.publicKeyLength=ft,t.sign.secretKeyLength=Pt,t.sign.seedLength=ht,t.sign.signatureLength=st,t.hash=function(m){Ve(m);var w=new Uint8Array(pt);return xt(w,m,m.length),w},t.hash.hashLength=pt,t.verify=function(m,w){return Ve(m,w),m.length===0||w.length===0||m.length!==w.length?!1:D(m,0,w,0,m.length)===0},t.setPRNG=function(m){n=m},function(){var m=typeof self<"u"?self.crypto||self.msCrypto:null;if(m&&m.getRandomValues){var w=65536;t.setPRNG(function(A,f){var I,V=new Uint8Array(f);for(I=0;I<f;I+=w)m.getRandomValues(V.subarray(I,I+Math.min(f-I,w)));for(I=0;I<f;I++)A[I]=V[I];Rt(V)})}else typeof commonjsRequire<"u"&&(m=require$$2$1,m&&m.randomBytes&&t.setPRNG(function(A,f){var I,V=m.randomBytes(f);for(I=0;I<f;I++)A[I]=V[I];Rt(V)}))}()})(e.exports?e.exports:self.nacl=self.nacl||{})})(naclFast);var naclFastExports=naclFast.exports,public_key={},lib$b={},assignable={};Object.defineProperty(assignable,"__esModule",{value:!0});assignable.Assignable=void 0;class Assignable{constructor(t){Object.keys(t).map(r=>{this[r]=t[r]})}}assignable.Assignable=Assignable;var errors$5={};Object.defineProperty(errors$5,"__esModule",{value:!0});errors$5.ErrorContext=errors$5.TypedError=errors$5.ArgumentTypeError=errors$5.PositionalArgsError=void 0;class PositionalArgsError extends Error{constructor(){super("Contract method calls expect named arguments wrapped in object, e.g. { argName1: argValue1, argName2: argValue2 }")}}errors$5.PositionalArgsError=PositionalArgsError;class ArgumentTypeError extends Error{constructor(t,r,n){super(`Expected ${r} for '${t}' argument, but got '${JSON.stringify(n)}'`)}}errors$5.ArgumentTypeError=ArgumentTypeError;class TypedError extends Error{constructor(t,r,n){super(t),this.type=r||"UntypedError",this.context=n}}errors$5.TypedError=TypedError;class ErrorContext{constructor(t){this.transactionHash=t}}errors$5.ErrorContext=ErrorContext;var provider$3={},light_client={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.IdType=void 0,function(t){t.Transaction="transaction",t.Receipt="receipt"}(e.IdType||(e.IdType={}))})(light_client);var response={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=void 0,function(t){t.Unknown="Unknown",t.Pending="Pending",t.Failure="Failure"}(e.ExecutionStatusBasic||(e.ExecutionStatusBasic={})),function(t){t.NotStarted="NotStarted",t.Started="Started",t.Failure="Failure"}(e.FinalExecutionStatusBasic||(e.FinalExecutionStatusBasic={}))})(response);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=e.IdType=void 0;var t=light_client;Object.defineProperty(e,"IdType",{enumerable:!0,get:function(){return t.IdType}});var r=response;Object.defineProperty(e,"ExecutionStatusBasic",{enumerable:!0,get:function(){return r.ExecutionStatusBasic}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return r.FinalExecutionStatusBasic}})})(provider$3);(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,u)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(n,a){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&t(a,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(assignable,e),r(errors$5,e),r(provider$3,e)})(lib$b);var __importDefault$d=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(public_key,"__esModule",{value:!0});public_key.PublicKey=void 0;const types_1$c=lib$b,borsh_1$4=lib$c,tweetnacl_1$1=__importDefault$d(naclFastExports),constants_1$3=constants$2;function key_type_to_str(e){switch(e){case constants_1$3.KeyType.ED25519:return"ed25519";default:throw new Error(`Unknown key type ${e}`)}}function str_to_key_type(e){switch(e.toLowerCase()){case"ed25519":return constants_1$3.KeyType.ED25519;default:throw new Error(`Unknown key type ${e}`)}}class PublicKey extends types_1$c.Assignable{static from(t){return typeof t=="string"?PublicKey.fromString(t):t}static fromString(t){const r=t.split(":");let n,a=constants_1$3.KeyType.ED25519;if(r.length===1)n=r[0];else if(r.length===2)n=r[1],a=str_to_key_type(r[0]);else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>");const o=(0,borsh_1$4.baseDecode)(n);if(o.length!==tweetnacl_1$1.default.box.publicKeyLength)throw new Error(`Invalid public key size (${o.length}), must be ${tweetnacl_1$1.default.box.publicKeyLength}`);return new PublicKey({keyType:a,data:o})}toString(){return`${key_type_to_str(this.keyType)}:${(0,borsh_1$4.baseEncode)(this.data)}`}verify(t,r){switch(this.keyType){case constants_1$3.KeyType.ED25519:return tweetnacl_1$1.default.sign.detached.verify(t,r,this.data);default:throw new Error(`Unknown key type ${this.keyType}`)}}}public_key.PublicKey=PublicKey;var __importDefault$c=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(key_pair_ed25519,"__esModule",{value:!0});key_pair_ed25519.KeyPairEd25519=void 0;const borsh_1$3=lib$c,tweetnacl_1=__importDefault$c(naclFastExports),constants_1$2=constants$2,key_pair_base_1$1=key_pair_base,public_key_1=public_key;class KeyPairEd25519 extends key_pair_base_1$1.KeyPairBase{constructor(t){super();const r=tweetnacl_1.default.sign.keyPair.fromSecretKey((0,borsh_1$3.baseDecode)(t));this.publicKey=new public_key_1.PublicKey({keyType:constants_1$2.KeyType.ED25519,data:r.publicKey}),this.secretKey=t}static fromRandom(){const t=tweetnacl_1.default.sign.keyPair();return new KeyPairEd25519((0,borsh_1$3.baseEncode)(t.secretKey))}sign(t){return{signature:tweetnacl_1.default.sign.detached(t,(0,borsh_1$3.baseDecode)(this.secretKey)),publicKey:this.publicKey}}verify(t,r){return this.publicKey.verify(t,r)}toString(){return`ed25519:${this.secretKey}`}getPublicKey(){return this.publicKey}}key_pair_ed25519.KeyPairEd25519=KeyPairEd25519;Object.defineProperty(key_pair$1,"__esModule",{value:!0});key_pair$1.KeyPair=void 0;const key_pair_base_1=key_pair_base,key_pair_ed25519_1=key_pair_ed25519;class KeyPair extends key_pair_base_1.KeyPairBase{static fromRandom(t){switch(t.toUpperCase()){case"ED25519":return key_pair_ed25519_1.KeyPairEd25519.fromRandom();default:throw new Error(`Unknown curve ${t}`)}}static fromString(t){const r=t.split(":");if(r.length===1)return new key_pair_ed25519_1.KeyPairEd25519(r[0]);if(r.length===2)switch(r[0].toUpperCase()){case"ED25519":return new key_pair_ed25519_1.KeyPairEd25519(r[1]);default:throw new Error(`Unknown curve: ${r[0]}`)}else throw new Error("Invalid encoded key format, must be <curve>:<encoded key>")}}key_pair$1.KeyPair=KeyPair;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PublicKey=e.KeyPairEd25519=e.KeyPair=e.KeyType=void 0;var t=constants$2;Object.defineProperty(e,"KeyType",{enumerable:!0,get:function(){return t.KeyType}});var r=key_pair$1;Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return r.KeyPair}});var n=key_pair_ed25519;Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return n.KeyPairEd25519}});var a=public_key;Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return a.PublicKey}})})(lib$d);var keystore={};Object.defineProperty(keystore,"__esModule",{value:!0});keystore.KeyStore=void 0;class KeyStore{}keystore.KeyStore=KeyStore;var __awaiter$f=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})};Object.defineProperty(in_memory_key_store$1,"__esModule",{value:!0});in_memory_key_store$1.InMemoryKeyStore=void 0;const crypto_1$5=lib$d,keystore_1$1=keystore;class InMemoryKeyStore extends keystore_1$1.KeyStore{constructor(){super(),this.keys={}}setKey(t,r,n){return __awaiter$f(this,void 0,void 0,function*(){this.keys[`${r}:${t}`]=n.toString()})}getKey(t,r){return __awaiter$f(this,void 0,void 0,function*(){const n=this.keys[`${r}:${t}`];return n?crypto_1$5.KeyPair.fromString(n):null})}removeKey(t,r){return __awaiter$f(this,void 0,void 0,function*(){delete this.keys[`${r}:${t}`]})}clear(){return __awaiter$f(this,void 0,void 0,function*(){this.keys={}})}getNetworks(){return __awaiter$f(this,void 0,void 0,function*(){const t=new Set;return Object.keys(this.keys).forEach(r=>{const n=r.split(":");t.add(n[1])}),Array.from(t.values())})}getAccounts(t){return __awaiter$f(this,void 0,void 0,function*(){const r=new Array;return Object.keys(this.keys).forEach(n=>{const a=n.split(":");a[a.length-1]===t&&r.push(a.slice(0,a.length-1).join(":"))}),r})}toString(){return"InMemoryKeyStore"}}in_memory_key_store$1.InMemoryKeyStore=InMemoryKeyStore;var merge_key_store$1={},__awaiter$e=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})};Object.defineProperty(merge_key_store$1,"__esModule",{value:!0});merge_key_store$1.MergeKeyStore=void 0;const keystore_1=keystore;class MergeKeyStore extends keystore_1.KeyStore{constructor(t,r={writeKeyStoreIndex:0}){super(),this.options=r,this.keyStores=t}setKey(t,r,n){return __awaiter$e(this,void 0,void 0,function*(){yield this.keyStores[this.options.writeKeyStoreIndex].setKey(t,r,n)})}getKey(t,r){return __awaiter$e(this,void 0,void 0,function*(){for(const n of this.keyStores){const a=yield n.getKey(t,r);if(a)return a}return null})}removeKey(t,r){return __awaiter$e(this,void 0,void 0,function*(){for(const n of this.keyStores)yield n.removeKey(t,r)})}clear(){return __awaiter$e(this,void 0,void 0,function*(){for(const t of this.keyStores)yield t.clear()})}getNetworks(){return __awaiter$e(this,void 0,void 0,function*(){const t=new Set;for(const r of this.keyStores)for(const n of yield r.getNetworks())t.add(n);return Array.from(t)})}getAccounts(t){return __awaiter$e(this,void 0,void 0,function*(){const r=new Set;for(const n of this.keyStores)for(const a of yield n.getAccounts(t))r.add(a);return Array.from(r)})}toString(){return`MergeKeyStore(${this.keyStores.join(", ")})`}}merge_key_store$1.MergeKeyStore=MergeKeyStore;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=e.KeyStore=e.InMemoryKeyStore=void 0;var t=in_memory_key_store$1;Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return t.InMemoryKeyStore}});var r=keystore;Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return r.KeyStore}});var n=merge_key_store$1;Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return n.MergeKeyStore}})})(lib$e);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.KeyStore=void 0;var t=lib$e;Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return t.KeyStore}})})(keystore$1);var in_memory_key_store={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryKeyStore=void 0;var t=lib$e;Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return t.InMemoryKeyStore}})})(in_memory_key_store);var browser_local_storage_key_store$1={},lib$a={},browser_local_storage_key_store={},__awaiter$d=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})};Object.defineProperty(browser_local_storage_key_store,"__esModule",{value:!0});browser_local_storage_key_store.BrowserLocalStorageKeyStore=void 0;const crypto_1$4=lib$d,keystores_1$1=lib$e,LOCAL_STORAGE_KEY_PREFIX="near-api-js:keystore:";class BrowserLocalStorageKeyStore extends keystores_1$1.KeyStore{constructor(t=window.localStorage,r=LOCAL_STORAGE_KEY_PREFIX){super(),this.localStorage=t,this.prefix=r}setKey(t,r,n){return __awaiter$d(this,void 0,void 0,function*(){this.localStorage.setItem(this.storageKeyForSecretKey(t,r),n.toString())})}getKey(t,r){return __awaiter$d(this,void 0,void 0,function*(){const n=this.localStorage.getItem(this.storageKeyForSecretKey(t,r));return n?crypto_1$4.KeyPair.fromString(n):null})}removeKey(t,r){return __awaiter$d(this,void 0,void 0,function*(){this.localStorage.removeItem(this.storageKeyForSecretKey(t,r))})}clear(){return __awaiter$d(this,void 0,void 0,function*(){for(const t of this.storageKeys())t.startsWith(this.prefix)&&this.localStorage.removeItem(t)})}getNetworks(){return __awaiter$d(this,void 0,void 0,function*(){const t=new Set;for(const r of this.storageKeys())if(r.startsWith(this.prefix)){const n=r.substring(this.prefix.length).split(":");t.add(n[1])}return Array.from(t.values())})}getAccounts(t){return __awaiter$d(this,void 0,void 0,function*(){const r=new Array;for(const n of this.storageKeys())if(n.startsWith(this.prefix)){const a=n.substring(this.prefix.length).split(":");a[1]===t&&r.push(a[0])}return r})}storageKeyForSecretKey(t,r){return`${this.prefix}${r}:${t}`}*storageKeys(){for(let t=0;t<this.localStorage.length;t++)yield this.localStorage.key(t)}}browser_local_storage_key_store.BrowserLocalStorageKeyStore=BrowserLocalStorageKeyStore;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserLocalStorageKeyStore=void 0;var t=browser_local_storage_key_store;Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return t.BrowserLocalStorageKeyStore}})})(lib$a);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserLocalStorageKeyStore=void 0;var t=lib$a;Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return t.BrowserLocalStorageKeyStore}})})(browser_local_storage_key_store$1);var merge_key_store={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=void 0;var t=lib$e;Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return t.MergeKeyStore}})})(merge_key_store);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MergeKeyStore=e.BrowserLocalStorageKeyStore=e.InMemoryKeyStore=e.KeyStore=void 0;const t=keystore$1;Object.defineProperty(e,"KeyStore",{enumerable:!0,get:function(){return t.KeyStore}});const r=in_memory_key_store;Object.defineProperty(e,"InMemoryKeyStore",{enumerable:!0,get:function(){return r.InMemoryKeyStore}});const n=browser_local_storage_key_store$1;Object.defineProperty(e,"BrowserLocalStorageKeyStore",{enumerable:!0,get:function(){return n.BrowserLocalStorageKeyStore}});const a=merge_key_store;Object.defineProperty(e,"MergeKeyStore",{enumerable:!0,get:function(){return a.MergeKeyStore}})})(browserIndex);var commonIndex={},providers={},provider$2={},lib$9={},constants$1={},__importDefault$b=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(constants$1,"__esModule",{value:!0});constants$1.DEFAULT_FUNCTION_CALL_GAS=void 0;const bn_js_1$7=__importDefault$b(bnExports);constants$1.DEFAULT_FUNCTION_CALL_GAS=new bn_js_1$7.default("30000000000000");var errors$4={},errors$3={},define_process_env_default$4={};Object.defineProperty(errors$3,"__esModule",{value:!0});errors$3.logWarning=void 0;function logWarning$1(...e){define_process_env_default$4.NEAR_NO_LOGS||console.warn(...e)}errors$3.logWarning=logWarning$1;var rpc_errors$1={},mustache={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(commonjsGlobal,function(){/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var r=Object.prototype.toString,n=Array.isArray||function(M){return r.call(M)==="[object Array]"};function a(ie){return typeof ie=="function"}function o(ie){return n(ie)?"array":typeof ie}function s(ie){return ie.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function u(ie,M){return ie!=null&&typeof ie=="object"&&M in ie}function _(ie,M){return ie!=null&&typeof ie!="object"&&ie.hasOwnProperty&&ie.hasOwnProperty(M)}var v=RegExp.prototype.test;function g(ie,M){return v.call(ie,M)}var S=/\S/;function U(ie){return!g(S,ie)}var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function B(ie){return String(ie).replace(/[&<>"'`=\/]/g,function(c){return k[c]})}var D=/\s*/,L=/\s+/,R=/\s*=/,G=/\s*\}/,J=/#|\^|\/|>|\{|&|=|!/;function ee(ie,M){if(!ie)return[];var c=!1,p=[],E=[],T=[],C=!1,F=!1,j="",y=0;function l(){if(C&&!F)for(;T.length;)delete E[T.pop()];else T=[];C=!1,F=!1}var b,x,O;function z(Et){if(typeof Et=="string"&&(Et=Et.split(L,2)),!n(Et)||Et.length!==2)throw new Error("Invalid tags: "+Et);b=new RegExp(s(Et[0])+"\\s*"),x=new RegExp("\\s*"+s(Et[1])),O=new RegExp("\\s*"+s("}"+Et[1]))}z(M||we.tags);for(var ae=new je(ie),se,he,Se,Te,Le,dt;!ae.eos();){if(se=ae.pos,Se=ae.scanUntil(b),Se)for(var He=0,it=Se.length;He<it;++He)Te=Se.charAt(He),U(Te)?(T.push(E.length),j+=Te):(F=!0,c=!0,j+=" "),E.push(["text",Te,se,se+1]),se+=1,Te===`
`&&(l(),j="",y=0,c=!1);if(!ae.scan(b))break;if(C=!0,he=ae.scan(J)||"name",ae.scan(D),he==="="?(Se=ae.scanUntil(R),ae.scan(R),ae.scanUntil(x)):he==="{"?(Se=ae.scanUntil(O),ae.scan(G),ae.scanUntil(x),he="&"):Se=ae.scanUntil(x),!ae.scan(x))throw new Error("Unclosed tag at "+ae.pos);if(he==">"?Le=[he,Se,se,ae.pos,j,y,c]:Le=[he,Se,se,ae.pos],y++,E.push(Le),he==="#"||he==="^")p.push(Le);else if(he==="/"){if(dt=p.pop(),!dt)throw new Error('Unopened section "'+Se+'" at '+se);if(dt[1]!==Se)throw new Error('Unclosed section "'+dt[1]+'" at '+se)}else he==="name"||he==="{"||he==="&"?F=!0:he==="="&&z(Se)}if(l(),dt=p.pop(),dt)throw new Error('Unclosed section "'+dt[1]+'" at '+ae.pos);return le(re(E))}function re(ie){for(var M=[],c,p,E=0,T=ie.length;E<T;++E)c=ie[E],c&&(c[0]==="text"&&p&&p[0]==="text"?(p[1]+=c[1],p[3]=c[3]):(M.push(c),p=c));return M}function le(ie){for(var M=[],c=M,p=[],E,T,C=0,F=ie.length;C<F;++C)switch(E=ie[C],E[0]){case"#":case"^":c.push(E),p.push(E),c=E[4]=[];break;case"/":T=p.pop(),T[5]=E[2],c=p.length>0?p[p.length-1][4]:M;break;default:c.push(E)}return M}function je(ie){this.string=ie,this.tail=ie,this.pos=0}je.prototype.eos=function(){return this.tail===""},je.prototype.scan=function(M){var c=this.tail.match(M);if(!c||c.index!==0)return"";var p=c[0];return this.tail=this.tail.substring(p.length),this.pos+=p.length,p},je.prototype.scanUntil=function(M){var c=this.tail.search(M),p;switch(c){case-1:p=this.tail,this.tail="";break;case 0:p="";break;default:p=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=p.length,p};function rt(ie,M){this.view=ie,this.cache={".":this.view},this.parent=M}rt.prototype.push=function(M){return new rt(M,this)},rt.prototype.lookup=function(M){var c=this.cache,p;if(c.hasOwnProperty(M))p=c[M];else{for(var E=this,T,C,F,j=!1;E;){if(M.indexOf(".")>0)for(T=E.view,C=M.split("."),F=0;T!=null&&F<C.length;)F===C.length-1&&(j=u(T,C[F])||_(T,C[F])),T=T[C[F++]];else T=E.view[M],j=u(E.view,M);if(j){p=T;break}E=E.parent}c[M]=p}return a(p)&&(p=p.call(this.view)),p};function _e(){this.templateCache={_cache:{},set:function(M,c){this._cache[M]=c},get:function(M){return this._cache[M]},clear:function(){this._cache={}}}}_e.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},_e.prototype.parse=function(M,c){var p=this.templateCache,E=M+":"+(c||we.tags).join(":"),T=typeof p<"u",C=T?p.get(E):void 0;return C==null&&(C=ee(M,c),T&&p.set(E,C)),C},_e.prototype.render=function(M,c,p,E){var T=this.getConfigTags(E),C=this.parse(M,T),F=c instanceof rt?c:new rt(c,void 0);return this.renderTokens(C,F,p,M,E)},_e.prototype.renderTokens=function(M,c,p,E,T){for(var C="",F,j,y,l=0,b=M.length;l<b;++l)y=void 0,F=M[l],j=F[0],j==="#"?y=this.renderSection(F,c,p,E,T):j==="^"?y=this.renderInverted(F,c,p,E,T):j===">"?y=this.renderPartial(F,c,p,T):j==="&"?y=this.unescapedValue(F,c):j==="name"?y=this.escapedValue(F,c,T):j==="text"&&(y=this.rawValue(F)),y!==void 0&&(C+=y);return C},_e.prototype.renderSection=function(M,c,p,E,T){var C=this,F="",j=c.lookup(M[1]);function y(x){return C.render(x,c,p,T)}if(j){if(n(j))for(var l=0,b=j.length;l<b;++l)F+=this.renderTokens(M[4],c.push(j[l]),p,E,T);else if(typeof j=="object"||typeof j=="string"||typeof j=="number")F+=this.renderTokens(M[4],c.push(j),p,E,T);else if(a(j)){if(typeof E!="string")throw new Error("Cannot use higher-order sections without the original template");j=j.call(c.view,E.slice(M[3],M[5]),y),j!=null&&(F+=j)}else F+=this.renderTokens(M[4],c,p,E,T);return F}},_e.prototype.renderInverted=function(M,c,p,E,T){var C=c.lookup(M[1]);if(!C||n(C)&&C.length===0)return this.renderTokens(M[4],c,p,E,T)},_e.prototype.indentPartial=function(M,c,p){for(var E=c.replace(/[^ \t]/g,""),T=M.split(`
`),C=0;C<T.length;C++)T[C].length&&(C>0||!p)&&(T[C]=E+T[C]);return T.join(`
`)},_e.prototype.renderPartial=function(M,c,p,E){if(p){var T=this.getConfigTags(E),C=a(p)?p(M[1]):p[M[1]];if(C!=null){var F=M[6],j=M[5],y=M[4],l=C;j==0&&y&&(l=this.indentPartial(C,y,F));var b=this.parse(l,T);return this.renderTokens(b,c,p,l,E)}}},_e.prototype.unescapedValue=function(M,c){var p=c.lookup(M[1]);if(p!=null)return p},_e.prototype.escapedValue=function(M,c,p){var E=this.getConfigEscape(p)||we.escape,T=c.lookup(M[1]);if(T!=null)return typeof T=="number"&&E===we.escape?String(T):E(T)},_e.prototype.rawValue=function(M){return M[1]},_e.prototype.getConfigTags=function(M){return n(M)?M:M&&typeof M=="object"?M.tags:void 0},_e.prototype.getConfigEscape=function(M){if(M&&typeof M=="object"&&!n(M))return M.escape};var we={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(ie){Ee.templateCache=ie},get templateCache(){return Ee.templateCache}},Ee=new _e;return we.clearCache=function(){return Ee.clearCache()},we.parse=function(M,c){return Ee.parse(M,c)},we.render=function(M,c,p,E){if(typeof M!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+o(M)+'" was given as the first argument for mustache#render(template, view, partials)');return Ee.render(M,c,p,E)},we.escape=B,we.Scanner=je,we.Context=rt,we.Writer=_e,we})})(mustache);var mustacheExports=mustache.exports,format$4={};(function(e){var t=commonjsGlobal&&commonjsGlobal.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0}),e.parseNearAmount=e.formatNearAmount=e.NEAR_NOMINATION=e.NEAR_NOMINATION_EXP=void 0;const r=t(bnExports);e.NEAR_NOMINATION_EXP=24,e.NEAR_NOMINATION=new r.default("10",10).pow(new r.default(e.NEAR_NOMINATION_EXP,10));const n=[],a=new r.default(10);for(let S=0,U=new r.default(5);S<e.NEAR_NOMINATION_EXP;S++,U=U.mul(a))n[S]=U;function o(S,U=e.NEAR_NOMINATION_EXP){const k=new r.default(S,10);if(U!==e.NEAR_NOMINATION_EXP){const L=e.NEAR_NOMINATION_EXP-U-1;L>0&&k.iadd(n[L])}S=k.toString();const B=S.substring(0,S.length-e.NEAR_NOMINATION_EXP)||"0",D=S.substring(S.length-e.NEAR_NOMINATION_EXP).padStart(e.NEAR_NOMINATION_EXP,"0").substring(0,U);return _(`${g(B)}.${D}`)}e.formatNearAmount=o;function s(S){if(!S)return null;S=u(S);const U=S.split("."),k=U[0],B=U[1]||"";if(U.length>2||B.length>e.NEAR_NOMINATION_EXP)throw new Error(`Cannot parse '${S}' as NEAR amount`);return v(k+B.padEnd(e.NEAR_NOMINATION_EXP,"0"))}e.parseNearAmount=s;function u(S){return S.replace(/,/g,"").trim()}function _(S){return S.replace(/\.?0*$/,"")}function v(S){return S=S.replace(/^0+/,""),S===""?"0":S}function g(S){const U=/(-?\d+)(\d{3})/;for(;U.test(S);)S=S.replace(U,"$1,$2");return S}})(format$4);const GasLimitExceeded="Exceeded the maximum amount of gas allowed to burn per contract",MethodEmptyName="Method name is empty",WasmerCompileError="Wasmer compilation error: {{msg}}",GuestPanic="Smart contract panicked: {{panic_msg}}",Memory="Error creating Wasm memory",GasExceeded="Exceeded the prepaid gas",MethodUTF8Error="Method name is not valid UTF8 string",BadUTF16="String encoding is bad UTF-16 sequence",WasmTrap="WebAssembly trap: {{msg}}",GasInstrumentation="Gas instrumentation failed or contract has denied instructions.",InvalidPromiseIndex="{{promise_idx}} does not correspond to existing promises",InvalidPromiseResultIndex="Accessed invalid promise result index: {{result_idx}}",Deserialization="Error happened while deserializing the module",MethodNotFound="Contract method is not found",InvalidRegisterId="Accessed invalid register id: {{register_id}}",InvalidReceiptIndex="VM Logic returned an invalid receipt index: {{receipt_index}}",EmptyMethodName="Method name is empty in contract call",CannotReturnJointPromise="Returning joint promise is currently prohibited",StackHeightInstrumentation="Stack instrumentation failed",CodeDoesNotExist="Cannot find contract code for account {{account_id}}",MethodInvalidSignature="Invalid method signature",IntegerOverflow="Integer overflow happened during contract execution",MemoryAccessViolation="MemoryAccessViolation",InvalidIteratorIndex="Iterator index {{iterator_index}} does not exist",IteratorWasInvalidated="Iterator {{iterator_index}} was invalidated after its creation by performing a mutable operation on trie",InvalidAccountId="VM Logic returned an invalid account id",Serialization="Error happened while serializing the module",CannotAppendActionToJointPromise="Actions can only be appended to non-joint promise.",InternalMemoryDeclared="Internal memory declaration has been found in the module",Instantiate="Error happened during instantiation",ProhibitedInView="{{method_name}} is not allowed in view calls",InvalidMethodName="VM Logic returned an invalid method name",BadUTF8="String encoding is bad UTF-8 sequence",BalanceExceeded="Exceeded the account balance",LinkError="Wasm contract link error: {{msg}}",InvalidPublicKey="VM Logic provided an invalid public key",ActorNoPermission="Actor {{actor_id}} doesn't have permission to account {{account_id}} to complete the action",LackBalanceForState="The account {{account_id}} wouldn't have enough balance to cover storage, required to have {{amount}} yoctoNEAR more",ReceiverMismatch="Wrong AccessKey used for transaction: transaction is sent to receiver_id={{tx_receiver}}, but is signed with function call access key that restricted to only use with receiver_id={{ak_receiver}}. Either change receiver_id in your transaction or switch to use a FullAccessKey.",CostOverflow="Transaction gas or balance cost is too high",InvalidSignature="Transaction is not signed with the given public key",AccessKeyNotFound=`Signer "{{account_id}}" doesn't have access key with the given public_key {{public_key}}`,NotEnoughBalance="Sender {{signer_id}} does not have enough balance {{#formatNear}}{{balance}}{{/formatNear}} for operation costing {{#formatNear}}{{cost}}{{/formatNear}}",NotEnoughAllowance="Access Key {account_id}:{public_key} does not have enough balance {{#formatNear}}{{allowance}}{{/formatNear}} for transaction costing {{#formatNear}}{{cost}}{{/formatNear}}",Expired="Transaction has expired",DeleteAccountStaking="Account {{account_id}} is staking and can not be deleted",SignerDoesNotExist="Signer {{signer_id}} does not exist",TriesToStake="Account {{account_id}} tried to stake {{#formatNear}}{{stake}}{{/formatNear}}, but has staked {{#formatNear}}{{locked}}{{/formatNear}} and only has {{#formatNear}}{{balance}}{{/formatNear}}",AddKeyAlreadyExists="The public key {{public_key}} is already used for an existing access key",InvalidSigner="Invalid signer account ID {{signer_id}} according to requirements",CreateAccountNotAllowed="The new account_id {{account_id}} can't be created by {{predecessor_id}}",RequiresFullAccess="The transaction contains more then one action, but it was signed with an access key which allows transaction to apply only one specific action. To apply more then one actions TX must be signed with a full access key",TriesToUnstake="Account {{account_id}} is not yet staked, but tried to unstake",InvalidNonce="Transaction nonce {{tx_nonce}} must be larger than nonce of the used access key {{ak_nonce}}",AccountAlreadyExists="Can't create a new account {{account_id}}, because it already exists",InvalidChain="Transaction parent block hash doesn't belong to the current chain",AccountDoesNotExist="Can't complete the action because account {{account_id}} doesn't exist",MethodNameMismatch="Transaction method name {{method_name}} isn't allowed by the access key",DeleteAccountHasRent="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover the rent",DeleteAccountHasEnoughBalance="Account {{account_id}} can't be deleted. It has {{#formatNear}}{{balance}}{{/formatNear}}, which is enough to cover it's storage",InvalidReceiver="Invalid receiver account ID {{receiver_id}} according to requirements",DeleteKeyDoesNotExist="Account {{account_id}} tries to remove an access key that doesn't exist",Timeout="Timeout exceeded",Closed="Connection closed",require$$3$1={GasLimitExceeded,MethodEmptyName,WasmerCompileError,GuestPanic,Memory,GasExceeded,MethodUTF8Error,BadUTF16,WasmTrap,GasInstrumentation,InvalidPromiseIndex,InvalidPromiseResultIndex,Deserialization,MethodNotFound,InvalidRegisterId,InvalidReceiptIndex,EmptyMethodName,CannotReturnJointPromise,StackHeightInstrumentation,CodeDoesNotExist,MethodInvalidSignature,IntegerOverflow,MemoryAccessViolation,InvalidIteratorIndex,IteratorWasInvalidated,InvalidAccountId,Serialization,CannotAppendActionToJointPromise,InternalMemoryDeclared,Instantiate,ProhibitedInView,InvalidMethodName,BadUTF8,BalanceExceeded,LinkError,InvalidPublicKey,ActorNoPermission,LackBalanceForState,ReceiverMismatch,CostOverflow,InvalidSignature,AccessKeyNotFound,NotEnoughBalance,NotEnoughAllowance,Expired,DeleteAccountStaking,SignerDoesNotExist,TriesToStake,AddKeyAlreadyExists,InvalidSigner,CreateAccountNotAllowed,RequiresFullAccess,TriesToUnstake,InvalidNonce,AccountAlreadyExists,InvalidChain,AccountDoesNotExist,MethodNameMismatch,DeleteAccountHasRent,DeleteAccountHasEnoughBalance,InvalidReceiver,DeleteKeyDoesNotExist,Timeout,Closed},schema$1={BadUTF16:{name:"BadUTF16",subtypes:[],props:{}},BadUTF8:{name:"BadUTF8",subtypes:[],props:{}},BalanceExceeded:{name:"BalanceExceeded",subtypes:[],props:{}},BreakpointTrap:{name:"BreakpointTrap",subtypes:[],props:{}},CacheError:{name:"CacheError",subtypes:["ReadError","WriteError","DeserializationError","SerializationError"],props:{}},CallIndirectOOB:{name:"CallIndirectOOB",subtypes:[],props:{}},CannotAppendActionToJointPromise:{name:"CannotAppendActionToJointPromise",subtypes:[],props:{}},CannotReturnJointPromise:{name:"CannotReturnJointPromise",subtypes:[],props:{}},CodeDoesNotExist:{name:"CodeDoesNotExist",subtypes:[],props:{account_id:""}},CompilationError:{name:"CompilationError",subtypes:["CodeDoesNotExist","PrepareError","WasmerCompileError"],props:{}},ContractSizeExceeded:{name:"ContractSizeExceeded",subtypes:[],props:{limit:"",size:""}},Deprecated:{name:"Deprecated",subtypes:[],props:{method_name:""}},Deserialization:{name:"Deserialization",subtypes:[],props:{}},DeserializationError:{name:"DeserializationError",subtypes:[],props:{}},EmptyMethodName:{name:"EmptyMethodName",subtypes:[],props:{}},FunctionCallError:{name:"FunctionCallError",subtypes:["CompilationError","LinkError","MethodResolveError","WasmTrap","WasmUnknownError","HostError","EvmError"],props:{}},GasExceeded:{name:"GasExceeded",subtypes:[],props:{}},GasInstrumentation:{name:"GasInstrumentation",subtypes:[],props:{}},GasLimitExceeded:{name:"GasLimitExceeded",subtypes:[],props:{}},GenericTrap:{name:"GenericTrap",subtypes:[],props:{}},GuestPanic:{name:"GuestPanic",subtypes:[],props:{panic_msg:""}},HostError:{name:"HostError",subtypes:["BadUTF16","BadUTF8","GasExceeded","GasLimitExceeded","BalanceExceeded","EmptyMethodName","GuestPanic","IntegerOverflow","InvalidPromiseIndex","CannotAppendActionToJointPromise","CannotReturnJointPromise","InvalidPromiseResultIndex","InvalidRegisterId","IteratorWasInvalidated","MemoryAccessViolation","InvalidReceiptIndex","InvalidIteratorIndex","InvalidAccountId","InvalidMethodName","InvalidPublicKey","ProhibitedInView","NumberOfLogsExceeded","KeyLengthExceeded","ValueLengthExceeded","TotalLogLengthExceeded","NumberPromisesExceeded","NumberInputDataDependenciesExceeded","ReturnedValueLengthExceeded","ContractSizeExceeded","Deprecated"],props:{}},IllegalArithmetic:{name:"IllegalArithmetic",subtypes:[],props:{}},IncorrectCallIndirectSignature:{name:"IncorrectCallIndirectSignature",subtypes:[],props:{}},Instantiate:{name:"Instantiate",subtypes:[],props:{}},IntegerOverflow:{name:"IntegerOverflow",subtypes:[],props:{}},InternalMemoryDeclared:{name:"InternalMemoryDeclared",subtypes:[],props:{}},InvalidAccountId:{name:"InvalidAccountId",subtypes:[],props:{account_id:""}},InvalidIteratorIndex:{name:"InvalidIteratorIndex",subtypes:[],props:{iterator_index:""}},InvalidMethodName:{name:"InvalidMethodName",subtypes:[],props:{}},InvalidPromiseIndex:{name:"InvalidPromiseIndex",subtypes:[],props:{promise_idx:""}},InvalidPromiseResultIndex:{name:"InvalidPromiseResultIndex",subtypes:[],props:{result_idx:""}},InvalidPublicKey:{name:"InvalidPublicKey",subtypes:[],props:{}},InvalidReceiptIndex:{name:"InvalidReceiptIndex",subtypes:[],props:{receipt_index:""}},InvalidRegisterId:{name:"InvalidRegisterId",subtypes:[],props:{register_id:""}},IteratorWasInvalidated:{name:"IteratorWasInvalidated",subtypes:[],props:{iterator_index:""}},KeyLengthExceeded:{name:"KeyLengthExceeded",subtypes:[],props:{length:"",limit:""}},LinkError:{name:"LinkError",subtypes:[],props:{msg:""}},Memory:{name:"Memory",subtypes:[],props:{}},MemoryAccessViolation:{name:"MemoryAccessViolation",subtypes:[],props:{}},MemoryOutOfBounds:{name:"MemoryOutOfBounds",subtypes:[],props:{}},MethodEmptyName:{name:"MethodEmptyName",subtypes:[],props:{}},MethodInvalidSignature:{name:"MethodInvalidSignature",subtypes:[],props:{}},MethodNotFound:{name:"MethodNotFound",subtypes:[],props:{}},MethodResolveError:{name:"MethodResolveError",subtypes:["MethodEmptyName","MethodUTF8Error","MethodNotFound","MethodInvalidSignature"],props:{}},MethodUTF8Error:{name:"MethodUTF8Error",subtypes:[],props:{}},MisalignedAtomicAccess:{name:"MisalignedAtomicAccess",subtypes:[],props:{}},NumberInputDataDependenciesExceeded:{name:"NumberInputDataDependenciesExceeded",subtypes:[],props:{limit:"",number_of_input_data_dependencies:""}},NumberOfLogsExceeded:{name:"NumberOfLogsExceeded",subtypes:[],props:{limit:""}},NumberPromisesExceeded:{name:"NumberPromisesExceeded",subtypes:[],props:{limit:"",number_of_promises:""}},PrepareError:{name:"PrepareError",subtypes:["Serialization","Deserialization","InternalMemoryDeclared","GasInstrumentation","StackHeightInstrumentation","Instantiate","Memory"],props:{}},ProhibitedInView:{name:"ProhibitedInView",subtypes:[],props:{method_name:""}},ReadError:{name:"ReadError",subtypes:[],props:{}},ReturnedValueLengthExceeded:{name:"ReturnedValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},Serialization:{name:"Serialization",subtypes:[],props:{}},SerializationError:{name:"SerializationError",subtypes:[],props:{hash:""}},StackHeightInstrumentation:{name:"StackHeightInstrumentation",subtypes:[],props:{}},StackOverflow:{name:"StackOverflow",subtypes:[],props:{}},TotalLogLengthExceeded:{name:"TotalLogLengthExceeded",subtypes:[],props:{length:"",limit:""}},Unreachable:{name:"Unreachable",subtypes:[],props:{}},ValueLengthExceeded:{name:"ValueLengthExceeded",subtypes:[],props:{length:"",limit:""}},WasmTrap:{name:"WasmTrap",subtypes:["Unreachable","IncorrectCallIndirectSignature","MemoryOutOfBounds","CallIndirectOOB","IllegalArithmetic","MisalignedAtomicAccess","BreakpointTrap","StackOverflow","GenericTrap"],props:{}},WasmUnknownError:{name:"WasmUnknownError",subtypes:[],props:{}},WasmerCompileError:{name:"WasmerCompileError",subtypes:[],props:{msg:""}},WriteError:{name:"WriteError",subtypes:[],props:{}},AccessKeyNotFound:{name:"AccessKeyNotFound",subtypes:[],props:{account_id:"",public_key:""}},AccountAlreadyExists:{name:"AccountAlreadyExists",subtypes:[],props:{account_id:""}},AccountDoesNotExist:{name:"AccountDoesNotExist",subtypes:[],props:{account_id:""}},ActionError:{name:"ActionError",subtypes:["AccountAlreadyExists","AccountDoesNotExist","CreateAccountOnlyByRegistrar","CreateAccountNotAllowed","ActorNoPermission","DeleteKeyDoesNotExist","AddKeyAlreadyExists","DeleteAccountStaking","LackBalanceForState","TriesToUnstake","TriesToStake","InsufficientStake","FunctionCallError","NewReceiptValidationError","OnlyImplicitAccountCreationAllowed"],props:{index:""}},ActionsValidationError:{name:"ActionsValidationError",subtypes:["DeleteActionMustBeFinal","TotalPrepaidGasExceeded","TotalNumberOfActionsExceeded","AddKeyMethodNamesNumberOfBytesExceeded","AddKeyMethodNameLengthExceeded","IntegerOverflow","InvalidAccountId","ContractSizeExceeded","FunctionCallMethodNameLengthExceeded","FunctionCallArgumentsLengthExceeded","UnsuitableStakingKey","FunctionCallZeroAttachedGas"],props:{}},ActorNoPermission:{name:"ActorNoPermission",subtypes:[],props:{account_id:"",actor_id:""}},AddKeyAlreadyExists:{name:"AddKeyAlreadyExists",subtypes:[],props:{account_id:"",public_key:""}},AddKeyMethodNameLengthExceeded:{name:"AddKeyMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},AddKeyMethodNamesNumberOfBytesExceeded:{name:"AddKeyMethodNamesNumberOfBytesExceeded",subtypes:[],props:{limit:"",total_number_of_bytes:""}},BalanceMismatchError:{name:"BalanceMismatchError",subtypes:[],props:{final_accounts_balance:"",final_postponed_receipts_balance:"",incoming_receipts_balance:"",incoming_validator_rewards:"",initial_accounts_balance:"",initial_postponed_receipts_balance:"",new_delayed_receipts_balance:"",other_burnt_amount:"",outgoing_receipts_balance:"",processed_delayed_receipts_balance:"",slashed_burnt_amount:"",tx_burnt_amount:""}},CostOverflow:{name:"CostOverflow",subtypes:[],props:{}},CreateAccountNotAllowed:{name:"CreateAccountNotAllowed",subtypes:[],props:{account_id:"",predecessor_id:""}},CreateAccountOnlyByRegistrar:{name:"CreateAccountOnlyByRegistrar",subtypes:[],props:{account_id:"",predecessor_id:"",registrar_account_id:""}},DeleteAccountStaking:{name:"DeleteAccountStaking",subtypes:[],props:{account_id:""}},DeleteActionMustBeFinal:{name:"DeleteActionMustBeFinal",subtypes:[],props:{}},DeleteKeyDoesNotExist:{name:"DeleteKeyDoesNotExist",subtypes:[],props:{account_id:"",public_key:""}},DepositWithFunctionCall:{name:"DepositWithFunctionCall",subtypes:[],props:{}},Expired:{name:"Expired",subtypes:[],props:{}},FunctionCallArgumentsLengthExceeded:{name:"FunctionCallArgumentsLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallMethodNameLengthExceeded:{name:"FunctionCallMethodNameLengthExceeded",subtypes:[],props:{length:"",limit:""}},FunctionCallZeroAttachedGas:{name:"FunctionCallZeroAttachedGas",subtypes:[],props:{}},InsufficientStake:{name:"InsufficientStake",subtypes:[],props:{account_id:"",minimum_stake:"",stake:""}},InvalidAccessKeyError:{name:"InvalidAccessKeyError",subtypes:["AccessKeyNotFound","ReceiverMismatch","MethodNameMismatch","RequiresFullAccess","NotEnoughAllowance","DepositWithFunctionCall"],props:{}},InvalidChain:{name:"InvalidChain",subtypes:[],props:{}},InvalidDataReceiverId:{name:"InvalidDataReceiverId",subtypes:[],props:{account_id:""}},InvalidNonce:{name:"InvalidNonce",subtypes:[],props:{ak_nonce:"",tx_nonce:""}},InvalidPredecessorId:{name:"InvalidPredecessorId",subtypes:[],props:{account_id:""}},InvalidReceiverId:{name:"InvalidReceiverId",subtypes:[],props:{account_id:""}},InvalidSignature:{name:"InvalidSignature",subtypes:[],props:{}},InvalidSignerId:{name:"InvalidSignerId",subtypes:[],props:{account_id:""}},InvalidTxError:{name:"InvalidTxError",subtypes:["InvalidAccessKeyError","InvalidSignerId","SignerDoesNotExist","InvalidNonce","InvalidReceiverId","InvalidSignature","NotEnoughBalance","LackBalanceForState","CostOverflow","InvalidChain","Expired","ActionsValidation"],props:{}},LackBalanceForState:{name:"LackBalanceForState",subtypes:[],props:{account_id:"",amount:""}},MethodNameMismatch:{name:"MethodNameMismatch",subtypes:[],props:{method_name:""}},NotEnoughAllowance:{name:"NotEnoughAllowance",subtypes:[],props:{account_id:"",allowance:"",cost:"",public_key:""}},NotEnoughBalance:{name:"NotEnoughBalance",subtypes:[],props:{balance:"",cost:"",signer_id:""}},OnlyImplicitAccountCreationAllowed:{name:"OnlyImplicitAccountCreationAllowed",subtypes:[],props:{account_id:""}},ReceiptValidationError:{name:"ReceiptValidationError",subtypes:["InvalidPredecessorId","InvalidReceiverId","InvalidSignerId","InvalidDataReceiverId","ReturnedValueLengthExceeded","NumberInputDataDependenciesExceeded","ActionsValidation"],props:{}},ReceiverMismatch:{name:"ReceiverMismatch",subtypes:[],props:{ak_receiver:"",tx_receiver:""}},RequiresFullAccess:{name:"RequiresFullAccess",subtypes:[],props:{}},SignerDoesNotExist:{name:"SignerDoesNotExist",subtypes:[],props:{signer_id:""}},TotalNumberOfActionsExceeded:{name:"TotalNumberOfActionsExceeded",subtypes:[],props:{limit:"",total_number_of_actions:""}},TotalPrepaidGasExceeded:{name:"TotalPrepaidGasExceeded",subtypes:[],props:{limit:"",total_prepaid_gas:""}},TriesToStake:{name:"TriesToStake",subtypes:[],props:{account_id:"",balance:"",locked:"",stake:""}},TriesToUnstake:{name:"TriesToUnstake",subtypes:[],props:{account_id:""}},TxExecutionError:{name:"TxExecutionError",subtypes:["ActionError","InvalidTxError"],props:{}},UnsuitableStakingKey:{name:"UnsuitableStakingKey",subtypes:[],props:{public_key:""}},Closed:{name:"Closed",subtypes:[],props:{}},InternalError:{name:"InternalError",subtypes:[],props:{}},ServerError:{name:"ServerError",subtypes:["TxExecutionError","Timeout","Closed","InternalError"],props:{}},Timeout:{name:"Timeout",subtypes:[],props:{}}},require$$4={schema:schema$1};var __importDefault$a=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rpc_errors$1,"__esModule",{value:!0});rpc_errors$1.getErrorTypeFromErrorMessage=rpc_errors$1.formatError=rpc_errors$1.parseResultError=rpc_errors$1.parseRpcError=rpc_errors$1.ServerError=void 0;const types_1$b=lib$b,mustache_1=__importDefault$a(mustacheExports),format_1$2=format$4,error_messages_json_1=__importDefault$a(require$$3$1),rpc_error_schema_json_1=__importDefault$a(require$$4),mustacheHelpers={formatNear:()=>(e,t)=>(0,format_1$2.formatNearAmount)(t(e))};class ServerError extends types_1$b.TypedError{}rpc_errors$1.ServerError=ServerError;class ServerTransactionError extends ServerError{}function parseRpcError(e){const t={},r=walkSubtype(e,rpc_error_schema_json_1.default.schema,t,""),n=new ServerError(formatError(r,t),r);return Object.assign(n,t),n}rpc_errors$1.parseRpcError=parseRpcError;function parseResultError(e){const t=parseRpcError(e.status.Failure),r=new ServerTransactionError;return Object.assign(r,t),r.type=t.type,r.message=t.message,r.transaction_outcome=e.transaction_outcome,r}rpc_errors$1.parseResultError=parseResultError;function formatError(e,t){return typeof error_messages_json_1.default[e]=="string"?mustache_1.default.render(error_messages_json_1.default[e],Object.assign(Object.assign({},t),mustacheHelpers)):JSON.stringify(t)}rpc_errors$1.formatError=formatError;function walkSubtype(e,t,r,n){let a,o,s;for(const u in t){if(isString(e[u]))return e[u];if(isObject$1(e[u]))a=e[u],o=t[u],s=u;else if(isObject$1(e.kind)&&isObject$1(e.kind[u]))a=e.kind[u],o=t[u],s=u;else continue}if(a&&o){for(const u of Object.keys(o.props))r[u]=a[u];return walkSubtype(a,t,r,s)}else return r.kind=e,n}function getErrorTypeFromErrorMessage(e,t){switch(!0){case/^account .*? does not exist while viewing$/.test(e):return"AccountDoesNotExist";case/^Account .*? doesn't exist$/.test(e):return"AccountDoesNotExist";case/^access key .*? does not exist while viewing$/.test(e):return"AccessKeyDoesNotExist";case/wasm execution failed with error: FunctionCallError\(CompilationError\(CodeDoesNotExist/.test(e):return"CodeDoesNotExist";case/Transaction nonce \d+ must be larger than nonce of the used access key \d+/.test(e):return"InvalidNonce";default:return t}}rpc_errors$1.getErrorTypeFromErrorMessage=getErrorTypeFromErrorMessage;function isObject$1(e){return Object.prototype.toString.call(e)==="[object Object]"}function isString(e){return Object.prototype.toString.call(e)==="[object String]"}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseRpcError=e.parseResultError=e.getErrorTypeFromErrorMessage=e.formatError=e.ServerError=e.logWarning=void 0;var t=errors$3;Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return t.logWarning}});var r=rpc_errors$1;Object.defineProperty(e,"ServerError",{enumerable:!0,get:function(){return r.ServerError}}),Object.defineProperty(e,"formatError",{enumerable:!0,get:function(){return r.formatError}}),Object.defineProperty(e,"getErrorTypeFromErrorMessage",{enumerable:!0,get:function(){return r.getErrorTypeFromErrorMessage}}),Object.defineProperty(e,"parseResultError",{enumerable:!0,get:function(){return r.parseResultError}}),Object.defineProperty(e,"parseRpcError",{enumerable:!0,get:function(){return r.parseRpcError}})})(errors$4);var logging={},define_process_env_default$3={};Object.defineProperty(logging,"__esModule",{value:!0});logging.printTxOutcomeLogs=logging.printTxOutcomeLogsAndFailures=void 0;const errors_1$5=errors$4,SUPPRESS_LOGGING=!!define_process_env_default$3.NEAR_NO_LOGS;function printTxOutcomeLogsAndFailures({contractId:e,outcome:t}){if(SUPPRESS_LOGGING)return;const r=[t.transaction_outcome,...t.receipts_outcome].reduce((n,a)=>{const o=typeof a.outcome.status=="object"&&typeof a.outcome.status.Failure=="object";return a.outcome.logs.length||o?n.concat({receiptIds:a.outcome.receipt_ids,logs:a.outcome.logs,failure:typeof a.outcome.status=="object"&&a.outcome.status.Failure!==void 0?(0,errors_1$5.parseRpcError)(a.outcome.status.Failure):null}):n},[]);for(const n of r)console.log(`Receipt${n.receiptIds.length>1?"s":""}: ${n.receiptIds.join(", ")}`),printTxOutcomeLogs({contractId:e,logs:n.logs,prefix:"	"}),n.failure&&console.warn(`	Failure [${e}]: ${n.failure}`)}logging.printTxOutcomeLogsAndFailures=printTxOutcomeLogsAndFailures;function printTxOutcomeLogs({contractId:e,logs:t,prefix:r=""}){if(!SUPPRESS_LOGGING)for(const n of t)console.log(`${r}Log [${e}]: ${n}`)}logging.printTxOutcomeLogs=printTxOutcomeLogs;var provider$1={};Object.defineProperty(provider$1,"__esModule",{value:!0});provider$1.getTransactionLastResult=void 0;function getTransactionLastResult(e){if(typeof e.status=="object"&&typeof e.status.SuccessValue=="string"){const t=Buffer.from(e.status.SuccessValue,"base64").toString();try{return JSON.parse(t)}catch{return t}}return null}provider$1.getTransactionLastResult=getTransactionLastResult;var validators$1={};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var browser$2=depd$1;function depd$1(e){if(!e)throw new TypeError("argument namespace is required");function t(r){}return t._file=void 0,t._ignored=!0,t._namespace=e,t._traced=!1,t._warned=Object.create(null),t.function=wrapfunction$1,t.property=wrapproperty$1,t}function wrapfunction$1(e,t){if(typeof e!="function")throw new TypeError("argument fn must be a function");return e}function wrapproperty$1(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(e,t);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var __importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(validators$1,"__esModule",{value:!0});validators$1.diffEpochValidators=validators$1.findSeatPrice=void 0;const bn_js_1$6=__importDefault$9(bnExports),depd_1$1=__importDefault$9(browser$2);function findSeatPrice(e,t,r,n){return n&&n<49?findSeatPriceForProtocolBefore49(e,t):(r||((0,depd_1$1.default)("findSeatPrice(validators, maxNumberOfSeats)")("`use `findSeatPrice(validators, maxNumberOfSeats, minimumStakeRatio)` instead"),r=[1,6250]),findSeatPriceForProtocolAfter49(e,t,r))}validators$1.findSeatPrice=findSeatPrice;function findSeatPriceForProtocolBefore49(e,t){const r=e.map(u=>new bn_js_1$6.default(u.stake,10)).sort((u,_)=>u.cmp(_)),n=new bn_js_1$6.default(t),a=r.reduce((u,_)=>u.add(_));if(a.lt(n))throw new Error("Stakes are below seats");let o=new bn_js_1$6.default(1),s=a.add(new bn_js_1$6.default(1));for(;!o.eq(s.sub(new bn_js_1$6.default(1)));){const u=o.add(s).div(new bn_js_1$6.default(2));let _=!1,v=new bn_js_1$6.default(0);for(let g=0;g<r.length;++g)if(v=v.add(r[g].div(u)),v.gte(n)){o=u,_=!0;break}_||(s=u)}return o}function findSeatPriceForProtocolAfter49(e,t,r){if(r.length!=2)throw Error("minimumStakeRatio should have 2 elements");const n=e.map(o=>new bn_js_1$6.default(o.stake,10)).sort((o,s)=>o.cmp(s)),a=n.reduce((o,s)=>o.add(s));return e.length<t?a.mul(new bn_js_1$6.default(r[0])).div(new bn_js_1$6.default(r[1])):n[0].add(new bn_js_1$6.default(1))}function diffEpochValidators(e,t){const r=new Map;e.forEach(a=>r.set(a.account_id,a));const n=new Set(t.map(a=>a.account_id));return{newValidators:t.filter(a=>!r.has(a.account_id)),removedValidators:e.filter(a=>!n.has(a.account_id)),changedValidators:t.filter(a=>r.has(a.account_id)&&r.get(a.account_id).stake!=a.stake).map(a=>({current:r.get(a.account_id),next:a}))}}validators$1.diffEpochValidators=diffEpochValidators;(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,u)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(n,a){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&t(a,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(constants$1,e),r(errors$4,e),r(format$4,e),r(logging,e),r(provider$1,e),r(validators$1,e)})(lib$9);var lib$8={},exponentialBackoff$1={},__awaiter$c=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})};Object.defineProperty(exponentialBackoff$1,"__esModule",{value:!0});exponentialBackoff$1.exponentialBackoff=void 0;function exponentialBackoff(e,t,r,n){return __awaiter$c(this,void 0,void 0,function*(){let a=e;for(let o=0;o<t;o++){const s=yield n();if(s)return s;yield sleep(a),a*=r}return null})}exponentialBackoff$1.exponentialBackoff=exponentialBackoff;function sleep(e){return new Promise(t=>setTimeout(t,e))}var jsonRpcProvider$2={},lib$7={},action_creators={},actions={};Object.defineProperty(actions,"__esModule",{value:!0});actions.Action=actions.SignedDelegate=actions.DeleteAccount=actions.DeleteKey=actions.AddKey=actions.Stake=actions.Transfer=actions.FunctionCall=actions.DeployContract=actions.CreateAccount=actions.IAction=actions.AccessKey=actions.AccessKeyPermission=actions.FullAccessPermission=actions.FunctionCallPermission=void 0;const types_1$a=lib$b;class Enum{constructor(t){if(Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(r=>{this[r]=t[r],this.enum=r})}}class FunctionCallPermission extends types_1$a.Assignable{}actions.FunctionCallPermission=FunctionCallPermission;class FullAccessPermission extends types_1$a.Assignable{}actions.FullAccessPermission=FullAccessPermission;class AccessKeyPermission extends Enum{}actions.AccessKeyPermission=AccessKeyPermission;class AccessKey extends types_1$a.Assignable{}actions.AccessKey=AccessKey;class IAction extends types_1$a.Assignable{}actions.IAction=IAction;class CreateAccount extends IAction{}actions.CreateAccount=CreateAccount;class DeployContract extends IAction{}actions.DeployContract=DeployContract;class FunctionCall extends IAction{}actions.FunctionCall=FunctionCall;class Transfer extends IAction{}actions.Transfer=Transfer;class Stake extends IAction{}actions.Stake=Stake;class AddKey extends IAction{}actions.AddKey=AddKey;class DeleteKey extends IAction{}actions.DeleteKey=DeleteKey;class DeleteAccount extends IAction{}actions.DeleteAccount=DeleteAccount;class SignedDelegate extends IAction{}actions.SignedDelegate=SignedDelegate;class Action extends Enum{}actions.Action=Action;Object.defineProperty(action_creators,"__esModule",{value:!0});action_creators.actionCreators=action_creators.stringifyJsonOrBytes=void 0;const actions_1$1=actions;function fullAccessKey$2(){return new actions_1$1.AccessKey({permission:new actions_1$1.AccessKeyPermission({fullAccess:new actions_1$1.FullAccessPermission({})})})}function functionCallAccessKey$2(e,t,r){return new actions_1$1.AccessKey({permission:new actions_1$1.AccessKeyPermission({functionCall:new actions_1$1.FunctionCallPermission({receiverId:e,allowance:r,methodNames:t})})})}function createAccount$2(){return new actions_1$1.Action({createAccount:new actions_1$1.CreateAccount({})})}function deployContract$4(e){return new actions_1$1.Action({deployContract:new actions_1$1.DeployContract({code:e})})}function stringifyJsonOrBytes(e){return e.byteLength!==void 0&&e.byteLength===e.length?e:Buffer.from(JSON.stringify(e))}action_creators.stringifyJsonOrBytes=stringifyJsonOrBytes;function functionCall$4(e,t,r,n,a=stringifyJsonOrBytes,o=!1){return o?new actions_1$1.Action({functionCall:new actions_1$1.FunctionCall({methodName:e,args:t,gas:r,deposit:n})}):new actions_1$1.Action({functionCall:new actions_1$1.FunctionCall({methodName:e,args:a(t),gas:r,deposit:n})})}function transfer$2(e){return new actions_1$1.Action({transfer:new actions_1$1.Transfer({deposit:e})})}function stake$2(e,t){return new actions_1$1.Action({stake:new actions_1$1.Stake({stake:e,publicKey:t})})}function addKey$3(e,t){return new actions_1$1.Action({addKey:new actions_1$1.AddKey({publicKey:e,accessKey:t})})}function deleteKey$3(e){return new actions_1$1.Action({deleteKey:new actions_1$1.DeleteKey({publicKey:e})})}function deleteAccount$2(e){return new actions_1$1.Action({deleteAccount:new actions_1$1.DeleteAccount({beneficiaryId:e})})}function signedDelegate({delegateAction:e,signature:t}){return new actions_1$1.Action({signedDelegate:new actions_1$1.SignedDelegate({delegateAction:e,signature:t})})}action_creators.actionCreators={addKey:addKey$3,createAccount:createAccount$2,deleteAccount:deleteAccount$2,deleteKey:deleteKey$3,deployContract:deployContract$4,fullAccessKey:fullAccessKey$2,functionCall:functionCall$4,functionCallAccessKey:functionCallAccessKey$2,signedDelegate,stake:stake$2,transfer:transfer$2};var create_transaction={},schema={},delegate={};Object.defineProperty(delegate,"__esModule",{value:!0});delegate.buildDelegateAction=delegate.DelegateAction=void 0;const types_1$9=lib$b,action_creators_1=action_creators,{addKey:addKey$2,createAccount:createAccount$1,deleteAccount:deleteAccount$1,deleteKey:deleteKey$2,deployContract:deployContract$3,functionCall:functionCall$3,stake:stake$1,transfer:transfer$1}=action_creators_1.actionCreators;class DelegateAction extends types_1$9.Assignable{}delegate.DelegateAction=DelegateAction;function buildDelegateAction({actions:e,maxBlockHeight:t,nonce:r,publicKey:n,receiverId:a,senderId:o}){return new DelegateAction({senderId:o,receiverId:a,actions:e.map(s=>{if(!s.type&&!s.params)return s;switch(s.type){case"AddKey":{const{publicKey:u,accessKey:_}=s.params;return addKey$2(u,_)}case"CreateAccount":return createAccount$1(s.params.createAccount);case"DeleteAccount":return deleteAccount$1(s.params.deleteAccount);case"DeleteKey":return deleteKey$2(s.params.publicKey);case"DeployContract":return deployContract$3(s.params.code);case"FunctionCall":{const{methodName:u,args:_,gas:v,deposit:g}=s.params;return functionCall$3(u,_,v,g)}case"Stake":return stake$1(s.params.stake,s.params.publicKey);case"Transfer":{const{deposit:u}=s.params;return transfer$1(u)}}throw new Error("Unrecognized action")}),nonce:r,maxBlockHeight:t,publicKey:n})}delegate.buildDelegateAction=buildDelegateAction;var prefix={};Object.defineProperty(prefix,"__esModule",{value:!0});prefix.DelegateActionPrefix=void 0;const types_1$8=lib$b,ACTIONABLE_MESSAGE_BASE=Math.pow(2,30),NEP={MetaTransactions:366};class NEPPrefix extends types_1$8.Assignable{}class ActionableMessagePrefix extends NEPPrefix{constructor(t){super({prefix:ACTIONABLE_MESSAGE_BASE+t})}}class DelegateActionPrefix extends ActionableMessagePrefix{constructor(){super(NEP.MetaTransactions)}}prefix.DelegateActionPrefix=DelegateActionPrefix;var signature={};Object.defineProperty(signature,"__esModule",{value:!0});signature.Signature=void 0;const types_1$7=lib$b;class Signature extends types_1$7.Assignable{}signature.Signature=Signature;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SCHEMA=e.SignedTransaction=e.Transaction=e.decodeSignedTransaction=e.decodeTransaction=e.encodeTransaction=e.encodeSignedDelegate=e.encodeDelegateAction=void 0;const t=lib$d,r=lib$b,n=lib$c,a=actions,o=delegate,s=prefix,u=signature;function _(D){return new Uint8Array([...(0,n.serialize)(e.SCHEMA,new s.DelegateActionPrefix),...(0,n.serialize)(e.SCHEMA,D)])}e.encodeDelegateAction=_;function v(D){return(0,n.serialize)(e.SCHEMA,D)}e.encodeSignedDelegate=v;function g(D){return(0,n.serialize)(e.SCHEMA,D)}e.encodeTransaction=g;function S(D){return(0,n.deserialize)(e.SCHEMA,k,D)}e.decodeTransaction=S;function U(D){return(0,n.deserialize)(e.SCHEMA,B,D)}e.decodeSignedTransaction=U;class k extends r.Assignable{encode(){return g(this)}static decode(L){return S(L)}}e.Transaction=k;class B extends r.Assignable{encode(){return g(this)}static decode(L){return U(L)}}e.SignedTransaction=B,e.SCHEMA=new Map([[u.Signature,{kind:"struct",fields:[["keyType","u8"],["data",[64]]]}],[B,{kind:"struct",fields:[["transaction",k],["signature",u.Signature]]}],[k,{kind:"struct",fields:[["signerId","string"],["publicKey",t.PublicKey],["nonce","u64"],["receiverId","string"],["blockHash",[32]],["actions",[a.Action]]]}],[t.PublicKey,{kind:"struct",fields:[["keyType","u8"],["data",[32]]]}],[a.AccessKey,{kind:"struct",fields:[["nonce","u64"],["permission",a.AccessKeyPermission]]}],[a.AccessKeyPermission,{kind:"enum",field:"enum",values:[["functionCall",a.FunctionCallPermission],["fullAccess",a.FullAccessPermission]]}],[a.FunctionCallPermission,{kind:"struct",fields:[["allowance",{kind:"option",type:"u128"}],["receiverId","string"],["methodNames",["string"]]]}],[a.FullAccessPermission,{kind:"struct",fields:[]}],[a.Action,{kind:"enum",field:"enum",values:[["createAccount",a.CreateAccount],["deployContract",a.DeployContract],["functionCall",a.FunctionCall],["transfer",a.Transfer],["stake",a.Stake],["addKey",a.AddKey],["deleteKey",a.DeleteKey],["deleteAccount",a.DeleteAccount],["signedDelegate",a.SignedDelegate]]}],[a.CreateAccount,{kind:"struct",fields:[]}],[a.DeployContract,{kind:"struct",fields:[["code",["u8"]]]}],[a.FunctionCall,{kind:"struct",fields:[["methodName","string"],["args",["u8"]],["gas","u64"],["deposit","u128"]]}],[a.Transfer,{kind:"struct",fields:[["deposit","u128"]]}],[a.Stake,{kind:"struct",fields:[["stake","u128"],["publicKey",t.PublicKey]]}],[a.AddKey,{kind:"struct",fields:[["publicKey",t.PublicKey],["accessKey",a.AccessKey]]}],[a.DeleteKey,{kind:"struct",fields:[["publicKey",t.PublicKey]]}],[a.DeleteAccount,{kind:"struct",fields:[["beneficiaryId","string"]]}],[o.DelegateAction,{kind:"struct",fields:[["senderId","string"],["receiverId","string"],["actions",[a.Action]],["nonce","u64"],["maxBlockHeight","u64"],["publicKey",t.PublicKey]]}],[s.DelegateActionPrefix,{kind:"struct",fields:[["prefix","u32"]]}],[a.SignedDelegate,{kind:"struct",fields:[["delegateAction",o.DelegateAction],["signature",u.Signature]]}]])})(schema);Object.defineProperty(create_transaction,"__esModule",{value:!0});create_transaction.createTransaction=void 0;const schema_1$1=schema;function createTransaction(e,t,r,n,a,o){return new schema_1$1.Transaction({signerId:e,publicKey:t,nonce:n,receiverId:r,actions:a,blockHash:o})}create_transaction.createTransaction=createTransaction;var sign={},sha256={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return typeof e=="object"&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e,t){return function(r){return new Sha256(t,!0).update(r)[e]()}},createMethod=function(e){var t=createOutputMethod("hex",e);NODE_JS&&(t=nodeWrap(t,e)),t.create=function(){return new Sha256(e)},t.update=function(a){return t.create().update(a)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];t[n]=createOutputMethod(n,e)}return t},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(e){if(typeof e=="string")return crypto.createHash(algorithm).update(e,"utf8").digest("hex");if(e==null)throw new Error(ERROR);return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod},createHmacOutputMethod=function(e,t){return function(r,n){return new HmacSha256(r,t,!0).update(n)[e]()}},createHmacMethod=function(e){var t=createHmacOutputMethod("hex",e);t.create=function(a){return new HmacSha256(a,e)},t.update=function(a,o){return t.create(a).update(o)};for(var r=0;r<OUTPUT_TYPES.length;++r){var n=OUTPUT_TYPES[r];t[n]=createHmacOutputMethod(n,e)}return t};function Sha256(e,t){t?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=e}Sha256.prototype.update=function(e){if(!this.finalized){var t,r=typeof e;if(r!=="string"){if(r==="object"){if(e===null)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR)}else throw new Error(ERROR);t=!0}for(var n,a=0,o,s=e.length,u=this.blocks;a<s;){if(this.hashed&&(this.hashed=!1,u[0]=this.block,u[16]=u[1]=u[2]=u[3]=u[4]=u[5]=u[6]=u[7]=u[8]=u[9]=u[10]=u[11]=u[12]=u[13]=u[14]=u[15]=0),t)for(o=this.start;a<s&&o<64;++a)u[o>>2]|=e[a]<<SHIFT[o++&3];else for(o=this.start;a<s&&o<64;++a)n=e.charCodeAt(a),n<128?u[o>>2]|=n<<SHIFT[o++&3]:n<2048?(u[o>>2]|=(192|n>>6)<<SHIFT[o++&3],u[o>>2]|=(128|n&63)<<SHIFT[o++&3]):n<55296||n>=57344?(u[o>>2]|=(224|n>>12)<<SHIFT[o++&3],u[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],u[o>>2]|=(128|n&63)<<SHIFT[o++&3]):(n=65536+((n&1023)<<10|e.charCodeAt(++a)&1023),u[o>>2]|=(240|n>>18)<<SHIFT[o++&3],u[o>>2]|=(128|n>>12&63)<<SHIFT[o++&3],u[o>>2]|=(128|n>>6&63)<<SHIFT[o++&3],u[o>>2]|=(128|n&63)<<SHIFT[o++&3]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=u[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[t&3],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,s=this.h6,u=this.h7,_=this.blocks,v,g,S,U,k,B,D,L,R,G,J;for(v=16;v<64;++v)k=_[v-15],g=(k>>>7|k<<25)^(k>>>18|k<<14)^k>>>3,k=_[v-2],S=(k>>>17|k<<15)^(k>>>19|k<<13)^k>>>10,_[v]=_[v-16]+g+_[v-7]+S<<0;for(J=t&r,v=0;v<64;v+=4)this.first?(this.is224?(L=300032,k=_[0]-1413257819,u=k-150054599<<0,n=k+24177077<<0):(L=704751109,k=_[0]-210244248,u=k-1521486534<<0,n=k+143694565<<0),this.first=!1):(g=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),S=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),L=e&t,U=L^e&r^J,D=a&o^~a&s,k=u+S+D+K[v]+_[v],B=g+U,u=n+k<<0,n=k+B<<0),g=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),S=(u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7),R=n&e,U=R^n&t^L,D=u&a^~u&o,k=s+S+D+K[v+1]+_[v+1],B=g+U,s=r+k<<0,r=k+B<<0,g=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),S=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),G=r&n,U=G^r&e^R,D=s&u^~s&a,k=o+S+D+K[v+2]+_[v+2],B=g+U,o=t+k<<0,t=k+B<<0,g=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),S=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),J=t&r,U=J^t&n^G,D=o&s^~o&u,k=a+S+D+K[v+3]+_[v+3],B=g+U,a=e+k<<0,e=k+B<<0;this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0,this.h4=this.h4+a<<0,this.h5=this.h5+o<<0,this.h6=this.h6+s<<0,this.h7=this.h7+u<<0},Sha256.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,s=this.h6,u=this.h7,_=HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[r&15]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[n&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15];return this.is224||(_+=HEX_CHARS[u>>28&15]+HEX_CHARS[u>>24&15]+HEX_CHARS[u>>20&15]+HEX_CHARS[u>>16&15]+HEX_CHARS[u>>12&15]+HEX_CHARS[u>>8&15]+HEX_CHARS[u>>4&15]+HEX_CHARS[u&15]),_},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,a=this.h4,o=this.h5,s=this.h6,u=this.h7,_=[e>>24&255,e>>16&255,e>>8&255,e&255,t>>24&255,t>>16&255,t>>8&255,t&255,r>>24&255,r>>16&255,r>>8&255,r&255,n>>24&255,n>>16&255,n>>8&255,n&255,a>>24&255,a>>16&255,a>>8&255,a&255,o>>24&255,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255];return this.is224||_.push(u>>24&255,u>>16&255,u>>8&255,u&255),_},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(this.is224?28:32),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),t.setUint32(20,this.h5),t.setUint32(24,this.h6),this.is224||t.setUint32(28,this.h7),e};function HmacSha256(e,t,r){var n,a=typeof e;if(a==="string"){var o=[],s=e.length,u=0,_;for(n=0;n<s;++n)_=e.charCodeAt(n),_<128?o[u++]=_:_<2048?(o[u++]=192|_>>6,o[u++]=128|_&63):_<55296||_>=57344?(o[u++]=224|_>>12,o[u++]=128|_>>6&63,o[u++]=128|_&63):(_=65536+((_&1023)<<10|e.charCodeAt(++n)&1023),o[u++]=240|_>>18,o[u++]=128|_>>12&63,o[u++]=128|_>>6&63,o[u++]=128|_&63);e=o}else if(a==="object"){if(e===null)throw new Error(ERROR);if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(e)))throw new Error(ERROR)}else throw new Error(ERROR);e.length>64&&(e=new Sha256(t,!0).update(e).array());var v=[],g=[];for(n=0;n<64;++n){var S=e[n]||0;v[n]=92^S,g[n]=54^S}Sha256.call(this,t,r),this.update(g),this.oKeyPad=v,this.inner=!0,this.sharedMemory=r}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(e),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256);var sha256Exports=sha256.exports,__awaiter$b=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})},__importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sign,"__esModule",{value:!0});sign.signDelegateAction=sign.signTransaction=void 0;const js_sha256_1$1=__importDefault$8(sha256Exports),actions_1=actions,create_transaction_1=create_transaction,schema_1=schema,signature_1=signature;function signTransactionObject(e,t,r,n){return __awaiter$b(this,void 0,void 0,function*(){const a=(0,schema_1.encodeTransaction)(e),o=new Uint8Array(js_sha256_1$1.default.sha256.array(a)),s=yield t.signMessage(a,r,n),u=new schema_1.SignedTransaction({transaction:e,signature:new signature_1.Signature({keyType:e.publicKey.keyType,data:s.signature})});return[o,u]})}function signTransaction(...e){return __awaiter$b(this,void 0,void 0,function*(){if(e[0].constructor===schema_1.Transaction){const[t,r,n,a]=e;return signTransactionObject(t,r,n,a)}else{const[t,r,n,a,o,s,u]=e,_=yield o.getPublicKey(s,u),v=(0,create_transaction_1.createTransaction)(s,_,t,r,n,a);return signTransactionObject(v,o,s,u)}})}sign.signTransaction=signTransaction;function signDelegateAction({delegateAction:e,signer:t}){return __awaiter$b(this,void 0,void 0,function*(){const r=(0,schema_1.encodeDelegateAction)(e),n=yield t.sign(r),a=new actions_1.SignedDelegate({delegateAction:e,signature:new signature_1.Signature({keyType:e.publicKey.keyType,data:n})});return{hash:new Uint8Array(js_sha256_1$1.default.sha256.array(r)),signedDelegateAction:a}})}sign.signDelegateAction=signDelegateAction;(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(n,s,u)}:function(n,a,o,s){s===void 0&&(s=o),n[s]=a[o]}),r=commonjsGlobal&&commonjsGlobal.__exportStar||function(n,a){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&t(a,n,o)};Object.defineProperty(e,"__esModule",{value:!0}),r(action_creators,e),r(actions,e),r(create_transaction,e),r(delegate,e),r(schema,e),r(sign,e),r(signature,e)})(lib$7);var provider={};Object.defineProperty(provider,"__esModule",{value:!0});provider.Provider=void 0;class Provider{}provider.Provider=Provider;var fetch_json={},httpErrors={exports:{}};/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var browser$1=depd;function depd(e){if(!e)throw new TypeError("argument namespace is required");function t(r){}return t._file=void 0,t._ignored=!0,t._namespace=e,t._traced=!1,t._warned=Object.create(null),t.function=wrapfunction,t.property=wrapproperty,t}function wrapfunction(e,t){if(typeof e!="function")throw new TypeError("argument fn must be a function");return e}function wrapproperty(e,t,r){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(e,t);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}var setprototypeof=Object.setPrototypeOf||({__proto__:[]}instanceof Array?setProtoOf:mixinProperties);function setProtoOf(e,t){return e.__proto__=t,e}function mixinProperties(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r]);return e}const require$$0={100:"Continue",101:"Switching Protocols",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};/*!
 * statuses
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var codes=require$$0,statuses=status;status.STATUS_CODES=codes;status.codes=populateStatusesMap(status,codes);status.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0};status.empty={204:!0,205:!0,304:!0};status.retry={502:!0,503:!0,504:!0};function populateStatusesMap(e,t){var r=[];return Object.keys(t).forEach(function(a){var o=t[a],s=Number(a);e[s]=o,e[o]=s,e[o.toLowerCase()]=s,r.push(s)}),r}function status(e){if(typeof e=="number"){if(!status[e])throw new Error("invalid status code: "+e);return e}if(typeof e!="string")throw new TypeError("code must be a number or string");var t=parseInt(e,10);if(!isNaN(t)){if(!status[t])throw new Error("invalid status code: "+t);return t}if(t=status[e.toLowerCase()],!t)throw new Error('invalid status message: "'+e+'"');return t}var inherits_browser={exports:{}};typeof Object.create=="function"?inherits_browser.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}};var inherits_browserExports=inherits_browser.exports;/*!
 * toidentifier
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */var toidentifier=toIdentifier;function toIdentifier(e){return e.split(" ").map(function(t){return t.slice(0,1).toUpperCase()+t.slice(1)}).join("").replace(/[^ _0-9a-z]/gi,"")}/*!
 * http-errors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2016 Douglas Christopher Wilson
 * MIT Licensed
 */(function(e){var t=browser$1("http-errors"),r=setprototypeof,n=statuses,a=inherits_browserExports,o=toidentifier;e.exports=u,e.exports.HttpError=_(),e.exports.isHttpError=g(e.exports.HttpError),k(e.exports,n.codes,e.exports.HttpError);function s(D){return+(String(D).charAt(0)+"00")}function u(){for(var D,L,R=500,G={},J=0;J<arguments.length;J++){var ee=arguments[J];if(ee instanceof Error){D=ee,R=D.status||D.statusCode||R;continue}switch(typeof ee){case"string":L=ee;break;case"number":R=ee;break;case"object":G=ee;break}}(typeof R!="number"||!n[R]&&(R<400||R>=600))&&(R=500);var re=u[R]||u[s(R)];D||(D=re?new re(L):new Error(L||n[R]),Error.captureStackTrace(D,u)),(!re||!(D instanceof re)||D.status!==R)&&(D.expose=R<500,D.status=D.statusCode=R);for(var le in G)le!=="status"&&le!=="statusCode"&&(D[le]=G[le]);return D}function _(){function D(){throw new TypeError("cannot construct abstract class")}return a(D,Error),D}function v(D,L,R){var G=B(L);function J(ee){var re=ee??n[R],le=new Error(re);return Error.captureStackTrace(le,J),r(le,J.prototype),Object.defineProperty(le,"message",{enumerable:!0,configurable:!0,value:re,writable:!0}),Object.defineProperty(le,"name",{enumerable:!1,configurable:!0,value:G,writable:!0}),le}return a(J,D),U(J,G),J.prototype.status=R,J.prototype.statusCode=R,J.prototype.expose=!0,J}function g(D){return function(R){return!R||typeof R!="object"?!1:R instanceof D?!0:R instanceof Error&&typeof R.expose=="boolean"&&typeof R.statusCode=="number"&&R.status===R.statusCode}}function S(D,L,R){var G=B(L);function J(ee){var re=ee??n[R],le=new Error(re);return Error.captureStackTrace(le,J),r(le,J.prototype),Object.defineProperty(le,"message",{enumerable:!0,configurable:!0,value:re,writable:!0}),Object.defineProperty(le,"name",{enumerable:!1,configurable:!0,value:G,writable:!0}),le}return a(J,D),U(J,G),J.prototype.status=R,J.prototype.statusCode=R,J.prototype.expose=!1,J}function U(D,L){var R=Object.getOwnPropertyDescriptor(D,"name");R&&R.configurable&&(R.value=L,Object.defineProperty(D,"name",R))}function k(D,L,R){L.forEach(function(J){var ee,re=o(n[J]);switch(s(J)){case 400:ee=v(R,re,J);break;case 500:ee=S(R,re,J);break}ee&&(D[J]=ee,D[re]=ee)}),D["I'mateapot"]=t.function(D.ImATeapot,`"I'mateapot"; use "ImATeapot" instead`)}function B(D){return D.substr(-5)!=="Error"?D+"Error":D}})(httpErrors);var httpErrorsExports=httpErrors.exports,fetch$1={},browser={exports:{}},hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(e,t){var r=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal<"u")return commonjsGlobal;throw new Error("unable to locate global object")},n=r();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response}(browser,browser.exports)),browser.exports}var hasRequiredFetch;function requireFetch(){if(hasRequiredFetch)return fetch$1;hasRequiredFetch=1;var e=commonjsGlobal&&commonjsGlobal.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(fetch$1,"__esModule",{value:!0});const t=e(requireBrowser()),r=e(require$$2$1),n=e(require$$2$1),a=new r.default.Agent({keepAlive:!0}),o=new n.default.Agent({keepAlive:!0});function s(_){return _.protocol==="http:"?a:o}function u(_,v){return(0,t.default)(_,Object.assign({agent:s(new URL(_.toString()))},v))}return fetch$1.default=u,fetch$1}var define_process_env_default$2={},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t},__awaiter$a=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})},__importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fetch_json,"__esModule",{value:!0});fetch_json.fetchJson=void 0;const types_1$6=lib$b,http_errors_1=__importDefault$7(httpErrorsExports),exponential_backoff_1$1=exponentialBackoff$1,START_WAIT_TIME_MS=1e3,BACKOFF_MULTIPLIER=1.5,RETRY_NUMBER=10,logWarning=(...e)=>!define_process_env_default$2.NEAR_NO_LOGS&&console.warn(...e);function fetchJson(e,t){return __awaiter$a(this,void 0,void 0,function*(){let r={url:null};typeof e=="string"?r.url=e:r=e;const n=yield(0,exponential_backoff_1$1.exponentialBackoff)(START_WAIT_TIME_MS,RETRY_NUMBER,BACKOFF_MULTIPLIER,()=>__awaiter$a(this,void 0,void 0,function*(){try{commonjsGlobal.fetch||(commonjsGlobal.fetch=(yield Promise.resolve().then(()=>__importStar(requireFetch()))).default);const a=yield commonjsGlobal.fetch(r.url,{method:t?"POST":"GET",body:t||void 0,headers:Object.assign(Object.assign({},r.headers),{"Content-Type":"application/json"})});if(!a.ok){if(a.status===503)return logWarning(`Retrying HTTP request for ${r.url} as it's not available now`),null;throw(0,http_errors_1.default)(a.status,yield a.text())}return a}catch(a){if(a.toString().includes("FetchError")||a.toString().includes("Failed to fetch"))return logWarning(`Retrying HTTP request for ${r.url} because of error: ${a}`),null;throw a}}));if(!n)throw new types_1$6.TypedError(`Exceeded ${RETRY_NUMBER} attempts for ${r.url}.`,"RetriesExceeded");return yield n.json()})}fetch_json.fetchJson=fetchJson;var define_process_env_default$1={},__awaiter$9=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})},__rest=commonjsGlobal&&commonjsGlobal.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};Object.defineProperty(jsonRpcProvider$2,"__esModule",{value:!0});jsonRpcProvider$2.JsonRpcProvider=void 0;const utils_1$3=lib$9,types_1$5=lib$b,transactions_1$4=lib$7,borsh_1$2=lib$c,exponential_backoff_1=exponentialBackoff$1,provider_1=provider,fetch_json_1=fetch_json,REQUEST_RETRY_NUMBER=12,REQUEST_RETRY_WAIT=500,REQUEST_RETRY_WAIT_BACKOFF=1.5;let _nextId=123;class JsonRpcProvider extends provider_1.Provider{constructor(t){super(),this.connection=t||{url:""}}status(){return __awaiter$9(this,void 0,void 0,function*(){return this.sendJsonRpc("status",[])})}sendTransaction(t){return __awaiter$9(this,void 0,void 0,function*(){const r=(0,transactions_1$4.encodeTransaction)(t);return this.sendJsonRpc("broadcast_tx_commit",[Buffer.from(r).toString("base64")])})}sendTransactionAsync(t){return __awaiter$9(this,void 0,void 0,function*(){const r=(0,transactions_1$4.encodeTransaction)(t);return this.sendJsonRpc("broadcast_tx_async",[Buffer.from(r).toString("base64")])})}txStatus(t,r){return __awaiter$9(this,void 0,void 0,function*(){return typeof t=="string"?this.txStatusString(t,r):this.txStatusUint8Array(t,r)})}txStatusUint8Array(t,r){return __awaiter$9(this,void 0,void 0,function*(){return this.sendJsonRpc("tx",[(0,borsh_1$2.baseEncode)(t),r])})}txStatusString(t,r){return __awaiter$9(this,void 0,void 0,function*(){return this.sendJsonRpc("tx",[t,r])})}txStatusReceipts(t,r){return __awaiter$9(this,void 0,void 0,function*(){return typeof t=="string"?this.sendJsonRpc("EXPERIMENTAL_tx_status",[t,r]):this.sendJsonRpc("EXPERIMENTAL_tx_status",[(0,borsh_1$2.baseEncode)(t),r])})}query(...t){return __awaiter$9(this,void 0,void 0,function*(){let r;if(t.length===1){const n=t[0],{block_id:a,blockId:o}=n,s=__rest(n,["block_id","blockId"]);r=yield this.sendJsonRpc("query",Object.assign(Object.assign({},s),{block_id:a||o}))}else{const[n,a]=t;r=yield this.sendJsonRpc("query",[n,a])}if(r&&r.error)throw new types_1$5.TypedError(`Querying failed: ${r.error}.
${JSON.stringify(r,null,2)}`,(0,utils_1$3.getErrorTypeFromErrorMessage)(r.error,r.error.name));return r})}block(t){return __awaiter$9(this,void 0,void 0,function*(){const{finality:r}=t,{blockId:n}=t;return this.sendJsonRpc("block",{block_id:n,finality:r})})}blockChanges(t){return __awaiter$9(this,void 0,void 0,function*(){const{finality:r}=t,{blockId:n}=t;return this.sendJsonRpc("EXPERIMENTAL_changes_in_block",{block_id:n,finality:r})})}chunk(t){return __awaiter$9(this,void 0,void 0,function*(){return this.sendJsonRpc("chunk",[t])})}validators(t){return __awaiter$9(this,void 0,void 0,function*(){return this.sendJsonRpc("validators",[t])})}experimental_protocolConfig(t){return __awaiter$9(this,void 0,void 0,function*(){const r=t,{blockId:n}=r,a=__rest(r,["blockId"]);return yield this.sendJsonRpc("EXPERIMENTAL_protocol_config",Object.assign(Object.assign({},a),{block_id:n}))})}lightClientProof(t){return __awaiter$9(this,void 0,void 0,function*(){return yield this.sendJsonRpc("EXPERIMENTAL_light_client_proof",t)})}nextLightClientBlock(t){return __awaiter$9(this,void 0,void 0,function*(){return yield this.sendJsonRpc("next_light_client_block",t)})}accessKeyChanges(t,r){return __awaiter$9(this,void 0,void 0,function*(){const{finality:n}=r,{blockId:a}=r;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"all_access_key_changes",account_ids:t,block_id:a,finality:n})})}singleAccessKeyChanges(t,r){return __awaiter$9(this,void 0,void 0,function*(){const{finality:n}=r,{blockId:a}=r;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"single_access_key_changes",keys:t,block_id:a,finality:n})})}accountChanges(t,r){return __awaiter$9(this,void 0,void 0,function*(){const{finality:n}=r,{blockId:a}=r;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"account_changes",account_ids:t,block_id:a,finality:n})})}contractStateChanges(t,r,n=""){return __awaiter$9(this,void 0,void 0,function*(){const{finality:a}=r,{blockId:o}=r;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"data_changes",account_ids:t,key_prefix_base64:n,block_id:o,finality:a})})}contractCodeChanges(t,r){return __awaiter$9(this,void 0,void 0,function*(){const{finality:n}=r,{blockId:a}=r;return this.sendJsonRpc("EXPERIMENTAL_changes",{changes_type:"contract_code_changes",account_ids:t,block_id:a,finality:n})})}gasPrice(t){return __awaiter$9(this,void 0,void 0,function*(){return yield this.sendJsonRpc("gas_price",[t])})}sendJsonRpc(t,r){return __awaiter$9(this,void 0,void 0,function*(){const n=yield(0,exponential_backoff_1.exponentialBackoff)(REQUEST_RETRY_WAIT,REQUEST_RETRY_NUMBER,REQUEST_RETRY_WAIT_BACKOFF,()=>__awaiter$9(this,void 0,void 0,function*(){try{const o={method:t,params:r,id:_nextId++,jsonrpc:"2.0"},s=yield(0,fetch_json_1.fetchJson)(this.connection,JSON.stringify(o));if(s.error){if(typeof s.error.data=="object")throw typeof s.error.data.error_message=="string"&&typeof s.error.data.error_type=="string"?new types_1$5.TypedError(s.error.data.error_message,s.error.data.error_type):(0,utils_1$3.parseRpcError)(s.error.data);{const u=`[${s.error.code}] ${s.error.message}: ${s.error.data}`;throw s.error.data==="Timeout"||u.includes("Timeout error")||u.includes("query has timed out")?new types_1$5.TypedError(u,"TimeoutError"):new types_1$5.TypedError(u,(0,utils_1$3.getErrorTypeFromErrorMessage)(s.error.data,s.error.name))}}return s}catch(o){if(o.type==="TimeoutError")return define_process_env_default$1.NEAR_NO_LOGS||console.warn(`Retrying request to ${t} as it has timed out`,r),null;throw o}})),{result:a}=n;if(typeof a>"u")throw new types_1$5.TypedError(`Exceeded ${REQUEST_RETRY_NUMBER} attempts for request to ${t}.`,"RetriesExceeded");return a})}}jsonRpcProvider$2.JsonRpcProvider=JsonRpcProvider;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchJson=e.Provider=e.JsonRpcProvider=e.exponentialBackoff=void 0;var t=exponentialBackoff$1;Object.defineProperty(e,"exponentialBackoff",{enumerable:!0,get:function(){return t.exponentialBackoff}});var r=jsonRpcProvider$2;Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}});var n=provider;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return n.Provider}});var a=fetch_json;Object.defineProperty(e,"fetchJson",{enumerable:!0,get:function(){return a.fetchJson}})})(lib$8);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FinalExecutionStatusBasic=e.ExecutionStatusBasic=e.IdType=e.Provider=e.getTransactionLastResult=void 0;var t=lib$9;Object.defineProperty(e,"getTransactionLastResult",{enumerable:!0,get:function(){return t.getTransactionLastResult}});var r=lib$8;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return r.Provider}});var n=lib$b;Object.defineProperty(e,"IdType",{enumerable:!0,get:function(){return n.IdType}}),Object.defineProperty(e,"ExecutionStatusBasic",{enumerable:!0,get:function(){return n.ExecutionStatusBasic}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return n.FinalExecutionStatusBasic}})})(provider$2);var jsonRpcProvider$1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.JsonRpcProvider=e.TypedError=e.ErrorContext=void 0;var t=lib$b;Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return t.ErrorContext}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return t.TypedError}});var r=lib$8;Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}})})(jsonRpcProvider$1);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ErrorContext=e.TypedError=e.getTransactionLastResult=e.FinalExecutionStatusBasic=e.JsonRpcProvider=e.Provider=void 0;const t=provider$2;Object.defineProperty(e,"Provider",{enumerable:!0,get:function(){return t.Provider}}),Object.defineProperty(e,"getTransactionLastResult",{enumerable:!0,get:function(){return t.getTransactionLastResult}}),Object.defineProperty(e,"FinalExecutionStatusBasic",{enumerable:!0,get:function(){return t.FinalExecutionStatusBasic}});const r=jsonRpcProvider$1;Object.defineProperty(e,"JsonRpcProvider",{enumerable:!0,get:function(){return r.JsonRpcProvider}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return r.TypedError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return r.ErrorContext}})})(providers);var utils$1={},key_pair={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PublicKey=e.KeyType=e.KeyPairEd25519=e.KeyPair=void 0;var t=lib$d;Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return t.KeyPair}}),Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return t.KeyPairEd25519}}),Object.defineProperty(e,"KeyType",{enumerable:!0,get:function(){return t.KeyType}}),Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return t.PublicKey}})})(key_pair);var serialize$1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryReader=e.BinaryWriter=e.BorshError=e.deserialize=e.serialize=e.base_decode=e.base_encode=void 0;var t=lib$c;Object.defineProperty(e,"base_encode",{enumerable:!0,get:function(){return t.baseEncode}}),Object.defineProperty(e,"base_decode",{enumerable:!0,get:function(){return t.baseDecode}}),Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return t.serialize}}),Object.defineProperty(e,"deserialize",{enumerable:!0,get:function(){return t.deserialize}}),Object.defineProperty(e,"BorshError",{enumerable:!0,get:function(){return t.BorshError}}),Object.defineProperty(e,"BinaryWriter",{enumerable:!0,get:function(){return t.BinaryWriter}}),Object.defineProperty(e,"BinaryReader",{enumerable:!0,get:function(){return t.BinaryReader}})})(serialize$1);var web={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchJson=void 0;var t=lib$8;Object.defineProperty(e,"fetchJson",{enumerable:!0,get:function(){return t.fetchJson}})})(web);var enums={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Enum=e.Assignable=void 0;var t=lib$b;Object.defineProperty(e,"Assignable",{enumerable:!0,get:function(){return t.Assignable}});class r{constructor(a){if(Object.keys(a).length!==1)throw new Error("Enum can only take single value");Object.keys(a).map(o=>{this[o]=a[o],this.enum=o})}}e.Enum=r})(enums);var format$3={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseNearAmount=e.formatNearAmount=e.NEAR_NOMINATION_EXP=e.NEAR_NOMINATION=void 0;var t=lib$9;Object.defineProperty(e,"NEAR_NOMINATION",{enumerable:!0,get:function(){return t.NEAR_NOMINATION}}),Object.defineProperty(e,"NEAR_NOMINATION_EXP",{enumerable:!0,get:function(){return t.NEAR_NOMINATION_EXP}}),Object.defineProperty(e,"formatNearAmount",{enumerable:!0,get:function(){return t.formatNearAmount}}),Object.defineProperty(e,"parseNearAmount",{enumerable:!0,get:function(){return t.parseNearAmount}})})(format$3);var rpc_errors={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServerError=e.getErrorTypeFromErrorMessage=e.formatError=e.parseResultError=e.parseRpcError=void 0;var t=lib$9;Object.defineProperty(e,"parseRpcError",{enumerable:!0,get:function(){return t.parseRpcError}}),Object.defineProperty(e,"parseResultError",{enumerable:!0,get:function(){return t.parseResultError}}),Object.defineProperty(e,"formatError",{enumerable:!0,get:function(){return t.formatError}}),Object.defineProperty(e,"getErrorTypeFromErrorMessage",{enumerable:!0,get:function(){return t.getErrorTypeFromErrorMessage}}),Object.defineProperty(e,"ServerError",{enumerable:!0,get:function(){return t.ServerError}})})(rpc_errors);var errors$2={},lib$6={},account$1={},define_process_env_default={},__awaiter$8=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})},__importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(account$1,"__esModule",{value:!0});account$1.Account=void 0;const crypto_1$3=lib$d,providers_1$3=lib$8,transactions_1$3=lib$7,types_1$4=lib$b,utils_1$2=lib$9,bn_js_1$5=__importDefault$6(bnExports),borsh_1$1=lib$c,{addKey:addKey$1,createAccount,deleteAccount,deleteKey:deleteKey$1,deployContract:deployContract$2,fullAccessKey:fullAccessKey$1,functionCall:functionCall$2,functionCallAccessKey:functionCallAccessKey$1,stake,transfer}=transactions_1$3.actionCreators,TX_NONCE_RETRY_NUMBER=12,TX_NONCE_RETRY_WAIT=500,TX_NONCE_RETRY_WAIT_BACKOFF=1.5;function parseJsonFromRawResponse(e){return JSON.parse(Buffer.from(e).toString())}function bytesJsonStringify(e){return Buffer.from(JSON.stringify(e))}class Account{constructor(t,r){this.accessKeyByPublicKeyCache={},this.connection=t,this.accountId=r}state(){return __awaiter$8(this,void 0,void 0,function*(){return this.connection.provider.query({request_type:"view_account",account_id:this.accountId,finality:"optimistic"})})}signTransaction(t,r){return __awaiter$8(this,void 0,void 0,function*(){const n=yield this.findAccessKey(t,r);if(!n)throw new types_1$4.TypedError(`Can not sign transactions for account ${this.accountId} on network ${this.connection.networkId}, no matching key pair exists for this account`,"KeyNotFound");const{accessKey:a}=n,s=(yield this.connection.provider.block({finality:"final"})).header.hash,u=a.nonce.add(new bn_js_1$5.default(1));return yield(0,transactions_1$3.signTransaction)(t,u,r,(0,borsh_1$1.baseDecode)(s),this.connection.signer,this.accountId,this.connection.networkId)})}signAndSendTransaction({receiverId:t,actions:r,returnError:n}){return __awaiter$8(this,void 0,void 0,function*(){let a,o;const s=yield(0,providers_1$3.exponentialBackoff)(TX_NONCE_RETRY_WAIT,TX_NONCE_RETRY_NUMBER,TX_NONCE_RETRY_WAIT_BACKOFF,()=>__awaiter$8(this,void 0,void 0,function*(){[a,o]=yield this.signTransaction(t,r);const u=o.transaction.publicKey;try{return yield this.connection.provider.sendTransaction(o)}catch(_){if(_.type==="InvalidNonce")return(0,utils_1$2.logWarning)(`Retrying transaction ${t}:${(0,borsh_1$1.baseEncode)(a)} with new nonce.`),delete this.accessKeyByPublicKeyCache[u.toString()],null;if(_.type==="Expired")return(0,utils_1$2.logWarning)(`Retrying transaction ${t}:${(0,borsh_1$1.baseEncode)(a)} due to expired block hash`),null;throw _.context=new types_1$4.ErrorContext((0,borsh_1$1.baseEncode)(a)),_}}));if(!s)throw new types_1$4.TypedError("nonce retries exceeded for transaction. This usually means there are too many parallel requests with the same access key.","RetriesExceeded");if((0,utils_1$2.printTxOutcomeLogsAndFailures)({contractId:o.transaction.receiverId,outcome:s}),!n&&typeof s.status=="object"&&typeof s.status.Failure=="object"&&s.status.Failure!==null)throw s.status.Failure.error_message&&s.status.Failure.error_type?new types_1$4.TypedError(`Transaction ${s.transaction_outcome.id} failed. ${s.status.Failure.error_message}`,s.status.Failure.error_type):(0,utils_1$2.parseResultError)(s);return s})}findAccessKey(t,r){return __awaiter$8(this,void 0,void 0,function*(){const n=yield this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);if(!n)throw new types_1$4.TypedError(`no matching key pair found in ${this.connection.signer}`,"PublicKeyNotFound");const a=this.accessKeyByPublicKeyCache[n.toString()];if(a!==void 0)return{publicKey:n,accessKey:a};try{const o=yield this.connection.provider.query({request_type:"view_access_key",account_id:this.accountId,public_key:n.toString(),finality:"optimistic"}),s=Object.assign(Object.assign({},o),{nonce:new bn_js_1$5.default(o.nonce)});return this.accessKeyByPublicKeyCache[n.toString()]?{publicKey:n,accessKey:this.accessKeyByPublicKeyCache[n.toString()]}:(this.accessKeyByPublicKeyCache[n.toString()]=s,{publicKey:n,accessKey:s})}catch(o){if(o.type=="AccessKeyDoesNotExist")return null;throw o}})}createAndDeployContract(t,r,n,a){return __awaiter$8(this,void 0,void 0,function*(){const o=fullAccessKey$1();return yield this.signAndSendTransaction({receiverId:t,actions:[createAccount(),transfer(a),addKey$1(crypto_1$3.PublicKey.from(r),o),deployContract$2(n)]}),new Account(this.connection,t)})}sendMoney(t,r){return __awaiter$8(this,void 0,void 0,function*(){return this.signAndSendTransaction({receiverId:t,actions:[transfer(r)]})})}createAccount(t,r,n){return __awaiter$8(this,void 0,void 0,function*(){const a=fullAccessKey$1();return this.signAndSendTransaction({receiverId:t,actions:[createAccount(),transfer(n),addKey$1(crypto_1$3.PublicKey.from(r),a)]})})}deleteAccount(t){return __awaiter$8(this,void 0,void 0,function*(){return define_process_env_default.NEAR_NO_LOGS||console.log("Deleting an account does not automatically transfer NFTs and FTs to the beneficiary address. Ensure to transfer assets before deleting."),this.signAndSendTransaction({receiverId:this.accountId,actions:[deleteAccount(t)]})})}deployContract(t){return __awaiter$8(this,void 0,void 0,function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[deployContract$2(t)]})})}encodeJSContractArgs(t,r,n){return Buffer.concat([Buffer.from(t),Buffer.from([0]),Buffer.from(r),Buffer.from([0]),Buffer.from(n)])}functionCall({contractId:t,methodName:r,args:n={},gas:a=utils_1$2.DEFAULT_FUNCTION_CALL_GAS,attachedDeposit:o,walletMeta:s,walletCallbackUrl:u,stringify:_,jsContract:v}){return __awaiter$8(this,void 0,void 0,function*(){this.validateArgs(n);let g;if(v)g=["call_js_contract",this.encodeJSContractArgs(t,r,JSON.stringify(n)),a,o,null,!0];else{const S=_===void 0?transactions_1$3.stringifyJsonOrBytes:_;g=[r,n,a,o,S,!1]}return this.signAndSendTransaction({receiverId:v?this.connection.jsvmAccountId:t,actions:[functionCall$2.apply(void 0,g)],walletMeta:s,walletCallbackUrl:u})})}addKey(t,r,n,a){return __awaiter$8(this,void 0,void 0,function*(){n||(n=[]),Array.isArray(n)||(n=[n]);let o;return r?o=functionCallAccessKey$1(r,n,a):o=fullAccessKey$1(),this.signAndSendTransaction({receiverId:this.accountId,actions:[addKey$1(crypto_1$3.PublicKey.from(t),o)]})})}deleteKey(t){return __awaiter$8(this,void 0,void 0,function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[deleteKey$1(crypto_1$3.PublicKey.from(t))]})})}stake(t,r){return __awaiter$8(this,void 0,void 0,function*(){return this.signAndSendTransaction({receiverId:this.accountId,actions:[stake(r,crypto_1$3.PublicKey.from(t))]})})}signedDelegate({actions:t,blockHeightTtl:r,receiverId:n}){return __awaiter$8(this,void 0,void 0,function*(){const{provider:a,signer:o}=this.connection,{header:s}=yield a.block({finality:"final"}),{accessKey:u,publicKey:_}=yield this.findAccessKey(null,null),v=(0,transactions_1$3.buildDelegateAction)({actions:t,maxBlockHeight:new bn_js_1$5.default(s.height).add(new bn_js_1$5.default(r)),nonce:new bn_js_1$5.default(u.nonce).add(new bn_js_1$5.default(1)),publicKey:_,receiverId:n,senderId:this.accountId}),{signedDelegateAction:g}=yield(0,transactions_1$3.signDelegateAction)({delegateAction:v,signer:{sign:S=>__awaiter$8(this,void 0,void 0,function*(){const{signature:U}=yield o.signMessage(S,v.senderId,this.connection.networkId);return U})}});return g})}validateArgs(t){if(!(t.byteLength!==void 0&&t.byteLength===t.length)&&(Array.isArray(t)||typeof t!="object"))throw new types_1$4.PositionalArgsError}viewFunction({contractId:t,methodName:r,args:n={},parse:a=parseJsonFromRawResponse,stringify:o=bytesJsonStringify,jsContract:s=!1,blockQuery:u={finality:"optimistic"}}){return __awaiter$8(this,void 0,void 0,function*(){let _;this.validateArgs(n),s?_=this.encodeJSContractArgs(t,r,Object.keys(n).length>0?JSON.stringify(n):""):_=o(n);const v=yield this.connection.provider.query(Object.assign(Object.assign({request_type:"call_function"},u),{account_id:s?this.connection.jsvmAccountId:t,method_name:s?"view_js_contract":r,args_base64:_.toString("base64")}));return v.logs&&(0,utils_1$2.printTxOutcomeLogs)({contractId:t,logs:v.logs}),v.result&&v.result.length>0&&a(Buffer.from(v.result))})}viewState(t,r={finality:"optimistic"}){return __awaiter$8(this,void 0,void 0,function*(){const{values:n}=yield this.connection.provider.query(Object.assign(Object.assign({request_type:"view_state"},r),{account_id:this.accountId,prefix_base64:Buffer.from(t).toString("base64")}));return n.map(({key:a,value:o})=>({key:Buffer.from(a,"base64"),value:Buffer.from(o,"base64")}))})}getAccessKeys(){var t;return __awaiter$8(this,void 0,void 0,function*(){const r=yield this.connection.provider.query({request_type:"view_access_key_list",account_id:this.accountId,finality:"optimistic"});return(t=r==null?void 0:r.keys)===null||t===void 0?void 0:t.map(n=>Object.assign(Object.assign({},n),{access_key:Object.assign(Object.assign({},n.access_key),{nonce:new bn_js_1$5.default(n.access_key.nonce)})}))})}getAccountDetails(){return __awaiter$8(this,void 0,void 0,function*(){return{authorizedApps:(yield this.getAccessKeys()).filter(n=>n.access_key.permission!=="FullAccess").map(n=>{const a=n.access_key.permission;return{contractId:a.FunctionCall.receiver_id,amount:a.FunctionCall.allowance,publicKey:n.public_key}})}})}getAccountBalance(){return __awaiter$8(this,void 0,void 0,function*(){const t=yield this.connection.provider.experimental_protocolConfig({finality:"final"}),r=yield this.state(),n=new bn_js_1$5.default(t.runtime_config.storage_amount_per_byte),a=new bn_js_1$5.default(r.storage_usage).mul(n),o=new bn_js_1$5.default(r.locked),s=new bn_js_1$5.default(r.amount).add(o),u=s.sub(bn_js_1$5.default.max(o,a));return{total:s.toString(),stateStaked:a.toString(),staked:o.toString(),available:u.toString()}})}getActiveDelegatedStakeBalance(){return __awaiter$8(this,void 0,void 0,function*(){const t=yield this.connection.provider.block({finality:"final"}),r=t.header.hash,n=t.header.epoch_id,{current_validators:a,next_validators:o,current_proposals:s}=yield this.connection.provider.validators(n),u=new Set;[...a,...o,...s].forEach(k=>u.add(k.account_id));const _=[...u],v=_.map(k=>this.viewFunction({contractId:k,methodName:"get_account_total_balance",args:{account_id:this.accountId},blockQuery:{blockId:r}})),g=yield Promise.allSettled(v);if(g.some(k=>k.status==="rejected"&&k.reason.type==="TimeoutError"))throw new Error("Failed to get delegated stake balance");const U=g.reduce((k,B,D)=>{const L=_[D];if(B.status==="fulfilled"){const R=new bn_js_1$5.default(B.value);if(!R.isZero())return Object.assign(Object.assign({},k),{stakedValidators:[...k.stakedValidators,{validatorId:L,amount:R.toString()}],total:k.total.add(R)})}return B.status==="rejected"?Object.assign(Object.assign({},k),{failedValidators:[...k.failedValidators,{validatorId:L,error:B.reason}]}):k},{stakedValidators:[],failedValidators:[],total:new bn_js_1$5.default(0)});return Object.assign(Object.assign({},U),{total:U.total.toString()})})}}account$1.Account=Account;var account_2fa={},account_multisig$1={},constants={},__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(constants,"__esModule",{value:!0});constants.MULTISIG_CONFIRM_METHODS=constants.MULTISIG_CHANGE_METHODS=constants.MULTISIG_DEPOSIT=constants.MULTISIG_GAS=constants.MULTISIG_ALLOWANCE=constants.MULTISIG_STORAGE_KEY=void 0;const utils_1$1=lib$9,bn_js_1$4=__importDefault$5(bnExports);constants.MULTISIG_STORAGE_KEY="__multisigRequest";constants.MULTISIG_ALLOWANCE=new bn_js_1$4.default((0,utils_1$1.parseNearAmount)("1"));constants.MULTISIG_GAS=new bn_js_1$4.default("100000000000000");constants.MULTISIG_DEPOSIT=new bn_js_1$4.default("0");constants.MULTISIG_CHANGE_METHODS=["add_request","add_request_and_confirm","delete_request","confirm"];constants.MULTISIG_CONFIRM_METHODS=["confirm"];var types$1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=void 0,function(t){t.CANNOT_DESERIALIZE_STATE="Cannot deserialize the contract state",t.MULTISIG_NOT_INITIALIZED="Smart contract panicked: Multisig contract should be initialized before usage",t.NO_SUCH_REQUEST="Smart contract panicked: panicked at 'No such request: either wrong number or already confirmed'",t.REQUEST_COOLDOWN_ERROR="Request cannot be deleted immediately after creation.",t.METHOD_NOT_FOUND="Contract method is not found"}(e.MultisigDeleteRequestRejectionError||(e.MultisigDeleteRequestRejectionError={})),function(t){t[t.INVALID_STATE=0]="INVALID_STATE",t[t.STATE_NOT_INITIALIZED=1]="STATE_NOT_INITIALIZED",t[t.VALID_STATE=2]="VALID_STATE",t[t.UNKNOWN_STATE=3]="UNKNOWN_STATE"}(e.MultisigStateStatus||(e.MultisigStateStatus={}))})(types$1);var __awaiter$7=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})};Object.defineProperty(account_multisig$1,"__esModule",{value:!0});account_multisig$1.AccountMultisig=void 0;const transactions_1$2=lib$7,account_1=account$1,constants_1$1=constants,types_1$3=types$1,{deployContract:deployContract$1,functionCall:functionCall$1}=transactions_1$2.actionCreators;var MultisigCodeStatus;(function(e){e[e.INVALID_CODE=0]="INVALID_CODE",e[e.VALID_CODE=1]="VALID_CODE",e[e.UNKNOWN_CODE=2]="UNKNOWN_CODE"})(MultisigCodeStatus||(MultisigCodeStatus={}));const storageFallback={[constants_1$1.MULTISIG_STORAGE_KEY]:null};class AccountMultisig extends account_1.Account{constructor(t,r,n){super(t,r),this.storage=n.storage,this.onAddRequestResult=n.onAddRequestResult}signAndSendTransactionWithAccount(t,r){const n=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return __awaiter$7(this,void 0,void 0,function*(){return n.signAndSendTransaction.call(this,{receiverId:t,actions:r})})}signAndSendTransaction({receiverId:t,actions:r}){const n=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return __awaiter$7(this,void 0,void 0,function*(){const{accountId:a}=this,o=Buffer.from(JSON.stringify({request:{receiver_id:t,actions:convertActions(r,a,t)}}));let s;try{s=yield n.signAndSendTransaction.call(this,{receiverId:a,actions:[functionCall$1("add_request_and_confirm",o,constants_1$1.MULTISIG_GAS,constants_1$1.MULTISIG_DEPOSIT)]})}catch(_){if(_.toString().includes("Account has too many active requests. Confirm or delete some"))return yield this.deleteUnconfirmedRequests(),yield this.signAndSendTransaction({receiverId:t,actions:r});throw _}if(!s.status)throw new Error("Request failed");const u=Object.assign({},s.status);if(!u.SuccessValue||typeof u.SuccessValue!="string")throw new Error("Request failed");return this.setRequest({accountId:a,actions:r,requestId:parseInt(Buffer.from(u.SuccessValue,"base64").toString("ascii"),10)}),this.onAddRequestResult&&(yield this.onAddRequestResult(s)),this.deleteUnconfirmedRequests(),s})}checkMultisigCodeAndStateStatus(t){const r=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return __awaiter$7(this,void 0,void 0,function*(){const a=t?MultisigCodeStatus.UNKNOWN_CODE:MultisigCodeStatus.VALID_CODE;try{return t?yield r.signAndSendTransaction.call(this,{receiverId:this.accountId,actions:[deployContract$1(t),functionCall$1("delete_request",{request_id:4294967295},constants_1$1.MULTISIG_GAS,constants_1$1.MULTISIG_DEPOSIT)]}):yield this.deleteRequest(4294967295),{codeStatus:MultisigCodeStatus.VALID_CODE,stateStatus:types_1$3.MultisigStateStatus.VALID_STATE}}catch(o){if(new RegExp(types_1$3.MultisigDeleteRequestRejectionError.CANNOT_DESERIALIZE_STATE).test(o&&o.kind&&o.kind.ExecutionError))return{codeStatus:a,stateStatus:types_1$3.MultisigStateStatus.INVALID_STATE};if(new RegExp(types_1$3.MultisigDeleteRequestRejectionError.MULTISIG_NOT_INITIALIZED).test(o&&o.kind&&o.kind.ExecutionError))return{codeStatus:a,stateStatus:types_1$3.MultisigStateStatus.STATE_NOT_INITIALIZED};if(new RegExp(types_1$3.MultisigDeleteRequestRejectionError.NO_SUCH_REQUEST).test(o&&o.kind&&o.kind.ExecutionError))return{codeStatus:a,stateStatus:types_1$3.MultisigStateStatus.VALID_STATE};if(new RegExp(types_1$3.MultisigDeleteRequestRejectionError.METHOD_NOT_FOUND).test(o&&o.message))return{codeStatus:MultisigCodeStatus.INVALID_CODE,stateStatus:types_1$3.MultisigStateStatus.UNKNOWN_STATE};throw o}})}deleteRequest(t){return super.signAndSendTransaction({receiverId:this.accountId,actions:[functionCall$1("delete_request",{request_id:t},constants_1$1.MULTISIG_GAS,constants_1$1.MULTISIG_DEPOSIT)]})}deleteAllRequests(){return __awaiter$7(this,void 0,void 0,function*(){const t=yield this.getRequestIds();t.length&&(yield Promise.all(t.map(r=>this.deleteRequest(r))))})}deleteUnconfirmedRequests(){const t=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return __awaiter$7(this,void 0,void 0,function*(){const r=yield this.getRequestIds(),{requestId:n}=this.getRequest();for(const a of r)if(a!=n)try{yield t.signAndSendTransaction.call(this,{receiverId:this.accountId,actions:[functionCall$1("delete_request",{request_id:a},constants_1$1.MULTISIG_GAS,constants_1$1.MULTISIG_DEPOSIT)]})}catch{console.warn("Attempt to delete an earlier request before 15 minutes failed. Will try again.")}})}getRequestIds(){return __awaiter$7(this,void 0,void 0,function*(){return this.viewFunction({contractId:this.accountId,methodName:"list_request_ids"})})}getRequest(){return this.storage?JSON.parse(this.storage.getItem(constants_1$1.MULTISIG_STORAGE_KEY)||"{}"):storageFallback[constants_1$1.MULTISIG_STORAGE_KEY]}setRequest(t){if(this.storage)return this.storage.setItem(constants_1$1.MULTISIG_STORAGE_KEY,JSON.stringify(t));storageFallback[constants_1$1.MULTISIG_STORAGE_KEY]=t}}account_multisig$1.AccountMultisig=AccountMultisig;const convertPKForContract=e=>e.toString().replace("ed25519:",""),convertActions=(e,t,r)=>e.map(n=>{const a=n.enum,{gas:o,publicKey:s,methodName:u,args:_,deposit:v,accessKey:g,code:S}=n[a],U={type:a[0].toUpperCase()+a.substr(1),gas:o&&o.toString()||void 0,public_key:s&&convertPKForContract(s)||void 0,method_name:u,args:_&&Buffer.from(_).toString("base64")||void 0,code:S&&Buffer.from(S).toString("base64")||void 0,amount:v&&v.toString()||void 0,deposit:v&&v.toString()||"0",permission:void 0};if(g&&(r===t&&g.permission.enum!=="fullAccess"&&(U.permission={receiver_id:t,allowance:constants_1$1.MULTISIG_ALLOWANCE.toString(),method_names:constants_1$1.MULTISIG_CHANGE_METHODS}),g.permission.enum==="functionCall")){const{receiverId:k,methodNames:B,allowance:D}=g.permission.functionCall;U.permission={receiver_id:k,allowance:D&&D.toString()||void 0,method_names:B}}return U});var __awaiter$6=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})},__importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(account_2fa,"__esModule",{value:!0});account_2fa.Account2FA=void 0;const crypto_1$2=lib$d,types_1$2=lib$b,providers_1$2=lib$8,transactions_1$1=lib$7,bn_js_1$3=__importDefault$4(bnExports),account_multisig_1=account_multisig$1,constants_1=constants,types_2=types$1,{addKey,deleteKey,deployContract,fullAccessKey,functionCall,functionCallAccessKey}=transactions_1$1.actionCreators;class Account2FA extends account_multisig_1.AccountMultisig{constructor(t,r,n){super(t,r,n),this.helperUrl="https://helper.testnet.near.org",this.helperUrl=n.helperUrl||this.helperUrl,this.storage=n.storage,this.sendCode=n.sendCode||this.sendCodeDefault,this.getCode=n.getCode||this.getCodeDefault,this.verifyCode=n.verifyCode||this.verifyCodeDefault,this.onConfirmResult=n.onConfirmResult}signAndSendTransaction({receiverId:t,actions:r}){const n=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return __awaiter$6(this,void 0,void 0,function*(){yield n.signAndSendTransaction.call(this,{receiverId:t,actions:r}),yield this.sendCode();const a=yield this.promptAndVerify();return this.onConfirmResult&&(yield this.onConfirmResult(a)),a})}deployMultisig(t){const r=Object.create(null,{signAndSendTransactionWithAccount:{get:()=>super.signAndSendTransactionWithAccount}});return __awaiter$6(this,void 0,void 0,function*(){const{accountId:n}=this,a=(yield this.getRecoveryMethods()).data.filter(({kind:S,publicKey:U})=>(S==="phrase"||S==="ledger")&&U!==null).map(S=>S.publicKey),o=(yield this.getAccessKeys()).filter(({public_key:S,access_key:{permission:U}})=>U==="FullAccess"&&!a.includes(S)).map(S=>S.public_key).map(toPK),s=toPK((yield this.postSignedJson("/2fa/getAccessKey",{accountId:n})).publicKey),u=Buffer.from(JSON.stringify({num_confirmations:2})),_=[...o.map(S=>deleteKey(S)),...o.map(S=>addKey(S,functionCallAccessKey(n,constants_1.MULTISIG_CHANGE_METHODS,null))),addKey(s,functionCallAccessKey(n,constants_1.MULTISIG_CONFIRM_METHODS,null)),deployContract(t)],v=_.concat(functionCall("new",u,constants_1.MULTISIG_GAS,constants_1.MULTISIG_DEPOSIT));console.log("deploying multisig contract for",n);const{stateStatus:g}=yield this.checkMultisigCodeAndStateStatus(t);switch(g){case types_2.MultisigStateStatus.STATE_NOT_INITIALIZED:return yield r.signAndSendTransactionWithAccount.call(this,n,v);case types_2.MultisigStateStatus.VALID_STATE:return yield r.signAndSendTransactionWithAccount.call(this,n,_);case types_2.MultisigStateStatus.INVALID_STATE:throw new types_1$2.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState");default:throw new types_1$2.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown")}})}disableWithFAK({contractBytes:t,cleanupContractBytes:r}){return __awaiter$6(this,void 0,void 0,function*(){let n=[];r&&(yield this.deleteAllRequests().catch(u=>u),n=yield this.get2faDisableCleanupActions(r));const a=yield this.get2faDisableKeyConversionActions(),o=[...n,...a,deployContract(t)],s=yield this.findAccessKey(this.accountId,o);if(s&&s.accessKey&&s.accessKey.permission!=="FullAccess")throw new types_1$2.TypedError("No full access key found in keystore. Unable to bypass multisig","NoFAKFound");return this.signAndSendTransactionWithAccount(this.accountId,o)})}get2faDisableCleanupActions(t){return __awaiter$6(this,void 0,void 0,function*(){const r=yield this.viewState("").catch(a=>{const o=a.cause&&a.cause.name;if(o=="NO_CONTRACT_CODE")return[];throw o=="TOO_LARGE_CONTRACT_STATE"?new types_1$2.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account has existing state.`,"ContractHasExistingState"):a}),n=r.map(({key:a})=>a.toString("base64"));return r.length?[deployContract(t),functionCall("clean",{keys:n},constants_1.MULTISIG_GAS,new bn_js_1$3.default("0"))]:[]})}get2faDisableKeyConversionActions(){return __awaiter$6(this,void 0,void 0,function*(){const{accountId:t}=this,n=(yield this.getAccessKeys()).filter(({access_key:o})=>o.permission!=="FullAccess").filter(({access_key:o})=>{const s=o.permission.FunctionCall;return s.receiver_id===t&&s.method_names.length===4&&s.method_names.includes("add_request_and_confirm")}),a=crypto_1$2.PublicKey.from((yield this.postSignedJson("/2fa/getAccessKey",{accountId:t})).publicKey);return[deleteKey(a),...n.map(({public_key:o})=>deleteKey(crypto_1$2.PublicKey.from(o))),...n.map(({public_key:o})=>addKey(crypto_1$2.PublicKey.from(o),fullAccessKey()))]})}disable(t,r){return __awaiter$6(this,void 0,void 0,function*(){const{stateStatus:n}=yield this.checkMultisigCodeAndStateStatus();if(n!==types_2.MultisigStateStatus.VALID_STATE&&n!==types_2.MultisigStateStatus.STATE_NOT_INITIALIZED)throw new types_1$2.TypedError(`Can not deploy a contract to account ${this.accountId} on network ${this.connection.networkId}, the account state could not be verified.`,"ContractStateUnknown");let a;yield this.deleteAllRequests().catch(u=>a=u);const s=[...yield this.get2faDisableCleanupActions(r).catch(u=>{throw u.type==="ContractHasExistingState"&&a||u}),...yield this.get2faDisableKeyConversionActions(),deployContract(t)];return console.log("disabling 2fa for",this.accountId),yield this.signAndSendTransaction({receiverId:this.accountId,actions:s})})}sendCodeDefault(){return __awaiter$6(this,void 0,void 0,function*(){const{accountId:t}=this,{requestId:r}=this.getRequest(),n=yield this.get2faMethod();return yield this.postSignedJson("/2fa/send",{accountId:t,method:n,requestId:r}),r})}getCodeDefault(){return __awaiter$6(this,void 0,void 0,function*(){throw new Error('There is no getCode callback provided. Please provide your own in AccountMultisig constructor options. It has a parameter method where method.kind is "email" or "phone".')})}promptAndVerify(){return __awaiter$6(this,void 0,void 0,function*(){const t=yield this.get2faMethod(),r=yield this.getCode(t);try{return yield this.verifyCode(r)}catch(n){if(console.warn("Error validating security code:",n),n.toString().includes("invalid 2fa code provided")||n.toString().includes("2fa code not valid"))return yield this.promptAndVerify();throw n}})}verifyCodeDefault(t){return __awaiter$6(this,void 0,void 0,function*(){const{accountId:r}=this,n=this.getRequest();if(!n)throw new Error("no request pending");const{requestId:a}=n;return yield this.postSignedJson("/2fa/verify",{accountId:r,securityCode:t,requestId:a})})}getRecoveryMethods(){return __awaiter$6(this,void 0,void 0,function*(){const{accountId:t}=this;return{accountId:t,data:yield this.postSignedJson("/account/recoveryMethods",{accountId:t})}})}get2faMethod(){return __awaiter$6(this,void 0,void 0,function*(){let{data:t}=yield this.getRecoveryMethods();if(t&&t.length&&(t=t.find(a=>a.kind.indexOf("2fa-")===0)),!t)return null;const{kind:r,detail:n}=t;return{kind:r,detail:n}})}signatureFor(){return __awaiter$6(this,void 0,void 0,function*(){const{accountId:t}=this,n=(yield this.connection.provider.block({finality:"final"})).header.height.toString(),a=yield this.connection.signer.signMessage(Buffer.from(n),t,this.connection.networkId),o=Buffer.from(a.signature).toString("base64");return{blockNumber:n,blockNumberSignature:o}})}postSignedJson(t,r){return __awaiter$6(this,void 0,void 0,function*(){return yield(0,providers_1$2.fetchJson)(this.helperUrl+t,JSON.stringify(Object.assign(Object.assign({},r),yield this.signatureFor())))})}}account_2fa.Account2FA=Account2FA;const toPK=e=>crypto_1$2.PublicKey.from(e);var account_creator$1={},__awaiter$5=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})};Object.defineProperty(account_creator$1,"__esModule",{value:!0});account_creator$1.UrlAccountCreator=account_creator$1.LocalAccountCreator=account_creator$1.AccountCreator=void 0;const providers_1$1=lib$8;class AccountCreator{}account_creator$1.AccountCreator=AccountCreator;class LocalAccountCreator extends AccountCreator{constructor(t,r){super(),this.masterAccount=t,this.initialBalance=r}createAccount(t,r){return __awaiter$5(this,void 0,void 0,function*(){yield this.masterAccount.createAccount(t,r,this.initialBalance)})}}account_creator$1.LocalAccountCreator=LocalAccountCreator;class UrlAccountCreator extends AccountCreator{constructor(t,r){super(),this.connection=t,this.helperUrl=r}createAccount(t,r){return __awaiter$5(this,void 0,void 0,function*(){yield(0,providers_1$1.fetchJson)(`${this.helperUrl}/account`,JSON.stringify({newAccountId:t,newAccountPublicKey:r.toString()}))})}}account_creator$1.UrlAccountCreator=UrlAccountCreator;var connection$1={},lib$5={},in_memory_signer={},signer$1={};Object.defineProperty(signer$1,"__esModule",{value:!0});signer$1.Signer=void 0;class Signer{}signer$1.Signer=Signer;var __awaiter$4=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})},__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(in_memory_signer,"__esModule",{value:!0});in_memory_signer.InMemorySigner=void 0;const crypto_1$1=lib$d,keystores_1=lib$e,js_sha256_1=__importDefault$3(sha256Exports),signer_1=signer$1;class InMemorySigner extends signer_1.Signer{constructor(t){super(),this.keyStore=t}static fromKeyPair(t,r,n){return __awaiter$4(this,void 0,void 0,function*(){const a=new keystores_1.InMemoryKeyStore;return yield a.setKey(t,r,n),new InMemorySigner(a)})}createKey(t,r){return __awaiter$4(this,void 0,void 0,function*(){const n=crypto_1$1.KeyPair.fromRandom("ed25519");return yield this.keyStore.setKey(r,t,n),n.getPublicKey()})}getPublicKey(t,r){return __awaiter$4(this,void 0,void 0,function*(){const n=yield this.keyStore.getKey(r,t);return n===null?null:n.getPublicKey()})}signMessage(t,r,n){return __awaiter$4(this,void 0,void 0,function*(){const a=new Uint8Array(js_sha256_1.default.sha256.array(t));if(!r)throw new Error("InMemorySigner requires provided account id");const o=yield this.keyStore.getKey(n,r);if(o===null)throw new Error(`Key for ${r} not found in ${n}`);return o.sign(a)})}toString(){return`InMemorySigner(${this.keyStore})`}}in_memory_signer.InMemorySigner=InMemorySigner;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Signer=e.InMemorySigner=void 0;var t=in_memory_signer;Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return t.InMemorySigner}});var r=signer$1;Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return r.Signer}})})(lib$5);Object.defineProperty(connection$1,"__esModule",{value:!0});connection$1.Connection=void 0;const signers_1=lib$5,providers_1=lib$8;function getProvider(e){switch(e.type){case void 0:return e;case"JsonRpcProvider":return new providers_1.JsonRpcProvider(Object.assign({},e.args));default:throw new Error(`Unknown provider type ${e.type}`)}}function getSigner(e){switch(e.type){case void 0:return e;case"InMemorySigner":return new signers_1.InMemorySigner(e.keyStore);default:throw new Error(`Unknown signer type ${e.type}`)}}class Connection{constructor(t,r,n,a){this.networkId=t,this.provider=r,this.signer=n,this.jsvmAccountId=a}static fromConfig(t){const r=getProvider(t.provider),n=getSigner(t.signer);return new Connection(t.networkId,r,n,t.jsvmAccountId)}}connection$1.Connection=Connection;var contract$1={},ajv={exports:{}},core$2={},validate={},boolSchema={},errors$1={},codegen={},code$1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(G){if(super(),!e.IDENTIFIER.test(G))throw new Error("CodeGen: name must be a valid identifier");this.str=G}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(G){super(),this._items=typeof G=="string"?[G]:G}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const G=this._items[0];return G===""||G==='""'}get str(){var G;return(G=this._str)!==null&&G!==void 0?G:this._str=this._items.reduce((J,ee)=>`${J}${ee}`,"")}get names(){var G;return(G=this._names)!==null&&G!==void 0?G:this._names=this._items.reduce((J,ee)=>(ee instanceof r&&(J[ee.str]=(J[ee.str]||0)+1),J),{})}}e._Code=n,e.nil=new n("");function a(R,...G){const J=[R[0]];let ee=0;for(;ee<G.length;)u(J,G[ee]),J.push(R[++ee]);return new n(J)}e._=a;const o=new n("+");function s(R,...G){const J=[k(R[0])];let ee=0;for(;ee<G.length;)J.push(o),u(J,G[ee]),J.push(o,k(R[++ee]));return _(J),new n(J)}e.str=s;function u(R,G){G instanceof n?R.push(...G._items):G instanceof r?R.push(G):R.push(S(G))}e.addCodeArg=u;function _(R){let G=1;for(;G<R.length-1;){if(R[G]===o){const J=v(R[G-1],R[G+1]);if(J!==void 0){R.splice(G-1,3,J);continue}R[G++]="+"}G++}}function v(R,G){if(G==='""')return R;if(R==='""')return G;if(typeof R=="string")return G instanceof r||R[R.length-1]!=='"'?void 0:typeof G!="string"?`${R.slice(0,-1)}${G}"`:G[0]==='"'?R.slice(0,-1)+G.slice(1):void 0;if(typeof G=="string"&&G[0]==='"'&&!(R instanceof r))return`"${R}${G.slice(1)}`}function g(R,G){return G.emptyStr()?R:R.emptyStr()?G:s`${R}${G}`}e.strConcat=g;function S(R){return typeof R=="number"||typeof R=="boolean"||R===null?R:k(Array.isArray(R)?R.join(","):R)}function U(R){return new n(k(R))}e.stringify=U;function k(R){return JSON.stringify(R).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=k;function B(R){return typeof R=="string"&&e.IDENTIFIER.test(R)?new n(`.${R}`):a`[${R}]`}e.getProperty=B;function D(R){if(typeof R=="string"&&e.IDENTIFIER.test(R))return new n(`${R}`);throw new Error(`CodeGen: invalid export name: ${R}, use explicit $id name mapping`)}e.getEsmExportName=D;function L(R){return new n(R.toString())}e.regexpCode=L})(code$1);var scope={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=code$1;class r extends Error{constructor(v){super(`CodeGen: "code" for ${v} not defined`),this.value=v.value}}var n;(function(_){_[_.Started=0]="Started",_[_.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class a{constructor({prefixes:v,parent:g}={}){this._names={},this._prefixes=v,this._parent=g}toName(v){return v instanceof t.Name?v:this.name(v)}name(v){return new t.Name(this._newName(v))}_newName(v){const g=this._names[v]||this._nameGroup(v);return`${v}${g.index++}`}_nameGroup(v){var g,S;if(!((S=(g=this._parent)===null||g===void 0?void 0:g._prefixes)===null||S===void 0)&&S.has(v)||this._prefixes&&!this._prefixes.has(v))throw new Error(`CodeGen: prefix "${v}" is not allowed in this scope`);return this._names[v]={prefix:v,index:0}}}e.Scope=a;class o extends t.Name{constructor(v,g){super(g),this.prefix=v}setValue(v,{property:g,itemIndex:S}){this.value=v,this.scopePath=(0,t._)`.${new t.Name(g)}[${S}]`}}e.ValueScopeName=o;const s=(0,t._)`\n`;class u extends a{constructor(v){super(v),this._values={},this._scope=v.scope,this.opts={...v,_n:v.lines?s:t.nil}}get(){return this._scope}name(v){return new o(v,this._newName(v))}value(v,g){var S;if(g.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const U=this.toName(v),{prefix:k}=U,B=(S=g.key)!==null&&S!==void 0?S:g.ref;let D=this._values[k];if(D){const G=D.get(B);if(G)return G}else D=this._values[k]=new Map;D.set(B,U);const L=this._scope[k]||(this._scope[k]=[]),R=L.length;return L[R]=g.ref,U.setValue(g,{property:k,itemIndex:R}),U}getValue(v,g){const S=this._values[v];if(S)return S.get(g)}scopeRefs(v,g=this._values){return this._reduceValues(g,S=>{if(S.scopePath===void 0)throw new Error(`CodeGen: name "${S}" has no value`);return(0,t._)`${v}${S.scopePath}`})}scopeCode(v=this._values,g,S){return this._reduceValues(v,U=>{if(U.value===void 0)throw new Error(`CodeGen: name "${U}" has no value`);return U.value.code},g,S)}_reduceValues(v,g,S={},U){let k=t.nil;for(const B in v){const D=v[B];if(!D)continue;const L=S[B]=S[B]||new Map;D.forEach(R=>{if(L.has(R))return;L.set(R,n.Started);let G=g(R);if(G){const J=this.opts.es5?e.varKinds.var:e.varKinds.const;k=(0,t._)`${k}${J} ${R} = ${G};${this.opts._n}`}else if(G=U==null?void 0:U(R))k=(0,t._)`${k}${G}${this.opts._n}`;else throw new r(R);L.set(R,n.Completed)})}return k}}e.ValueScope=u})(scope);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=code$1,r=scope;var n=code$1;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var a=scope;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return a.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return a.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return a.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return a.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(x,O){return this}}class s extends o{constructor(x,O,z){super(),this.varKind=x,this.name=O,this.rhs=z}render({es5:x,_n:O}){const z=x?r.varKinds.var:this.varKind,ae=this.rhs===void 0?"":` = ${this.rhs}`;return`${z} ${this.name}${ae};`+O}optimizeNames(x,O){if(x[this.name.str])return this.rhs&&(this.rhs=c(this.rhs,x,O)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class u extends o{constructor(x,O,z){super(),this.lhs=x,this.rhs=O,this.sideEffects=z}render({_n:x}){return`${this.lhs} = ${this.rhs};`+x}optimizeNames(x,O){if(!(this.lhs instanceof t.Name&&!x[this.lhs.str]&&!this.sideEffects))return this.rhs=c(this.rhs,x,O),this}get names(){const x=this.lhs instanceof t.Name?{}:{...this.lhs.names};return M(x,this.rhs)}}class _ extends u{constructor(x,O,z,ae){super(x,z,ae),this.op=O}render({_n:x}){return`${this.lhs} ${this.op}= ${this.rhs};`+x}}class v extends o{constructor(x){super(),this.label=x,this.names={}}render({_n:x}){return`${this.label}:`+x}}class g extends o{constructor(x){super(),this.label=x,this.names={}}render({_n:x}){return`break${this.label?` ${this.label}`:""};`+x}}class S extends o{constructor(x){super(),this.error=x}render({_n:x}){return`throw ${this.error};`+x}get names(){return this.error.names}}class U extends o{constructor(x){super(),this.code=x}render({_n:x}){return`${this.code};`+x}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(x,O){return this.code=c(this.code,x,O),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class k extends o{constructor(x=[]){super(),this.nodes=x}render(x){return this.nodes.reduce((O,z)=>O+z.render(x),"")}optimizeNodes(){const{nodes:x}=this;let O=x.length;for(;O--;){const z=x[O].optimizeNodes();Array.isArray(z)?x.splice(O,1,...z):z?x[O]=z:x.splice(O,1)}return x.length>0?this:void 0}optimizeNames(x,O){const{nodes:z}=this;let ae=z.length;for(;ae--;){const se=z[ae];se.optimizeNames(x,O)||(p(x,se.names),z.splice(ae,1))}return z.length>0?this:void 0}get names(){return this.nodes.reduce((x,O)=>ie(x,O.names),{})}}class B extends k{render(x){return"{"+x._n+super.render(x)+"}"+x._n}}class D extends k{}class L extends B{}L.kind="else";class R extends B{constructor(x,O){super(O),this.condition=x}render(x){let O=`if(${this.condition})`+super.render(x);return this.else&&(O+="else "+this.else.render(x)),O}optimizeNodes(){super.optimizeNodes();const x=this.condition;if(x===!0)return this.nodes;let O=this.else;if(O){const z=O.optimizeNodes();O=this.else=Array.isArray(z)?new L(z):z}if(O)return x===!1?O instanceof R?O:O.nodes:this.nodes.length?this:new R(E(x),O instanceof R?[O]:O.nodes);if(!(x===!1||!this.nodes.length))return this}optimizeNames(x,O){var z;if(this.else=(z=this.else)===null||z===void 0?void 0:z.optimizeNames(x,O),!!(super.optimizeNames(x,O)||this.else))return this.condition=c(this.condition,x,O),this}get names(){const x=super.names;return M(x,this.condition),this.else&&ie(x,this.else.names),x}}R.kind="if";class G extends B{}G.kind="for";class J extends G{constructor(x){super(),this.iteration=x}render(x){return`for(${this.iteration})`+super.render(x)}optimizeNames(x,O){if(super.optimizeNames(x,O))return this.iteration=c(this.iteration,x,O),this}get names(){return ie(super.names,this.iteration.names)}}class ee extends G{constructor(x,O,z,ae){super(),this.varKind=x,this.name=O,this.from=z,this.to=ae}render(x){const O=x.es5?r.varKinds.var:this.varKind,{name:z,from:ae,to:se}=this;return`for(${O} ${z}=${ae}; ${z}<${se}; ${z}++)`+super.render(x)}get names(){const x=M(super.names,this.from);return M(x,this.to)}}class re extends G{constructor(x,O,z,ae){super(),this.loop=x,this.varKind=O,this.name=z,this.iterable=ae}render(x){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(x)}optimizeNames(x,O){if(super.optimizeNames(x,O))return this.iterable=c(this.iterable,x,O),this}get names(){return ie(super.names,this.iterable.names)}}class le extends B{constructor(x,O,z){super(),this.name=x,this.args=O,this.async=z}render(x){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(x)}}le.kind="func";class je extends k{render(x){return"return "+super.render(x)}}je.kind="return";class rt extends B{render(x){let O="try"+super.render(x);return this.catch&&(O+=this.catch.render(x)),this.finally&&(O+=this.finally.render(x)),O}optimizeNodes(){var x,O;return super.optimizeNodes(),(x=this.catch)===null||x===void 0||x.optimizeNodes(),(O=this.finally)===null||O===void 0||O.optimizeNodes(),this}optimizeNames(x,O){var z,ae;return super.optimizeNames(x,O),(z=this.catch)===null||z===void 0||z.optimizeNames(x,O),(ae=this.finally)===null||ae===void 0||ae.optimizeNames(x,O),this}get names(){const x=super.names;return this.catch&&ie(x,this.catch.names),this.finally&&ie(x,this.finally.names),x}}class _e extends B{constructor(x){super(),this.error=x}render(x){return`catch(${this.error})`+super.render(x)}}_e.kind="catch";class we extends B{render(x){return"finally"+super.render(x)}}we.kind="finally";class Ee{constructor(x,O={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...O,_n:O.lines?`
`:""},this._extScope=x,this._scope=new r.Scope({parent:x}),this._nodes=[new D]}toString(){return this._root.render(this.opts)}name(x){return this._scope.name(x)}scopeName(x){return this._extScope.name(x)}scopeValue(x,O){const z=this._extScope.value(x,O);return(this._values[z.prefix]||(this._values[z.prefix]=new Set)).add(z),z}getScopeValue(x,O){return this._extScope.getValue(x,O)}scopeRefs(x){return this._extScope.scopeRefs(x,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(x,O,z,ae){const se=this._scope.toName(O);return z!==void 0&&ae&&(this._constants[se.str]=z),this._leafNode(new s(x,se,z)),se}const(x,O,z){return this._def(r.varKinds.const,x,O,z)}let(x,O,z){return this._def(r.varKinds.let,x,O,z)}var(x,O,z){return this._def(r.varKinds.var,x,O,z)}assign(x,O,z){return this._leafNode(new u(x,O,z))}add(x,O){return this._leafNode(new _(x,e.operators.ADD,O))}code(x){return typeof x=="function"?x():x!==t.nil&&this._leafNode(new U(x)),this}object(...x){const O=["{"];for(const[z,ae]of x)O.length>1&&O.push(","),O.push(z),(z!==ae||this.opts.es5)&&(O.push(":"),(0,t.addCodeArg)(O,ae));return O.push("}"),new t._Code(O)}if(x,O,z){if(this._blockNode(new R(x)),O&&z)this.code(O).else().code(z).endIf();else if(O)this.code(O).endIf();else if(z)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(x){return this._elseNode(new R(x))}else(){return this._elseNode(new L)}endIf(){return this._endBlockNode(R,L)}_for(x,O){return this._blockNode(x),O&&this.code(O).endFor(),this}for(x,O){return this._for(new J(x),O)}forRange(x,O,z,ae,se=this.opts.es5?r.varKinds.var:r.varKinds.let){const he=this._scope.toName(x);return this._for(new ee(se,he,O,z),()=>ae(he))}forOf(x,O,z,ae=r.varKinds.const){const se=this._scope.toName(x);if(this.opts.es5){const he=O instanceof t.Name?O:this.var("_arr",O);return this.forRange("_i",0,(0,t._)`${he}.length`,Se=>{this.var(se,(0,t._)`${he}[${Se}]`),z(se)})}return this._for(new re("of",ae,se,O),()=>z(se))}forIn(x,O,z,ae=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(x,(0,t._)`Object.keys(${O})`,z);const se=this._scope.toName(x);return this._for(new re("in",ae,se,O),()=>z(se))}endFor(){return this._endBlockNode(G)}label(x){return this._leafNode(new v(x))}break(x){return this._leafNode(new g(x))}return(x){const O=new je;if(this._blockNode(O),this.code(x),O.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(je)}try(x,O,z){if(!O&&!z)throw new Error('CodeGen: "try" without "catch" and "finally"');const ae=new rt;if(this._blockNode(ae),this.code(x),O){const se=this.name("e");this._currNode=ae.catch=new _e(se),O(se)}return z&&(this._currNode=ae.finally=new we,this.code(z)),this._endBlockNode(_e,we)}throw(x){return this._leafNode(new S(x))}block(x,O){return this._blockStarts.push(this._nodes.length),x&&this.code(x).endBlock(O),this}endBlock(x){const O=this._blockStarts.pop();if(O===void 0)throw new Error("CodeGen: not in self-balancing block");const z=this._nodes.length-O;if(z<0||x!==void 0&&z!==x)throw new Error(`CodeGen: wrong number of nodes: ${z} vs ${x} expected`);return this._nodes.length=O,this}func(x,O=t.nil,z,ae){return this._blockNode(new le(x,O,z)),ae&&this.code(ae).endFunc(),this}endFunc(){return this._endBlockNode(le)}optimize(x=1){for(;x-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(x){return this._currNode.nodes.push(x),this}_blockNode(x){this._currNode.nodes.push(x),this._nodes.push(x)}_endBlockNode(x,O){const z=this._currNode;if(z instanceof x||O&&z instanceof O)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${O?`${x.kind}/${O.kind}`:x.kind}"`)}_elseNode(x){const O=this._currNode;if(!(O instanceof R))throw new Error('CodeGen: "else" without "if"');return this._currNode=O.else=x,this}get _root(){return this._nodes[0]}get _currNode(){const x=this._nodes;return x[x.length-1]}set _currNode(x){const O=this._nodes;O[O.length-1]=x}}e.CodeGen=Ee;function ie(b,x){for(const O in x)b[O]=(b[O]||0)+(x[O]||0);return b}function M(b,x){return x instanceof t._CodeOrName?ie(b,x.names):b}function c(b,x,O){if(b instanceof t.Name)return z(b);if(!ae(b))return b;return new t._Code(b._items.reduce((se,he)=>(he instanceof t.Name&&(he=z(he)),he instanceof t._Code?se.push(...he._items):se.push(he),se),[]));function z(se){const he=O[se.str];return he===void 0||x[se.str]!==1?se:(delete x[se.str],he)}function ae(se){return se instanceof t._Code&&se._items.some(he=>he instanceof t.Name&&x[he.str]===1&&O[he.str]!==void 0)}}function p(b,x){for(const O in x)b[O]=(b[O]||0)-(x[O]||0)}function E(b){return typeof b=="boolean"||typeof b=="number"||b===null?!b:(0,t._)`!${l(b)}`}e.not=E;const T=y(e.operators.AND);function C(...b){return b.reduce(T)}e.and=C;const F=y(e.operators.OR);function j(...b){return b.reduce(F)}e.or=j;function y(b){return(x,O)=>x===t.nil?O:O===t.nil?x:(0,t._)`${l(x)} ${b} ${l(O)}`}function l(b){return b instanceof t.Name?b:(0,t._)`(${b})`}})(codegen);var util={};Object.defineProperty(util,"__esModule",{value:!0});util.checkStrictMode=util.getErrorPath=util.Type=util.useFunc=util.setEvaluated=util.evaluatedPropsToName=util.mergeEvaluated=util.eachItem=util.unescapeJsonPointer=util.escapeJsonPointer=util.escapeFragment=util.unescapeFragment=util.schemaRefOrVal=util.schemaHasRulesButRef=util.schemaHasRules=util.checkUnknownRules=util.alwaysValidSchema=util.toHash=void 0;const codegen_1$v=codegen,code_1$a=code$1;function toHash(e){const t={};for(const r of e)t[r]=!0;return t}util.toHash=toHash;function alwaysValidSchema(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(checkUnknownRules(e,t),!schemaHasRules(t,e.self.RULES.all))}util.alwaysValidSchema=alwaysValidSchema;function checkUnknownRules(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const a=n.RULES.keywords;for(const o in t)a[o]||checkStrictMode(e,`unknown keyword: "${o}"`)}util.checkUnknownRules=checkUnknownRules;function schemaHasRules(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}util.schemaHasRules=schemaHasRules;function schemaHasRulesButRef(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}util.schemaHasRulesButRef=schemaHasRulesButRef;function schemaRefOrVal({topSchemaRef:e,schemaPath:t},r,n,a){if(!a){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,codegen_1$v._)`${r}`}return(0,codegen_1$v._)`${e}${t}${(0,codegen_1$v.getProperty)(n)}`}util.schemaRefOrVal=schemaRefOrVal;function unescapeFragment(e){return unescapeJsonPointer(decodeURIComponent(e))}util.unescapeFragment=unescapeFragment;function escapeFragment(e){return encodeURIComponent(escapeJsonPointer(e))}util.escapeFragment=escapeFragment;function escapeJsonPointer(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}util.escapeJsonPointer=escapeJsonPointer;function unescapeJsonPointer(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}util.unescapeJsonPointer=unescapeJsonPointer;function eachItem(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}util.eachItem=eachItem;function makeMergeEvaluated({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(a,o,s,u)=>{const _=s===void 0?o:s instanceof codegen_1$v.Name?(o instanceof codegen_1$v.Name?e(a,o,s):t(a,o,s),s):o instanceof codegen_1$v.Name?(t(a,s,o),o):r(o,s);return u===codegen_1$v.Name&&!(_ instanceof codegen_1$v.Name)?n(a,_):_}}util.mergeEvaluated={props:makeMergeEvaluated({mergeNames:(e,t,r)=>e.if((0,codegen_1$v._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,codegen_1$v._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,codegen_1$v._)`${r} || {}`).code((0,codegen_1$v._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,codegen_1$v._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,codegen_1$v._)`${r} || {}`),setEvaluated(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:evaluatedPropsToName}),items:makeMergeEvaluated({mergeNames:(e,t,r)=>e.if((0,codegen_1$v._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,codegen_1$v._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,codegen_1$v._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,codegen_1$v._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function evaluatedPropsToName(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,codegen_1$v._)`{}`);return t!==void 0&&setEvaluated(e,r,t),r}util.evaluatedPropsToName=evaluatedPropsToName;function setEvaluated(e,t,r){Object.keys(r).forEach(n=>e.assign((0,codegen_1$v._)`${t}${(0,codegen_1$v.getProperty)(n)}`,!0))}util.setEvaluated=setEvaluated;const snippets={};function useFunc(e,t){return e.scopeValue("func",{ref:t,code:snippets[t.code]||(snippets[t.code]=new code_1$a._Code(t.code))})}util.useFunc=useFunc;var Type;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Type||(util.Type=Type={}));function getErrorPath(e,t,r){if(e instanceof codegen_1$v.Name){const n=t===Type.Num;return r?n?(0,codegen_1$v._)`"[" + ${e} + "]"`:(0,codegen_1$v._)`"['" + ${e} + "']"`:n?(0,codegen_1$v._)`"/" + ${e}`:(0,codegen_1$v._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,codegen_1$v.getProperty)(e).toString():"/"+escapeJsonPointer(e)}util.getErrorPath=getErrorPath;function checkStrictMode(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}util.checkStrictMode=checkStrictMode;var names$1={};Object.defineProperty(names$1,"__esModule",{value:!0});const codegen_1$u=codegen,names={data:new codegen_1$u.Name("data"),valCxt:new codegen_1$u.Name("valCxt"),instancePath:new codegen_1$u.Name("instancePath"),parentData:new codegen_1$u.Name("parentData"),parentDataProperty:new codegen_1$u.Name("parentDataProperty"),rootData:new codegen_1$u.Name("rootData"),dynamicAnchors:new codegen_1$u.Name("dynamicAnchors"),vErrors:new codegen_1$u.Name("vErrors"),errors:new codegen_1$u.Name("errors"),this:new codegen_1$u.Name("this"),self:new codegen_1$u.Name("self"),scope:new codegen_1$u.Name("scope"),json:new codegen_1$u.Name("json"),jsonPos:new codegen_1$u.Name("jsonPos"),jsonLen:new codegen_1$u.Name("jsonLen"),jsonPart:new codegen_1$u.Name("jsonPart")};names$1.default=names;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=codegen,r=util,n=names$1;e.keywordError={message:({keyword:L})=>(0,t.str)`must pass "${L}" keyword validation`},e.keyword$DataError={message:({keyword:L,schemaType:R})=>R?(0,t.str)`"${L}" keyword must be ${R} ($data)`:(0,t.str)`"${L}" keyword is invalid ($data)`};function a(L,R=e.keywordError,G,J){const{it:ee}=L,{gen:re,compositeRule:le,allErrors:je}=ee,rt=S(L,R,G);J??(le||je)?_(re,rt):v(ee,(0,t._)`[${rt}]`)}e.reportError=a;function o(L,R=e.keywordError,G){const{it:J}=L,{gen:ee,compositeRule:re,allErrors:le}=J,je=S(L,R,G);_(ee,je),re||le||v(J,n.default.vErrors)}e.reportExtraError=o;function s(L,R){L.assign(n.default.errors,R),L.if((0,t._)`${n.default.vErrors} !== null`,()=>L.if(R,()=>L.assign((0,t._)`${n.default.vErrors}.length`,R),()=>L.assign(n.default.vErrors,null)))}e.resetErrorsCount=s;function u({gen:L,keyword:R,schemaValue:G,data:J,errsCount:ee,it:re}){if(ee===void 0)throw new Error("ajv implementation error");const le=L.name("err");L.forRange("i",ee,n.default.errors,je=>{L.const(le,(0,t._)`${n.default.vErrors}[${je}]`),L.if((0,t._)`${le}.instancePath === undefined`,()=>L.assign((0,t._)`${le}.instancePath`,(0,t.strConcat)(n.default.instancePath,re.errorPath))),L.assign((0,t._)`${le}.schemaPath`,(0,t.str)`${re.errSchemaPath}/${R}`),re.opts.verbose&&(L.assign((0,t._)`${le}.schema`,G),L.assign((0,t._)`${le}.data`,J))})}e.extendErrors=u;function _(L,R){const G=L.const("err",R);L.if((0,t._)`${n.default.vErrors} === null`,()=>L.assign(n.default.vErrors,(0,t._)`[${G}]`),(0,t._)`${n.default.vErrors}.push(${G})`),L.code((0,t._)`${n.default.errors}++`)}function v(L,R){const{gen:G,validateName:J,schemaEnv:ee}=L;ee.$async?G.throw((0,t._)`new ${L.ValidationError}(${R})`):(G.assign((0,t._)`${J}.errors`,R),G.return(!1))}const g={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function S(L,R,G){const{createErrors:J}=L.it;return J===!1?(0,t._)`{}`:U(L,R,G)}function U(L,R,G={}){const{gen:J,it:ee}=L,re=[k(ee,G),B(L,G)];return D(L,R,re),J.object(...re)}function k({errorPath:L},{instancePath:R}){const G=R?(0,t.str)`${L}${(0,r.getErrorPath)(R,r.Type.Str)}`:L;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,G)]}function B({keyword:L,it:{errSchemaPath:R}},{schemaPath:G,parentSchema:J}){let ee=J?R:(0,t.str)`${R}/${L}`;return G&&(ee=(0,t.str)`${ee}${(0,r.getErrorPath)(G,r.Type.Str)}`),[g.schemaPath,ee]}function D(L,{params:R,message:G},J){const{keyword:ee,data:re,schemaValue:le,it:je}=L,{opts:rt,propertyName:_e,topSchemaRef:we,schemaPath:Ee}=je;J.push([g.keyword,ee],[g.params,typeof R=="function"?R(L):R||(0,t._)`{}`]),rt.messages&&J.push([g.message,typeof G=="function"?G(L):G]),rt.verbose&&J.push([g.schema,le],[g.parentSchema,(0,t._)`${we}${Ee}`],[n.default.data,re]),_e&&J.push([g.propertyName,_e])}})(errors$1);Object.defineProperty(boolSchema,"__esModule",{value:!0});boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const errors_1$4=errors$1,codegen_1$t=codegen,names_1$6=names$1,boolError={message:"boolean schema is false"};function topBoolOrEmptySchema(e){const{gen:t,schema:r,validateName:n}=e;r===!1?falseSchemaError(e,!1):typeof r=="object"&&r.$async===!0?t.return(names_1$6.default.data):(t.assign((0,codegen_1$t._)`${n}.errors`,null),t.return(!0))}boolSchema.topBoolOrEmptySchema=topBoolOrEmptySchema;function boolOrEmptySchema(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),falseSchemaError(e)):r.var(t,!0)}boolSchema.boolOrEmptySchema=boolOrEmptySchema;function falseSchemaError(e,t){const{gen:r,data:n}=e,a={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,errors_1$4.reportError)(a,boolError,void 0,t)}var dataType={},rules={};Object.defineProperty(rules,"__esModule",{value:!0});rules.getRules=rules.isJSONType=void 0;const _jsonTypes=["string","number","integer","boolean","null","object","array"],jsonTypes=new Set(_jsonTypes);function isJSONType(e){return typeof e=="string"&&jsonTypes.has(e)}rules.isJSONType=isJSONType;function getRules(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}rules.getRules=getRules;var applicability={};Object.defineProperty(applicability,"__esModule",{value:!0});applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function schemaHasRulesForType({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&shouldUseGroup(e,n)}applicability.schemaHasRulesForType=schemaHasRulesForType;function shouldUseGroup(e,t){return t.rules.some(r=>shouldUseRule(e,r))}applicability.shouldUseGroup=shouldUseGroup;function shouldUseRule(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}applicability.shouldUseRule=shouldUseRule;Object.defineProperty(dataType,"__esModule",{value:!0});dataType.reportTypeError=dataType.checkDataTypes=dataType.checkDataType=dataType.coerceAndCheckDataType=dataType.getJSONTypes=dataType.getSchemaTypes=dataType.DataType=void 0;const rules_1=rules,applicability_1$1=applicability,errors_1$3=errors$1,codegen_1$s=codegen,util_1$q=util;var DataType;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(DataType||(dataType.DataType=DataType={}));function getSchemaTypes(e){const t=getJSONTypes(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}dataType.getSchemaTypes=getSchemaTypes;function getJSONTypes(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(rules_1.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}dataType.getJSONTypes=getJSONTypes;function coerceAndCheckDataType(e,t){const{gen:r,data:n,opts:a}=e,o=coerceToTypes(t,a.coerceTypes),s=t.length>0&&!(o.length===0&&t.length===1&&(0,applicability_1$1.schemaHasRulesForType)(e,t[0]));if(s){const u=checkDataTypes(t,n,a.strictNumbers,DataType.Wrong);r.if(u,()=>{o.length?coerceData(e,t,o):reportTypeError(e)})}return s}dataType.coerceAndCheckDataType=coerceAndCheckDataType;const COERCIBLE=new Set(["string","number","integer","boolean","null"]);function coerceToTypes(e,t){return t?e.filter(r=>COERCIBLE.has(r)||t==="array"&&r==="array"):[]}function coerceData(e,t,r){const{gen:n,data:a,opts:o}=e,s=n.let("dataType",(0,codegen_1$s._)`typeof ${a}`),u=n.let("coerced",(0,codegen_1$s._)`undefined`);o.coerceTypes==="array"&&n.if((0,codegen_1$s._)`${s} == 'object' && Array.isArray(${a}) && ${a}.length == 1`,()=>n.assign(a,(0,codegen_1$s._)`${a}[0]`).assign(s,(0,codegen_1$s._)`typeof ${a}`).if(checkDataTypes(t,a,o.strictNumbers),()=>n.assign(u,a))),n.if((0,codegen_1$s._)`${u} !== undefined`);for(const v of r)(COERCIBLE.has(v)||v==="array"&&o.coerceTypes==="array")&&_(v);n.else(),reportTypeError(e),n.endIf(),n.if((0,codegen_1$s._)`${u} !== undefined`,()=>{n.assign(a,u),assignParentData(e,u)});function _(v){switch(v){case"string":n.elseIf((0,codegen_1$s._)`${s} == "number" || ${s} == "boolean"`).assign(u,(0,codegen_1$s._)`"" + ${a}`).elseIf((0,codegen_1$s._)`${a} === null`).assign(u,(0,codegen_1$s._)`""`);return;case"number":n.elseIf((0,codegen_1$s._)`${s} == "boolean" || ${a} === null
              || (${s} == "string" && ${a} && ${a} == +${a})`).assign(u,(0,codegen_1$s._)`+${a}`);return;case"integer":n.elseIf((0,codegen_1$s._)`${s} === "boolean" || ${a} === null
              || (${s} === "string" && ${a} && ${a} == +${a} && !(${a} % 1))`).assign(u,(0,codegen_1$s._)`+${a}`);return;case"boolean":n.elseIf((0,codegen_1$s._)`${a} === "false" || ${a} === 0 || ${a} === null`).assign(u,!1).elseIf((0,codegen_1$s._)`${a} === "true" || ${a} === 1`).assign(u,!0);return;case"null":n.elseIf((0,codegen_1$s._)`${a} === "" || ${a} === 0 || ${a} === false`),n.assign(u,null);return;case"array":n.elseIf((0,codegen_1$s._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${a} === null`).assign(u,(0,codegen_1$s._)`[${a}]`)}}}function assignParentData({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,codegen_1$s._)`${t} !== undefined`,()=>e.assign((0,codegen_1$s._)`${t}[${r}]`,n))}function checkDataType(e,t,r,n=DataType.Correct){const a=n===DataType.Correct?codegen_1$s.operators.EQ:codegen_1$s.operators.NEQ;let o;switch(e){case"null":return(0,codegen_1$s._)`${t} ${a} null`;case"array":o=(0,codegen_1$s._)`Array.isArray(${t})`;break;case"object":o=(0,codegen_1$s._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=s((0,codegen_1$s._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=s();break;default:return(0,codegen_1$s._)`typeof ${t} ${a} ${e}`}return n===DataType.Correct?o:(0,codegen_1$s.not)(o);function s(u=codegen_1$s.nil){return(0,codegen_1$s.and)((0,codegen_1$s._)`typeof ${t} == "number"`,u,r?(0,codegen_1$s._)`isFinite(${t})`:codegen_1$s.nil)}}dataType.checkDataType=checkDataType;function checkDataTypes(e,t,r,n){if(e.length===1)return checkDataType(e[0],t,r,n);let a;const o=(0,util_1$q.toHash)(e);if(o.array&&o.object){const s=(0,codegen_1$s._)`typeof ${t} != "object"`;a=o.null?s:(0,codegen_1$s._)`!${t} || ${s}`,delete o.null,delete o.array,delete o.object}else a=codegen_1$s.nil;o.number&&delete o.integer;for(const s in o)a=(0,codegen_1$s.and)(a,checkDataType(s,t,r,n));return a}dataType.checkDataTypes=checkDataTypes;const typeError={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,codegen_1$s._)`{type: ${e}}`:(0,codegen_1$s._)`{type: ${t}}`};function reportTypeError(e){const t=getTypeErrorContext(e);(0,errors_1$3.reportError)(t,typeError)}dataType.reportTypeError=reportTypeError;function getTypeErrorContext(e){const{gen:t,data:r,schema:n}=e,a=(0,util_1$q.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:a,schemaValue:a,parentSchema:n,params:{},it:e}}var defaults={};Object.defineProperty(defaults,"__esModule",{value:!0});defaults.assignDefaults=void 0;const codegen_1$r=codegen,util_1$p=util;function assignDefaults(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const a in r)assignDefault(e,a,r[a].default);else t==="array"&&Array.isArray(n)&&n.forEach((a,o)=>assignDefault(e,o,a.default))}defaults.assignDefaults=assignDefaults;function assignDefault(e,t,r){const{gen:n,compositeRule:a,data:o,opts:s}=e;if(r===void 0)return;const u=(0,codegen_1$r._)`${o}${(0,codegen_1$r.getProperty)(t)}`;if(a){(0,util_1$p.checkStrictMode)(e,`default is ignored for: ${u}`);return}let _=(0,codegen_1$r._)`${u} === undefined`;s.useDefaults==="empty"&&(_=(0,codegen_1$r._)`${_} || ${u} === null || ${u} === ""`),n.if(_,(0,codegen_1$r._)`${u} = ${(0,codegen_1$r.stringify)(r)}`)}var keyword={},code={};Object.defineProperty(code,"__esModule",{value:!0});code.validateUnion=code.validateArray=code.usePattern=code.callValidateCode=code.schemaProperties=code.allSchemaProperties=code.noPropertyInData=code.propertyInData=code.isOwnProperty=code.hasPropFunc=code.reportMissingProp=code.checkMissingProp=code.checkReportMissingProp=void 0;const codegen_1$q=codegen,util_1$o=util,names_1$5=names$1,util_2$1=util;function checkReportMissingProp(e,t){const{gen:r,data:n,it:a}=e;r.if(noPropertyInData(r,n,t,a.opts.ownProperties),()=>{e.setParams({missingProperty:(0,codegen_1$q._)`${t}`},!0),e.error()})}code.checkReportMissingProp=checkReportMissingProp;function checkMissingProp({gen:e,data:t,it:{opts:r}},n,a){return(0,codegen_1$q.or)(...n.map(o=>(0,codegen_1$q.and)(noPropertyInData(e,t,o,r.ownProperties),(0,codegen_1$q._)`${a} = ${o}`)))}code.checkMissingProp=checkMissingProp;function reportMissingProp(e,t){e.setParams({missingProperty:t},!0),e.error()}code.reportMissingProp=reportMissingProp;function hasPropFunc(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,codegen_1$q._)`Object.prototype.hasOwnProperty`})}code.hasPropFunc=hasPropFunc;function isOwnProperty(e,t,r){return(0,codegen_1$q._)`${hasPropFunc(e)}.call(${t}, ${r})`}code.isOwnProperty=isOwnProperty;function propertyInData(e,t,r,n){const a=(0,codegen_1$q._)`${t}${(0,codegen_1$q.getProperty)(r)} !== undefined`;return n?(0,codegen_1$q._)`${a} && ${isOwnProperty(e,t,r)}`:a}code.propertyInData=propertyInData;function noPropertyInData(e,t,r,n){const a=(0,codegen_1$q._)`${t}${(0,codegen_1$q.getProperty)(r)} === undefined`;return n?(0,codegen_1$q.or)(a,(0,codegen_1$q.not)(isOwnProperty(e,t,r))):a}code.noPropertyInData=noPropertyInData;function allSchemaProperties(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}code.allSchemaProperties=allSchemaProperties;function schemaProperties(e,t){return allSchemaProperties(t).filter(r=>!(0,util_1$o.alwaysValidSchema)(e,t[r]))}code.schemaProperties=schemaProperties;function callValidateCode({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:a,errorPath:o},it:s},u,_,v){const g=v?(0,codegen_1$q._)`${e}, ${t}, ${n}${a}`:t,S=[[names_1$5.default.instancePath,(0,codegen_1$q.strConcat)(names_1$5.default.instancePath,o)],[names_1$5.default.parentData,s.parentData],[names_1$5.default.parentDataProperty,s.parentDataProperty],[names_1$5.default.rootData,names_1$5.default.rootData]];s.opts.dynamicRef&&S.push([names_1$5.default.dynamicAnchors,names_1$5.default.dynamicAnchors]);const U=(0,codegen_1$q._)`${g}, ${r.object(...S)}`;return _!==codegen_1$q.nil?(0,codegen_1$q._)`${u}.call(${_}, ${U})`:(0,codegen_1$q._)`${u}(${U})`}code.callValidateCode=callValidateCode;const newRegExp=(0,codegen_1$q._)`new RegExp`;function usePattern({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:a}=t.code,o=a(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,codegen_1$q._)`${a.code==="new RegExp"?newRegExp:(0,util_2$1.useFunc)(e,a)}(${r}, ${n})`})}code.usePattern=usePattern;function validateArray(e){const{gen:t,data:r,keyword:n,it:a}=e,o=t.name("valid");if(a.allErrors){const u=t.let("valid",!0);return s(()=>t.assign(u,!1)),u}return t.var(o,!0),s(()=>t.break()),o;function s(u){const _=t.const("len",(0,codegen_1$q._)`${r}.length`);t.forRange("i",0,_,v=>{e.subschema({keyword:n,dataProp:v,dataPropType:util_1$o.Type.Num},o),t.if((0,codegen_1$q.not)(o),u)})}}code.validateArray=validateArray;function validateUnion(e){const{gen:t,schema:r,keyword:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(_=>(0,util_1$o.alwaysValidSchema)(a,_))&&!a.opts.unevaluated)return;const s=t.let("valid",!1),u=t.name("_valid");t.block(()=>r.forEach((_,v)=>{const g=e.subschema({keyword:n,schemaProp:v,compositeRule:!0},u);t.assign(s,(0,codegen_1$q._)`${s} || ${u}`),e.mergeValidEvaluated(g,u)||t.if((0,codegen_1$q.not)(s))})),e.result(s,()=>e.reset(),()=>e.error(!0))}code.validateUnion=validateUnion;Object.defineProperty(keyword,"__esModule",{value:!0});keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const codegen_1$p=codegen,names_1$4=names$1,code_1$9=code,errors_1$2=errors$1;function macroKeywordCode(e,t){const{gen:r,keyword:n,schema:a,parentSchema:o,it:s}=e,u=t.macro.call(s.self,a,o,s),_=useKeyword(r,n,u);s.opts.validateSchema!==!1&&s.self.validateSchema(u,!0);const v=r.name("valid");e.subschema({schema:u,schemaPath:codegen_1$p.nil,errSchemaPath:`${s.errSchemaPath}/${n}`,topSchemaRef:_,compositeRule:!0},v),e.pass(v,()=>e.error(!0))}keyword.macroKeywordCode=macroKeywordCode;function funcKeywordCode(e,t){var r;const{gen:n,keyword:a,schema:o,parentSchema:s,$data:u,it:_}=e;checkAsyncKeyword(_,t);const v=!u&&t.compile?t.compile.call(_.self,o,s,_):t.validate,g=useKeyword(n,a,v),S=n.let("valid");e.block$data(S,U),e.ok((r=t.valid)!==null&&r!==void 0?r:S);function U(){if(t.errors===!1)D(),t.modifying&&modifyData(e),L(()=>e.error());else{const R=t.async?k():B();t.modifying&&modifyData(e),L(()=>addErrs(e,R))}}function k(){const R=n.let("ruleErrs",null);return n.try(()=>D((0,codegen_1$p._)`await `),G=>n.assign(S,!1).if((0,codegen_1$p._)`${G} instanceof ${_.ValidationError}`,()=>n.assign(R,(0,codegen_1$p._)`${G}.errors`),()=>n.throw(G))),R}function B(){const R=(0,codegen_1$p._)`${g}.errors`;return n.assign(R,null),D(codegen_1$p.nil),R}function D(R=t.async?(0,codegen_1$p._)`await `:codegen_1$p.nil){const G=_.opts.passContext?names_1$4.default.this:names_1$4.default.self,J=!("compile"in t&&!u||t.schema===!1);n.assign(S,(0,codegen_1$p._)`${R}${(0,code_1$9.callValidateCode)(e,g,G,J)}`,t.modifying)}function L(R){var G;n.if((0,codegen_1$p.not)((G=t.valid)!==null&&G!==void 0?G:S),R)}}keyword.funcKeywordCode=funcKeywordCode;function modifyData(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,codegen_1$p._)`${n.parentData}[${n.parentDataProperty}]`))}function addErrs(e,t){const{gen:r}=e;r.if((0,codegen_1$p._)`Array.isArray(${t})`,()=>{r.assign(names_1$4.default.vErrors,(0,codegen_1$p._)`${names_1$4.default.vErrors} === null ? ${t} : ${names_1$4.default.vErrors}.concat(${t})`).assign(names_1$4.default.errors,(0,codegen_1$p._)`${names_1$4.default.vErrors}.length`),(0,errors_1$2.extendErrors)(e)},()=>e.error())}function checkAsyncKeyword({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function useKeyword(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,codegen_1$p.stringify)(r)})}function validSchemaType(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}keyword.validSchemaType=validSchemaType;function validateKeywordUsage({schema:e,opts:t,self:r,errSchemaPath:n},a,o){if(Array.isArray(a.keyword)?!a.keyword.includes(o):a.keyword!==o)throw new Error("ajv implementation error");const s=a.dependencies;if(s!=null&&s.some(u=>!Object.prototype.hasOwnProperty.call(e,u)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(a.validateSchema&&!a.validateSchema(e[o])){const _=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(a.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(_);else throw new Error(_)}}keyword.validateKeywordUsage=validateKeywordUsage;var subschema={};Object.defineProperty(subschema,"__esModule",{value:!0});subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const codegen_1$o=codegen,util_1$n=util;function getSubschema(e,{keyword:t,schemaProp:r,schema:n,schemaPath:a,errSchemaPath:o,topSchemaRef:s}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const u=e.schema[t];return r===void 0?{schema:u,schemaPath:(0,codegen_1$o._)`${e.schemaPath}${(0,codegen_1$o.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:u[r],schemaPath:(0,codegen_1$o._)`${e.schemaPath}${(0,codegen_1$o.getProperty)(t)}${(0,codegen_1$o.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,util_1$n.escapeFragment)(r)}`}}if(n!==void 0){if(a===void 0||o===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:a,topSchemaRef:s,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=getSubschema;function extendSubschemaData(e,t,{dataProp:r,dataPropType:n,data:a,dataTypes:o,propertyName:s}){if(a!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:u}=t;if(r!==void 0){const{errorPath:v,dataPathArr:g,opts:S}=t,U=u.let("data",(0,codegen_1$o._)`${t.data}${(0,codegen_1$o.getProperty)(r)}`,!0);_(U),e.errorPath=(0,codegen_1$o.str)`${v}${(0,util_1$n.getErrorPath)(r,n,S.jsPropertySyntax)}`,e.parentDataProperty=(0,codegen_1$o._)`${r}`,e.dataPathArr=[...g,e.parentDataProperty]}if(a!==void 0){const v=a instanceof codegen_1$o.Name?a:u.let("data",a,!0);_(v),s!==void 0&&(e.propertyName=s)}o&&(e.dataTypes=o);function _(v){e.data=v,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,v]}}subschema.extendSubschemaData=extendSubschemaData;function extendSubschemaMode(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:a,allErrors:o}){n!==void 0&&(e.compositeRule=n),a!==void 0&&(e.createErrors=a),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}subschema.extendSubschemaMode=extendSubschemaMode;var resolve$2={},fastDeepEqual=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(a=n;a--!==0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[a]))return!1;for(a=n;a--!==0;){var s=o[a];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r},jsonSchemaTraverse={exports:{}},traverse$1=jsonSchemaTraverse.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},a=r.post||function(){};_traverse(t,n,a,e,"",e)};traverse$1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};traverse$1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};traverse$1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};traverse$1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _traverse(e,t,r,n,a,o,s,u,_,v){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,a,o,s,u,_,v);for(var g in n){var S=n[g];if(Array.isArray(S)){if(g in traverse$1.arrayKeywords)for(var U=0;U<S.length;U++)_traverse(e,t,r,S[U],a+"/"+g+"/"+U,o,a,g,n,U)}else if(g in traverse$1.propsKeywords){if(S&&typeof S=="object")for(var k in S)_traverse(e,t,r,S[k],a+"/"+g+"/"+escapeJsonPtr(k),o,a,g,n,k)}else(g in traverse$1.keywords||e.allKeys&&!(g in traverse$1.skipKeywords))&&_traverse(e,t,r,S,a+"/"+g,o,a,g,n)}r(n,a,o,s,u,_,v)}}function escapeJsonPtr(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var jsonSchemaTraverseExports=jsonSchemaTraverse.exports;Object.defineProperty(resolve$2,"__esModule",{value:!0});resolve$2.getSchemaRefs=resolve$2.resolveUrl=resolve$2.normalizeId=resolve$2._getFullPath=resolve$2.getFullPath=resolve$2.inlineRef=void 0;const util_1$m=util,equal$3=fastDeepEqual,traverse=jsonSchemaTraverseExports,SIMPLE_INLINED=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function inlineRef(e,t=!0){return typeof e=="boolean"?!0:t===!0?!hasRef(e):t?countKeys(e)<=t:!1}resolve$2.inlineRef=inlineRef;const REF_KEYWORDS=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function hasRef(e){for(const t in e){if(REF_KEYWORDS.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(hasRef)||typeof r=="object"&&hasRef(r))return!0}return!1}function countKeys(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!SIMPLE_INLINED.has(r)&&(typeof e[r]=="object"&&(0,util_1$m.eachItem)(e[r],n=>t+=countKeys(n)),t===1/0))return 1/0}return t}function getFullPath(e,t="",r){r!==!1&&(t=normalizeId(t));const n=e.parse(t);return _getFullPath(e,n)}resolve$2.getFullPath=getFullPath;function _getFullPath(e,t){return e.serialize(t).split("#")[0]+"#"}resolve$2._getFullPath=_getFullPath;const TRAILING_SLASH_HASH=/#\/?$/;function normalizeId(e){return e?e.replace(TRAILING_SLASH_HASH,""):""}resolve$2.normalizeId=normalizeId;function resolveUrl(e,t,r){return r=normalizeId(r),e.resolve(t,r)}resolve$2.resolveUrl=resolveUrl;const ANCHOR=/^[a-z_][-a-z0-9._]*$/i;function getSchemaRefs(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,a=normalizeId(e[r]||t),o={"":a},s=getFullPath(n,a,!1),u={},_=new Set;return traverse(e,{allKeys:!0},(S,U,k,B)=>{if(B===void 0)return;const D=s+U;let L=o[B];typeof S[r]=="string"&&(L=R.call(this,S[r])),G.call(this,S.$anchor),G.call(this,S.$dynamicAnchor),o[U]=L;function R(J){const ee=this.opts.uriResolver.resolve;if(J=normalizeId(L?ee(L,J):J),_.has(J))throw g(J);_.add(J);let re=this.refs[J];return typeof re=="string"&&(re=this.refs[re]),typeof re=="object"?v(S,re.schema,J):J!==normalizeId(D)&&(J[0]==="#"?(v(S,u[J],J),u[J]=S):this.refs[J]=D),J}function G(J){if(typeof J=="string"){if(!ANCHOR.test(J))throw new Error(`invalid anchor "${J}"`);R.call(this,`#${J}`)}}}),u;function v(S,U,k){if(U!==void 0&&!equal$3(S,U))throw g(k)}function g(S){return new Error(`reference "${S}" resolves to more than one schema`)}}resolve$2.getSchemaRefs=getSchemaRefs;Object.defineProperty(validate,"__esModule",{value:!0});validate.getData=validate.KeywordCxt=validate.validateFunctionCode=void 0;const boolSchema_1=boolSchema,dataType_1$1=dataType,applicability_1=applicability,dataType_2=dataType,defaults_1=defaults,keyword_1=keyword,subschema_1=subschema,codegen_1$n=codegen,names_1$3=names$1,resolve_1$2=resolve$2,util_1$l=util,errors_1$1=errors$1;function validateFunctionCode(e){if(isSchemaObj(e)&&(checkKeywords(e),schemaCxtHasRules(e))){topSchemaObjCode(e);return}validateFunction(e,()=>(0,boolSchema_1.topBoolOrEmptySchema)(e))}validate.validateFunctionCode=validateFunctionCode;function validateFunction({gen:e,validateName:t,schema:r,schemaEnv:n,opts:a},o){a.code.es5?e.func(t,(0,codegen_1$n._)`${names_1$3.default.data}, ${names_1$3.default.valCxt}`,n.$async,()=>{e.code((0,codegen_1$n._)`"use strict"; ${funcSourceUrl(r,a)}`),destructureValCxtES5(e,a),e.code(o)}):e.func(t,(0,codegen_1$n._)`${names_1$3.default.data}, ${destructureValCxt(a)}`,n.$async,()=>e.code(funcSourceUrl(r,a)).code(o))}function destructureValCxt(e){return(0,codegen_1$n._)`{${names_1$3.default.instancePath}="", ${names_1$3.default.parentData}, ${names_1$3.default.parentDataProperty}, ${names_1$3.default.rootData}=${names_1$3.default.data}${e.dynamicRef?(0,codegen_1$n._)`, ${names_1$3.default.dynamicAnchors}={}`:codegen_1$n.nil}}={}`}function destructureValCxtES5(e,t){e.if(names_1$3.default.valCxt,()=>{e.var(names_1$3.default.instancePath,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.instancePath}`),e.var(names_1$3.default.parentData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentData}`),e.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.parentDataProperty}`),e.var(names_1$3.default.rootData,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.rootData}`),t.dynamicRef&&e.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`${names_1$3.default.valCxt}.${names_1$3.default.dynamicAnchors}`)},()=>{e.var(names_1$3.default.instancePath,(0,codegen_1$n._)`""`),e.var(names_1$3.default.parentData,(0,codegen_1$n._)`undefined`),e.var(names_1$3.default.parentDataProperty,(0,codegen_1$n._)`undefined`),e.var(names_1$3.default.rootData,names_1$3.default.data),t.dynamicRef&&e.var(names_1$3.default.dynamicAnchors,(0,codegen_1$n._)`{}`)})}function topSchemaObjCode(e){const{schema:t,opts:r,gen:n}=e;validateFunction(e,()=>{r.$comment&&t.$comment&&commentKeyword(e),checkNoDefault(e),n.let(names_1$3.default.vErrors,null),n.let(names_1$3.default.errors,0),r.unevaluated&&resetEvaluated(e),typeAndKeywords(e),returnResults(e)})}function resetEvaluated(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,codegen_1$n._)`${r}.evaluated`),t.if((0,codegen_1$n._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,codegen_1$n._)`${e.evaluated}.props`,(0,codegen_1$n._)`undefined`)),t.if((0,codegen_1$n._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,codegen_1$n._)`${e.evaluated}.items`,(0,codegen_1$n._)`undefined`))}function funcSourceUrl(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,codegen_1$n._)`/*# sourceURL=${r} */`:codegen_1$n.nil}function subschemaCode(e,t){if(isSchemaObj(e)&&(checkKeywords(e),schemaCxtHasRules(e))){subSchemaObjCode(e,t);return}(0,boolSchema_1.boolOrEmptySchema)(e,t)}function schemaCxtHasRules({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function isSchemaObj(e){return typeof e.schema!="boolean"}function subSchemaObjCode(e,t){const{schema:r,gen:n,opts:a}=e;a.$comment&&r.$comment&&commentKeyword(e),updateContext(e),checkAsyncSchema(e);const o=n.const("_errs",names_1$3.default.errors);typeAndKeywords(e,o),n.var(t,(0,codegen_1$n._)`${o} === ${names_1$3.default.errors}`)}function checkKeywords(e){(0,util_1$l.checkUnknownRules)(e),checkRefsAndKeywords(e)}function typeAndKeywords(e,t){if(e.opts.jtd)return schemaKeywords(e,[],!1,t);const r=(0,dataType_1$1.getSchemaTypes)(e.schema),n=(0,dataType_1$1.coerceAndCheckDataType)(e,r);schemaKeywords(e,r,!n,t)}function checkRefsAndKeywords(e){const{schema:t,errSchemaPath:r,opts:n,self:a}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,util_1$l.schemaHasRulesButRef)(t,a.RULES)&&a.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function checkNoDefault(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,util_1$l.checkStrictMode)(e,"default is ignored in the schema root")}function updateContext(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,resolve_1$2.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function checkAsyncSchema(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function commentKeyword({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:a}){const o=r.$comment;if(a.$comment===!0)e.code((0,codegen_1$n._)`${names_1$3.default.self}.logger.log(${o})`);else if(typeof a.$comment=="function"){const s=(0,codegen_1$n.str)`${n}/$comment`,u=e.scopeValue("root",{ref:t.root});e.code((0,codegen_1$n._)`${names_1$3.default.self}.opts.$comment(${o}, ${s}, ${u}.schema)`)}}function returnResults(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:a,opts:o}=e;r.$async?t.if((0,codegen_1$n._)`${names_1$3.default.errors} === 0`,()=>t.return(names_1$3.default.data),()=>t.throw((0,codegen_1$n._)`new ${a}(${names_1$3.default.vErrors})`)):(t.assign((0,codegen_1$n._)`${n}.errors`,names_1$3.default.vErrors),o.unevaluated&&assignEvaluated(e),t.return((0,codegen_1$n._)`${names_1$3.default.errors} === 0`))}function assignEvaluated({gen:e,evaluated:t,props:r,items:n}){r instanceof codegen_1$n.Name&&e.assign((0,codegen_1$n._)`${t}.props`,r),n instanceof codegen_1$n.Name&&e.assign((0,codegen_1$n._)`${t}.items`,n)}function schemaKeywords(e,t,r,n){const{gen:a,schema:o,data:s,allErrors:u,opts:_,self:v}=e,{RULES:g}=v;if(o.$ref&&(_.ignoreKeywordsWithRef||!(0,util_1$l.schemaHasRulesButRef)(o,g))){a.block(()=>keywordCode(e,"$ref",g.all.$ref.definition));return}_.jtd||checkStrictTypes(e,t),a.block(()=>{for(const U of g.rules)S(U);S(g.post)});function S(U){(0,applicability_1.shouldUseGroup)(o,U)&&(U.type?(a.if((0,dataType_2.checkDataType)(U.type,s,_.strictNumbers)),iterateKeywords(e,U),t.length===1&&t[0]===U.type&&r&&(a.else(),(0,dataType_2.reportTypeError)(e)),a.endIf()):iterateKeywords(e,U),u||a.if((0,codegen_1$n._)`${names_1$3.default.errors} === ${n||0}`))}}function iterateKeywords(e,t){const{gen:r,schema:n,opts:{useDefaults:a}}=e;a&&(0,defaults_1.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,applicability_1.shouldUseRule)(n,o)&&keywordCode(e,o.keyword,o.definition,t.type)})}function checkStrictTypes(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(checkContextTypes(e,t),e.opts.allowUnionTypes||checkMultipleTypes(e,t),checkKeywordTypes(e,e.dataTypes))}function checkContextTypes(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{includesType(e.dataTypes,r)||strictTypesError(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),narrowSchemaTypes(e,t)}}function checkMultipleTypes(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&strictTypesError(e,"use allowUnionTypes to allow union type keyword")}function checkKeywordTypes(e,t){const r=e.self.RULES.all;for(const n in r){const a=r[n];if(typeof a=="object"&&(0,applicability_1.shouldUseRule)(e.schema,a)){const{type:o}=a.definition;o.length&&!o.some(s=>hasApplicableType(t,s))&&strictTypesError(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function hasApplicableType(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function includesType(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function narrowSchemaTypes(e,t){const r=[];for(const n of e.dataTypes)includesType(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function strictTypesError(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,util_1$l.checkStrictMode)(e,t,e.opts.strictTypes)}class KeywordCxt{constructor(t,r,n){if((0,keyword_1.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,util_1$l.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",getData(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,keyword_1.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",names_1$3.default.errors))}result(t,r,n){this.failResult((0,codegen_1$n.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,codegen_1$n.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,codegen_1$n._)`${r} !== undefined && (${(0,codegen_1$n.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?errors_1$1.reportExtraError:errors_1$1.reportError)(this,this.def.error,r)}$dataError(){(0,errors_1$1.reportError)(this,this.def.$dataError||errors_1$1.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,errors_1$1.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=codegen_1$n.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=codegen_1$n.nil,r=codegen_1$n.nil){if(!this.$data)return;const{gen:n,schemaCode:a,schemaType:o,def:s}=this;n.if((0,codegen_1$n.or)((0,codegen_1$n._)`${a} === undefined`,r)),t!==codegen_1$n.nil&&n.assign(t,!0),(o.length||s.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==codegen_1$n.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:a,it:o}=this;return(0,codegen_1$n.or)(s(),u());function s(){if(n.length){if(!(r instanceof codegen_1$n.Name))throw new Error("ajv implementation error");const _=Array.isArray(n)?n:[n];return(0,codegen_1$n._)`${(0,dataType_2.checkDataTypes)(_,r,o.opts.strictNumbers,dataType_2.DataType.Wrong)}`}return codegen_1$n.nil}function u(){if(a.validateSchema){const _=t.scopeValue("validate$data",{ref:a.validateSchema});return(0,codegen_1$n._)`!${_}(${r})`}return codegen_1$n.nil}}subschema(t,r){const n=(0,subschema_1.getSubschema)(this.it,t);(0,subschema_1.extendSubschemaData)(n,this.it,t),(0,subschema_1.extendSubschemaMode)(n,t);const a={...this.it,...n,items:void 0,props:void 0};return subschemaCode(a,r),a}mergeEvaluated(t,r){const{it:n,gen:a}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=util_1$l.mergeEvaluated.props(a,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=util_1$l.mergeEvaluated.items(a,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:a}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return a.if(r,()=>this.mergeEvaluated(t,codegen_1$n.Name)),!0}}validate.KeywordCxt=KeywordCxt;function keywordCode(e,t,r,n){const a=new KeywordCxt(e,r,t);"code"in r?r.code(a,n):a.$data&&r.validate?(0,keyword_1.funcKeywordCode)(a,r):"macro"in r?(0,keyword_1.macroKeywordCode)(a,r):(r.compile||r.validate)&&(0,keyword_1.funcKeywordCode)(a,r)}const JSON_POINTER=/^\/(?:[^~]|~0|~1)*$/,RELATIVE_JSON_POINTER=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function getData(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let a,o;if(e==="")return names_1$3.default.rootData;if(e[0]==="/"){if(!JSON_POINTER.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);a=e,o=names_1$3.default.rootData}else{const v=RELATIVE_JSON_POINTER.exec(e);if(!v)throw new Error(`Invalid JSON-pointer: ${e}`);const g=+v[1];if(a=v[2],a==="#"){if(g>=t)throw new Error(_("property/index",g));return n[t-g]}if(g>t)throw new Error(_("data",g));if(o=r[t-g],!a)return o}let s=o;const u=a.split("/");for(const v of u)v&&(o=(0,codegen_1$n._)`${o}${(0,codegen_1$n.getProperty)((0,util_1$l.unescapeJsonPointer)(v))}`,s=(0,codegen_1$n._)`${s} && ${o}`);return s;function _(v,g){return`Cannot access ${v} ${g} levels up, current level is ${t}`}}validate.getData=getData;var validation_error={};Object.defineProperty(validation_error,"__esModule",{value:!0});class ValidationError extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}validation_error.default=ValidationError;var ref_error={};Object.defineProperty(ref_error,"__esModule",{value:!0});const resolve_1$1=resolve$2;class MissingRefError extends Error{constructor(t,r,n,a){super(a||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,resolve_1$1.resolveUrl)(t,r,n),this.missingSchema=(0,resolve_1$1.normalizeId)((0,resolve_1$1.getFullPath)(t,this.missingRef))}}ref_error.default=MissingRefError;var compile={};Object.defineProperty(compile,"__esModule",{value:!0});compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const codegen_1$m=codegen,validation_error_1=validation_error,names_1$2=names$1,resolve_1=resolve$2,util_1$k=util,validate_1$1=validate;class SchemaEnv{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,resolve_1.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}compile.SchemaEnv=SchemaEnv;function compileSchema(e){const t=getCompilingSchema.call(this,e);if(t)return t;const r=(0,resolve_1.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:a}=this.opts.code,{ownProperties:o}=this.opts,s=new codegen_1$m.CodeGen(this.scope,{es5:n,lines:a,ownProperties:o});let u;e.$async&&(u=s.scopeValue("Error",{ref:validation_error_1.default,code:(0,codegen_1$m._)`require("ajv/dist/runtime/validation_error").default`}));const _=s.scopeName("validate");e.validateName=_;const v={gen:s,allErrors:this.opts.allErrors,data:names_1$2.default.data,parentData:names_1$2.default.parentData,parentDataProperty:names_1$2.default.parentDataProperty,dataNames:[names_1$2.default.data],dataPathArr:[codegen_1$m.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,codegen_1$m.stringify)(e.schema)}:{ref:e.schema}),validateName:_,ValidationError:u,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:codegen_1$m.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,codegen_1$m._)`""`,opts:this.opts,self:this};let g;try{this._compilations.add(e),(0,validate_1$1.validateFunctionCode)(v),s.optimize(this.opts.code.optimize);const S=s.toString();g=`${s.scopeRefs(names_1$2.default.scope)}return ${S}`,this.opts.code.process&&(g=this.opts.code.process(g,e));const k=new Function(`${names_1$2.default.self}`,`${names_1$2.default.scope}`,g)(this,this.scope.get());if(this.scope.value(_,{ref:k}),k.errors=null,k.schema=e.schema,k.schemaEnv=e,e.$async&&(k.$async=!0),this.opts.code.source===!0&&(k.source={validateName:_,validateCode:S,scopeValues:s._values}),this.opts.unevaluated){const{props:B,items:D}=v;k.evaluated={props:B instanceof codegen_1$m.Name?void 0:B,items:D instanceof codegen_1$m.Name?void 0:D,dynamicProps:B instanceof codegen_1$m.Name,dynamicItems:D instanceof codegen_1$m.Name},k.source&&(k.source.evaluated=(0,codegen_1$m.stringify)(k.evaluated))}return e.validate=k,e}catch(S){throw delete e.validate,delete e.validateName,g&&this.logger.error("Error compiling schema, function code:",g),S}finally{this._compilations.delete(e)}}compile.compileSchema=compileSchema;function resolveRef(e,t,r){var n;r=(0,resolve_1.resolveUrl)(this.opts.uriResolver,t,r);const a=e.refs[r];if(a)return a;let o=resolve$1.call(this,e,r);if(o===void 0){const s=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:u}=this.opts;s&&(o=new SchemaEnv({schema:s,schemaId:u,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=inlineOrCompile.call(this,o)}compile.resolveRef=resolveRef;function inlineOrCompile(e){return(0,resolve_1.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:compileSchema.call(this,e)}function getCompilingSchema(e){for(const t of this._compilations)if(sameSchemaEnv(t,e))return t}compile.getCompilingSchema=getCompilingSchema;function sameSchemaEnv(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function resolve$1(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||resolveSchema.call(this,e,t)}function resolveSchema(e,t){const r=this.opts.uriResolver.parse(t),n=(0,resolve_1._getFullPath)(this.opts.uriResolver,r);let a=(0,resolve_1.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===a)return getJsonPointer.call(this,r,e);const o=(0,resolve_1.normalizeId)(n),s=this.refs[o]||this.schemas[o];if(typeof s=="string"){const u=resolveSchema.call(this,e,s);return typeof(u==null?void 0:u.schema)!="object"?void 0:getJsonPointer.call(this,r,u)}if(typeof(s==null?void 0:s.schema)=="object"){if(s.validate||compileSchema.call(this,s),o===(0,resolve_1.normalizeId)(t)){const{schema:u}=s,{schemaId:_}=this.opts,v=u[_];return v&&(a=(0,resolve_1.resolveUrl)(this.opts.uriResolver,a,v)),new SchemaEnv({schema:u,schemaId:_,root:e,baseId:a})}return getJsonPointer.call(this,r,s)}}compile.resolveSchema=resolveSchema;const PREVENT_SCOPE_CHANGE=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function getJsonPointer(e,{baseId:t,schema:r,root:n}){var a;if(((a=e.fragment)===null||a===void 0?void 0:a[0])!=="/")return;for(const u of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const _=r[(0,util_1$k.unescapeFragment)(u)];if(_===void 0)return;r=_;const v=typeof r=="object"&&r[this.opts.schemaId];!PREVENT_SCOPE_CHANGE.has(u)&&v&&(t=(0,resolve_1.resolveUrl)(this.opts.uriResolver,t,v))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,util_1$k.schemaHasRulesButRef)(r,this.RULES)){const u=(0,resolve_1.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=resolveSchema.call(this,n,u)}const{schemaId:s}=this.opts;if(o=o||new SchemaEnv({schema:r,schemaId:s,root:n,baseId:t}),o.schema!==o.root.schema)return o}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$1="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description,type:type$1,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var uri$1={},fastUri$1={exports:{}};const HEX$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var scopedChars={HEX:HEX$1};const{HEX}=scopedChars;function normalizeIPv4$1(e){if(findToken(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=t;return r?{host:stripLeadingZeros(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function stringArrayToHexStripped(e,t=!1){let r="",n=!0;for(const a of e){if(HEX[a]===void 0)return;a!=="0"&&n===!0&&(n=!1),n||(r+=a)}return t&&r.length===0&&(r="0"),r}function getIPV6(e){let t=0;const r={error:!1,address:"",zone:""},n=[],a=[];let o=!1,s=!1,u=!1;function _(){if(a.length){if(o===!1){const v=stringArrayToHexStripped(a);if(v!==void 0)n.push(v);else return r.error=!0,!1}a.length=0}return!0}for(let v=0;v<e.length;v++){const g=e[v];if(!(g==="["||g==="]"))if(g===":"){if(s===!0&&(u=!0),!_())break;if(t++,n.push(":"),t>7){r.error=!0;break}v-1>=0&&e[v-1]===":"&&(s=!0);continue}else if(g==="%"){if(!_())break;o=!0}else{a.push(g);continue}}return a.length&&(o?r.zone=a.join(""):u?n.push(a.join("")):n.push(stringArrayToHexStripped(a))),r.address=n.join(""),r}function normalizeIPv6$1(e,t={}){if(findToken(e,":")<2)return{host:e,isIPV6:!1};const r=getIPV6(e);if(r.error)return{host:e,isIPV6:!1};{let n=r.address,a=r.address;return r.zone&&(n+="%"+r.zone,a+="%25"+r.zone),{host:n,escapedHost:a,isIPV6:!0}}}function stripLeadingZeros(e,t){let r="",n=!0;const a=e.length;for(let o=0;o<a;o++){const s=e[o];s==="0"&&n?(o+1<=a&&e[o+1]===t||o+1===a)&&(r+=s,n=!1):(s===t?n=!0:n=!1,r+=s)}return r}function findToken(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}const RDS1=/^\.\.?\//u,RDS2=/^\/\.(?:\/|$)/u,RDS3=/^\/\.\.(?:\/|$)/u,RDS5=/^\/?(?:.|\n)*?(?=\/|$)/u;function removeDotSegments$1(e){const t=[];for(;e.length;)if(e.match(RDS1))e=e.replace(RDS1,"");else if(e.match(RDS2))e=e.replace(RDS2,"/");else if(e.match(RDS3))e=e.replace(RDS3,"/"),t.pop();else if(e==="."||e==="..")e="";else{const r=e.match(RDS5);if(r){const n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function normalizeComponentEncoding$1(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function recomposeAuthority$1(e,t){const r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let n=unescape(e.host);const a=normalizeIPv4$1(n);if(a.isIPV4)n=a.host;else{const o=normalizeIPv6$1(a.host,{isIPV4:!1});o.isIPV6===!0?n=`[${o.escapedHost}]`:n=e.host}r.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var utils={recomposeAuthority:recomposeAuthority$1,normalizeComponentEncoding:normalizeComponentEncoding$1,removeDotSegments:removeDotSegments$1,normalizeIPv4:normalizeIPv4$1,normalizeIPv6:normalizeIPv6$1,stringArrayToHexStripped};const UUID_REG=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,URN_REG=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function isSecure(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function httpParse(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function httpSerialize(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function wsParse(e){return e.secure=isSecure(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function wsSerialize(e){if((e.port===(isSecure(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function urnParse(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(URN_REG);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const a=`${n}:${t.nid||e.nid}`,o=SCHEMES$1[a];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function urnSerialize(e,t){const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),a=`${r}:${t.nid||n}`,o=SCHEMES$1[a];o&&(e=o.serialize(e,t));const s=e,u=e.nss;return s.path=`${n||t.nid}:${u}`,t.skipEscape=!0,s}function urnuuidParse(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!UUID_REG.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function urnuuidSerialize(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const http={scheme:"http",domainHost:!0,parse:httpParse,serialize:httpSerialize},https={scheme:"https",domainHost:http.domainHost,parse:httpParse,serialize:httpSerialize},ws={scheme:"ws",domainHost:!0,parse:wsParse,serialize:wsSerialize},wss={scheme:"wss",domainHost:ws.domainHost,parse:ws.parse,serialize:ws.serialize},urn={scheme:"urn",parse:urnParse,serialize:urnSerialize,skipNormalize:!0},urnuuid={scheme:"urn:uuid",parse:urnuuidParse,serialize:urnuuidSerialize,skipNormalize:!0},SCHEMES$1={http,https,ws,wss,urn,"urn:uuid":urnuuid};var schemes=SCHEMES$1;const{normalizeIPv6,normalizeIPv4,removeDotSegments,recomposeAuthority,normalizeComponentEncoding}=utils,SCHEMES=schemes;function normalize(e,t){return typeof e=="string"?e=serialize(parse(e,t),t):typeof e=="object"&&(e=parse(serialize(e,t),t)),e}function resolve(e,t,r){const n=Object.assign({scheme:"null"},r),a=resolveComponents(parse(e,n),parse(t,n),n,!0);return serialize(a,{...n,skipEscape:!0})}function resolveComponents(e,t,r,n){const a={};return n||(e=parse(serialize(e,r),r),t=parse(serialize(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(a.scheme=t.scheme,a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=removeDotSegments(t.path||""),a.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(a.userinfo=t.userinfo,a.host=t.host,a.port=t.port,a.path=removeDotSegments(t.path||""),a.query=t.query):(t.path?(t.path.charAt(0)==="/"?a.path=removeDotSegments(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?a.path="/"+t.path:e.path?a.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:a.path=t.path,a.path=removeDotSegments(a.path)),a.query=t.query):(a.path=e.path,t.query!==void 0?a.query=t.query:a.query=e.query),a.userinfo=e.userinfo,a.host=e.host,a.port=e.port),a.scheme=e.scheme),a.fragment=t.fragment,a}function equal$2(e,t,r){return typeof e=="string"?(e=unescape(e),e=serialize(normalizeComponentEncoding(parse(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=serialize(normalizeComponentEncoding(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=serialize(normalizeComponentEncoding(parse(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=serialize(normalizeComponentEncoding(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function serialize(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),a=[],o=SCHEMES[(n.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(a.push(r.scheme),a.push(":"));const s=recomposeAuthority(r,n);if(s!==void 0&&(n.reference!=="suffix"&&a.push("//"),a.push(s),r.path&&r.path.charAt(0)!=="/"&&a.push("/")),r.path!==void 0){let u=r.path;!n.absolutePath&&(!o||!o.absolutePath)&&(u=removeDotSegments(u)),s===void 0&&(u=u.replace(/^\/\//u,"/%2F")),a.push(u)}return r.query!==void 0&&(a.push("?"),a.push(r.query)),r.fragment!==void 0&&(a.push("#"),a.push(r.fragment)),a.join("")}const hexLookUp=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function nonSimpleDomain(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||hexLookUp[t])return!0;return!1}const URI_PARSE=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function parse(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},a=e.indexOf("%")!==-1;let o=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);const s=e.match(URI_PARSE);if(s){if(n.scheme=s[1],n.userinfo=s[3],n.host=s[4],n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=s[7],n.fragment=s[8],isNaN(n.port)&&(n.port=s[5]),n.host){const _=normalizeIPv4(n.host);if(_.isIPV4===!1){const v=normalizeIPv6(_.host,{isIPV4:!1});n.host=v.host.toLowerCase(),o=v.isIPV6}else n.host=_.host,o=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const u=SCHEMES[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!u||!u.unicodeSupport)&&n.host&&(r.domainHost||u&&u.domainHost)&&o===!1&&nonSimpleDomain(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(_){n.error=n.error||"Host's domain name can not be converted to ASCII: "+_}(!u||u&&!u.skipNormalize)&&(a&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),a&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),a&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),u&&u.parse&&u.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const fastUri={SCHEMES,normalize,resolve,resolveComponents,equal:equal$2,serialize,parse};fastUri$1.exports=fastUri;fastUri$1.exports.default=fastUri;fastUri$1.exports.fastUri=fastUri;var fastUriExports=fastUri$1.exports;Object.defineProperty(uri$1,"__esModule",{value:!0});const uri=fastUriExports;uri.code='require("ajv/dist/runtime/uri").default';uri$1.default=uri;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=validate;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=codegen;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=validation_error,a=ref_error,o=rules,s=compile,u=codegen,_=resolve$2,v=dataType,g=util,S=require$$9,U=uri$1,k=(j,y)=>new RegExp(j,y);k.code="new RegExp";const B=["removeAdditional","useDefaults","coerceTypes"],D=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),L={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},R={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},G=200;function J(j){var y,l,b,x,O,z,ae,se,he,Se,Te,Le,dt,He,it,Et,nt,ct,xt,Qe,et,$t,tt,ot,St;const Xe=j.strict,$=(y=j.code)===null||y===void 0?void 0:y.optimize,d=$===!0||$===void 0?1:$||0,h=(b=(l=j.code)===null||l===void 0?void 0:l.regExp)!==null&&b!==void 0?b:k,P=(x=j.uriResolver)!==null&&x!==void 0?x:U.default;return{strictSchema:(z=(O=j.strictSchema)!==null&&O!==void 0?O:Xe)!==null&&z!==void 0?z:!0,strictNumbers:(se=(ae=j.strictNumbers)!==null&&ae!==void 0?ae:Xe)!==null&&se!==void 0?se:!0,strictTypes:(Se=(he=j.strictTypes)!==null&&he!==void 0?he:Xe)!==null&&Se!==void 0?Se:"log",strictTuples:(Le=(Te=j.strictTuples)!==null&&Te!==void 0?Te:Xe)!==null&&Le!==void 0?Le:"log",strictRequired:(He=(dt=j.strictRequired)!==null&&dt!==void 0?dt:Xe)!==null&&He!==void 0?He:!1,code:j.code?{...j.code,optimize:d,regExp:h}:{optimize:d,regExp:h},loopRequired:(it=j.loopRequired)!==null&&it!==void 0?it:G,loopEnum:(Et=j.loopEnum)!==null&&Et!==void 0?Et:G,meta:(nt=j.meta)!==null&&nt!==void 0?nt:!0,messages:(ct=j.messages)!==null&&ct!==void 0?ct:!0,inlineRefs:(xt=j.inlineRefs)!==null&&xt!==void 0?xt:!0,schemaId:(Qe=j.schemaId)!==null&&Qe!==void 0?Qe:"$id",addUsedSchema:(et=j.addUsedSchema)!==null&&et!==void 0?et:!0,validateSchema:($t=j.validateSchema)!==null&&$t!==void 0?$t:!0,validateFormats:(tt=j.validateFormats)!==null&&tt!==void 0?tt:!0,unicodeRegExp:(ot=j.unicodeRegExp)!==null&&ot!==void 0?ot:!0,int32range:(St=j.int32range)!==null&&St!==void 0?St:!0,uriResolver:P}}class ee{constructor(y={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,y=this.opts={...y,...J(y)};const{es5:l,lines:b}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:D,es5:l,lines:b}),this.logger=ie(y.logger);const x=y.validateFormats;y.validateFormats=!1,this.RULES=(0,o.getRules)(),re.call(this,L,y,"NOT SUPPORTED"),re.call(this,R,y,"DEPRECATED","warn"),this._metaOpts=we.call(this),y.formats&&rt.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),y.keywords&&_e.call(this,y.keywords),typeof y.meta=="object"&&this.addMetaSchema(y.meta),je.call(this),y.validateFormats=x}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:y,meta:l,schemaId:b}=this.opts;let x=S;b==="id"&&(x={...S},x.id=x.$id,delete x.$id),l&&y&&this.addMetaSchema(x,x[b],!1)}defaultMeta(){const{meta:y,schemaId:l}=this.opts;return this.opts.defaultMeta=typeof y=="object"?y[l]||y:void 0}validate(y,l){let b;if(typeof y=="string"){if(b=this.getSchema(y),!b)throw new Error(`no schema with key or ref "${y}"`)}else b=this.compile(y);const x=b(l);return"$async"in b||(this.errors=b.errors),x}compile(y,l){const b=this._addSchema(y,l);return b.validate||this._compileSchemaEnv(b)}compileAsync(y,l){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:b}=this.opts;return x.call(this,y,l);async function x(Se,Te){await O.call(this,Se.$schema);const Le=this._addSchema(Se,Te);return Le.validate||z.call(this,Le)}async function O(Se){Se&&!this.getSchema(Se)&&await x.call(this,{$ref:Se},!0)}async function z(Se){try{return this._compileSchemaEnv(Se)}catch(Te){if(!(Te instanceof a.default))throw Te;return ae.call(this,Te),await se.call(this,Te.missingSchema),z.call(this,Se)}}function ae({missingSchema:Se,missingRef:Te}){if(this.refs[Se])throw new Error(`AnySchema ${Se} is loaded but ${Te} cannot be resolved`)}async function se(Se){const Te=await he.call(this,Se);this.refs[Se]||await O.call(this,Te.$schema),this.refs[Se]||this.addSchema(Te,Se,l)}async function he(Se){const Te=this._loading[Se];if(Te)return Te;try{return await(this._loading[Se]=b(Se))}finally{delete this._loading[Se]}}}addSchema(y,l,b,x=this.opts.validateSchema){if(Array.isArray(y)){for(const z of y)this.addSchema(z,void 0,b,x);return this}let O;if(typeof y=="object"){const{schemaId:z}=this.opts;if(O=y[z],O!==void 0&&typeof O!="string")throw new Error(`schema ${z} must be string`)}return l=(0,_.normalizeId)(l||O),this._checkUnique(l),this.schemas[l]=this._addSchema(y,b,l,x,!0),this}addMetaSchema(y,l,b=this.opts.validateSchema){return this.addSchema(y,l,!0,b),this}validateSchema(y,l){if(typeof y=="boolean")return!0;let b;if(b=y.$schema,b!==void 0&&typeof b!="string")throw new Error("$schema must be a string");if(b=b||this.opts.defaultMeta||this.defaultMeta(),!b)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const x=this.validate(b,y);if(!x&&l){const O="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(O);else throw new Error(O)}return x}getSchema(y){let l;for(;typeof(l=le.call(this,y))=="string";)y=l;if(l===void 0){const{schemaId:b}=this.opts,x=new s.SchemaEnv({schema:{},schemaId:b});if(l=s.resolveSchema.call(this,x,y),!l)return;this.refs[y]=l}return l.validate||this._compileSchemaEnv(l)}removeSchema(y){if(y instanceof RegExp)return this._removeAllSchemas(this.schemas,y),this._removeAllSchemas(this.refs,y),this;switch(typeof y){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const l=le.call(this,y);return typeof l=="object"&&this._cache.delete(l.schema),delete this.schemas[y],delete this.refs[y],this}case"object":{const l=y;this._cache.delete(l);let b=y[this.opts.schemaId];return b&&(b=(0,_.normalizeId)(b),delete this.schemas[b],delete this.refs[b]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(y){for(const l of y)this.addKeyword(l);return this}addKeyword(y,l){let b;if(typeof y=="string")b=y,typeof l=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),l.keyword=b);else if(typeof y=="object"&&l===void 0){if(l=y,b=l.keyword,Array.isArray(b)&&!b.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(c.call(this,b,l),!l)return(0,g.eachItem)(b,O=>p.call(this,O)),this;T.call(this,l);const x={...l,type:(0,v.getJSONTypes)(l.type),schemaType:(0,v.getJSONTypes)(l.schemaType)};return(0,g.eachItem)(b,x.type.length===0?O=>p.call(this,O,x):O=>x.type.forEach(z=>p.call(this,O,x,z))),this}getKeyword(y){const l=this.RULES.all[y];return typeof l=="object"?l.definition:!!l}removeKeyword(y){const{RULES:l}=this;delete l.keywords[y],delete l.all[y];for(const b of l.rules){const x=b.rules.findIndex(O=>O.keyword===y);x>=0&&b.rules.splice(x,1)}return this}addFormat(y,l){return typeof l=="string"&&(l=new RegExp(l)),this.formats[y]=l,this}errorsText(y=this.errors,{separator:l=", ",dataVar:b="data"}={}){return!y||y.length===0?"No errors":y.map(x=>`${b}${x.instancePath} ${x.message}`).reduce((x,O)=>x+l+O)}$dataMetaSchema(y,l){const b=this.RULES.all;y=JSON.parse(JSON.stringify(y));for(const x of l){const O=x.split("/").slice(1);let z=y;for(const ae of O)z=z[ae];for(const ae in b){const se=b[ae];if(typeof se!="object")continue;const{$data:he}=se.definition,Se=z[ae];he&&Se&&(z[ae]=F(Se))}}return y}_removeAllSchemas(y,l){for(const b in y){const x=y[b];(!l||l.test(b))&&(typeof x=="string"?delete y[b]:x&&!x.meta&&(this._cache.delete(x.schema),delete y[b]))}}_addSchema(y,l,b,x=this.opts.validateSchema,O=this.opts.addUsedSchema){let z;const{schemaId:ae}=this.opts;if(typeof y=="object")z=y[ae];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof y!="boolean")throw new Error("schema must be object or boolean")}let se=this._cache.get(y);if(se!==void 0)return se;b=(0,_.normalizeId)(z||b);const he=_.getSchemaRefs.call(this,y,b);return se=new s.SchemaEnv({schema:y,schemaId:ae,meta:l,baseId:b,localRefs:he}),this._cache.set(se.schema,se),O&&!b.startsWith("#")&&(b&&this._checkUnique(b),this.refs[b]=se),x&&this.validateSchema(y,!0),se}_checkUnique(y){if(this.schemas[y]||this.refs[y])throw new Error(`schema with key or id "${y}" already exists`)}_compileSchemaEnv(y){if(y.meta?this._compileMetaSchema(y):s.compileSchema.call(this,y),!y.validate)throw new Error("ajv implementation error");return y.validate}_compileMetaSchema(y){const l=this.opts;this.opts=this._metaOpts;try{s.compileSchema.call(this,y)}finally{this.opts=l}}}ee.ValidationError=n.default,ee.MissingRefError=a.default,e.default=ee;function re(j,y,l,b="error"){for(const x in j){const O=x;O in y&&this.logger[b](`${l}: option ${x}. ${j[O]}`)}}function le(j){return j=(0,_.normalizeId)(j),this.schemas[j]||this.refs[j]}function je(){const j=this.opts.schemas;if(j)if(Array.isArray(j))this.addSchema(j);else for(const y in j)this.addSchema(j[y],y)}function rt(){for(const j in this.opts.formats){const y=this.opts.formats[j];y&&this.addFormat(j,y)}}function _e(j){if(Array.isArray(j)){this.addVocabulary(j);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const y in j){const l=j[y];l.keyword||(l.keyword=y),this.addKeyword(l)}}function we(){const j={...this.opts};for(const y of B)delete j[y];return j}const Ee={log(){},warn(){},error(){}};function ie(j){if(j===!1)return Ee;if(j===void 0)return console;if(j.log&&j.warn&&j.error)return j;throw new Error("logger must implement log, warn and error methods")}const M=/^[a-z_$][a-z0-9_$:-]*$/i;function c(j,y){const{RULES:l}=this;if((0,g.eachItem)(j,b=>{if(l.keywords[b])throw new Error(`Keyword ${b} is already defined`);if(!M.test(b))throw new Error(`Keyword ${b} has invalid name`)}),!!y&&y.$data&&!("code"in y||"validate"in y))throw new Error('$data keyword must have "code" or "validate" function')}function p(j,y,l){var b;const x=y==null?void 0:y.post;if(l&&x)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:O}=this;let z=x?O.post:O.rules.find(({type:se})=>se===l);if(z||(z={type:l,rules:[]},O.rules.push(z)),O.keywords[j]=!0,!y)return;const ae={keyword:j,definition:{...y,type:(0,v.getJSONTypes)(y.type),schemaType:(0,v.getJSONTypes)(y.schemaType)}};y.before?E.call(this,z,ae,y.before):z.rules.push(ae),O.all[j]=ae,(b=y.implements)===null||b===void 0||b.forEach(se=>this.addKeyword(se))}function E(j,y,l){const b=j.rules.findIndex(x=>x.keyword===l);b>=0?j.rules.splice(b,0,y):(j.rules.push(y),this.logger.warn(`rule ${l} is not defined`))}function T(j){let{metaSchema:y}=j;y!==void 0&&(j.$data&&this.opts.$data&&(y=F(y)),j.validateSchema=this.compile(y,!0))}const C={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function F(j){return{anyOf:[j,C]}}})(core$2);var draft7={},core$1={},id={};Object.defineProperty(id,"__esModule",{value:!0});const def$s={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};id.default=def$s;var ref={};Object.defineProperty(ref,"__esModule",{value:!0});ref.callRef=ref.getValidate=void 0;const ref_error_1$1=ref_error,code_1$8=code,codegen_1$l=codegen,names_1$1=names$1,compile_1$1=compile,util_1$j=util,def$r={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:a,schemaEnv:o,validateName:s,opts:u,self:_}=n,{root:v}=o;if((r==="#"||r==="#/")&&a===v.baseId)return S();const g=compile_1$1.resolveRef.call(_,v,a,r);if(g===void 0)throw new ref_error_1$1.default(n.opts.uriResolver,a,r);if(g instanceof compile_1$1.SchemaEnv)return U(g);return k(g);function S(){if(o===v)return callRef(e,s,o,o.$async);const B=t.scopeValue("root",{ref:v});return callRef(e,(0,codegen_1$l._)`${B}.validate`,v,v.$async)}function U(B){const D=getValidate(e,B);callRef(e,D,B,B.$async)}function k(B){const D=t.scopeValue("schema",u.code.source===!0?{ref:B,code:(0,codegen_1$l.stringify)(B)}:{ref:B}),L=t.name("valid"),R=e.subschema({schema:B,dataTypes:[],schemaPath:codegen_1$l.nil,topSchemaRef:D,errSchemaPath:r},L);e.mergeEvaluated(R),e.ok(L)}}};function getValidate(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,codegen_1$l._)`${r.scopeValue("wrapper",{ref:t})}.validate`}ref.getValidate=getValidate;function callRef(e,t,r,n){const{gen:a,it:o}=e,{allErrors:s,schemaEnv:u,opts:_}=o,v=_.passContext?names_1$1.default.this:codegen_1$l.nil;n?g():S();function g(){if(!u.$async)throw new Error("async schema referenced by sync schema");const B=a.let("valid");a.try(()=>{a.code((0,codegen_1$l._)`await ${(0,code_1$8.callValidateCode)(e,t,v)}`),k(t),s||a.assign(B,!0)},D=>{a.if((0,codegen_1$l._)`!(${D} instanceof ${o.ValidationError})`,()=>a.throw(D)),U(D),s||a.assign(B,!1)}),e.ok(B)}function S(){e.result((0,code_1$8.callValidateCode)(e,t,v),()=>k(t),()=>U(t))}function U(B){const D=(0,codegen_1$l._)`${B}.errors`;a.assign(names_1$1.default.vErrors,(0,codegen_1$l._)`${names_1$1.default.vErrors} === null ? ${D} : ${names_1$1.default.vErrors}.concat(${D})`),a.assign(names_1$1.default.errors,(0,codegen_1$l._)`${names_1$1.default.vErrors}.length`)}function k(B){var D;if(!o.opts.unevaluated)return;const L=(D=r==null?void 0:r.validate)===null||D===void 0?void 0:D.evaluated;if(o.props!==!0)if(L&&!L.dynamicProps)L.props!==void 0&&(o.props=util_1$j.mergeEvaluated.props(a,L.props,o.props));else{const R=a.var("props",(0,codegen_1$l._)`${B}.evaluated.props`);o.props=util_1$j.mergeEvaluated.props(a,R,o.props,codegen_1$l.Name)}if(o.items!==!0)if(L&&!L.dynamicItems)L.items!==void 0&&(o.items=util_1$j.mergeEvaluated.items(a,L.items,o.items));else{const R=a.var("items",(0,codegen_1$l._)`${B}.evaluated.items`);o.items=util_1$j.mergeEvaluated.items(a,R,o.items,codegen_1$l.Name)}}}ref.callRef=callRef;ref.default=def$r;Object.defineProperty(core$1,"__esModule",{value:!0});const id_1=id,ref_1=ref,core=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",id_1.default,ref_1.default];core$1.default=core;var validation$1={},limitNumber={};Object.defineProperty(limitNumber,"__esModule",{value:!0});const codegen_1$k=codegen,ops=codegen_1$k.operators,KWDs={maximum:{okStr:"<=",ok:ops.LTE,fail:ops.GT},minimum:{okStr:">=",ok:ops.GTE,fail:ops.LT},exclusiveMaximum:{okStr:"<",ok:ops.LT,fail:ops.GTE},exclusiveMinimum:{okStr:">",ok:ops.GT,fail:ops.LTE}},error$i={message:({keyword:e,schemaCode:t})=>(0,codegen_1$k.str)`must be ${KWDs[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,codegen_1$k._)`{comparison: ${KWDs[e].okStr}, limit: ${t}}`},def$q={keyword:Object.keys(KWDs),type:"number",schemaType:"number",$data:!0,error:error$i,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,codegen_1$k._)`${r} ${KWDs[t].fail} ${n} || isNaN(${r})`)}};limitNumber.default=def$q;var multipleOf={};Object.defineProperty(multipleOf,"__esModule",{value:!0});const codegen_1$j=codegen,error$h={message:({schemaCode:e})=>(0,codegen_1$j.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,codegen_1$j._)`{multipleOf: ${e}}`},def$p={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:error$h,code(e){const{gen:t,data:r,schemaCode:n,it:a}=e,o=a.opts.multipleOfPrecision,s=t.let("res"),u=o?(0,codegen_1$j._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${o}`:(0,codegen_1$j._)`${s} !== parseInt(${s})`;e.fail$data((0,codegen_1$j._)`(${n} === 0 || (${s} = ${r}/${n}, ${u}))`)}};multipleOf.default=def$p;var limitLength={},ucs2length$1={};Object.defineProperty(ucs2length$1,"__esModule",{value:!0});function ucs2length(e){const t=e.length;let r=0,n=0,a;for(;n<t;)r++,a=e.charCodeAt(n++),a>=55296&&a<=56319&&n<t&&(a=e.charCodeAt(n),(a&64512)===56320&&n++);return r}ucs2length$1.default=ucs2length;ucs2length.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(limitLength,"__esModule",{value:!0});const codegen_1$i=codegen,util_1$i=util,ucs2length_1=ucs2length$1,error$g={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,codegen_1$i.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,codegen_1$i._)`{limit: ${e}}`},def$o={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:error$g,code(e){const{keyword:t,data:r,schemaCode:n,it:a}=e,o=t==="maxLength"?codegen_1$i.operators.GT:codegen_1$i.operators.LT,s=a.opts.unicode===!1?(0,codegen_1$i._)`${r}.length`:(0,codegen_1$i._)`${(0,util_1$i.useFunc)(e.gen,ucs2length_1.default)}(${r})`;e.fail$data((0,codegen_1$i._)`${s} ${o} ${n}`)}};limitLength.default=def$o;var pattern={};Object.defineProperty(pattern,"__esModule",{value:!0});const code_1$7=code,codegen_1$h=codegen,error$f={message:({schemaCode:e})=>(0,codegen_1$h.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,codegen_1$h._)`{pattern: ${e}}`},def$n={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:error$f,code(e){const{data:t,$data:r,schema:n,schemaCode:a,it:o}=e,s=o.opts.unicodeRegExp?"u":"",u=r?(0,codegen_1$h._)`(new RegExp(${a}, ${s}))`:(0,code_1$7.usePattern)(e,n);e.fail$data((0,codegen_1$h._)`!${u}.test(${t})`)}};pattern.default=def$n;var limitProperties={};Object.defineProperty(limitProperties,"__esModule",{value:!0});const codegen_1$g=codegen,error$e={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,codegen_1$g.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,codegen_1$g._)`{limit: ${e}}`},def$m={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:error$e,code(e){const{keyword:t,data:r,schemaCode:n}=e,a=t==="maxProperties"?codegen_1$g.operators.GT:codegen_1$g.operators.LT;e.fail$data((0,codegen_1$g._)`Object.keys(${r}).length ${a} ${n}`)}};limitProperties.default=def$m;var required={};Object.defineProperty(required,"__esModule",{value:!0});const code_1$6=code,codegen_1$f=codegen,util_1$h=util,error$d={message:({params:{missingProperty:e}})=>(0,codegen_1$f.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,codegen_1$f._)`{missingProperty: ${e}}`},def$l={keyword:"required",type:"object",schemaType:"array",$data:!0,error:error$d,code(e){const{gen:t,schema:r,schemaCode:n,data:a,$data:o,it:s}=e,{opts:u}=s;if(!o&&r.length===0)return;const _=r.length>=u.loopRequired;if(s.allErrors?v():g(),u.strictRequired){const k=e.parentSchema.properties,{definedProperties:B}=e.it;for(const D of r)if((k==null?void 0:k[D])===void 0&&!B.has(D)){const L=s.schemaEnv.baseId+s.errSchemaPath,R=`required property "${D}" is not defined at "${L}" (strictRequired)`;(0,util_1$h.checkStrictMode)(s,R,s.opts.strictRequired)}}function v(){if(_||o)e.block$data(codegen_1$f.nil,S);else for(const k of r)(0,code_1$6.checkReportMissingProp)(e,k)}function g(){const k=t.let("missing");if(_||o){const B=t.let("valid",!0);e.block$data(B,()=>U(k,B)),e.ok(B)}else t.if((0,code_1$6.checkMissingProp)(e,r,k)),(0,code_1$6.reportMissingProp)(e,k),t.else()}function S(){t.forOf("prop",n,k=>{e.setParams({missingProperty:k}),t.if((0,code_1$6.noPropertyInData)(t,a,k,u.ownProperties),()=>e.error())})}function U(k,B){e.setParams({missingProperty:k}),t.forOf(k,n,()=>{t.assign(B,(0,code_1$6.propertyInData)(t,a,k,u.ownProperties)),t.if((0,codegen_1$f.not)(B),()=>{e.error(),t.break()})},codegen_1$f.nil)}}};required.default=def$l;var limitItems={};Object.defineProperty(limitItems,"__esModule",{value:!0});const codegen_1$e=codegen,error$c={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,codegen_1$e.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,codegen_1$e._)`{limit: ${e}}`},def$k={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:error$c,code(e){const{keyword:t,data:r,schemaCode:n}=e,a=t==="maxItems"?codegen_1$e.operators.GT:codegen_1$e.operators.LT;e.fail$data((0,codegen_1$e._)`${r}.length ${a} ${n}`)}};limitItems.default=def$k;var uniqueItems={},equal$1={};Object.defineProperty(equal$1,"__esModule",{value:!0});const equal=fastDeepEqual;equal.code='require("ajv/dist/runtime/equal").default';equal$1.default=equal;Object.defineProperty(uniqueItems,"__esModule",{value:!0});const dataType_1=dataType,codegen_1$d=codegen,util_1$g=util,equal_1$2=equal$1,error$b={message:({params:{i:e,j:t}})=>(0,codegen_1$d.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,codegen_1$d._)`{i: ${e}, j: ${t}}`},def$j={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:error$b,code(e){const{gen:t,data:r,$data:n,schema:a,parentSchema:o,schemaCode:s,it:u}=e;if(!n&&!a)return;const _=t.let("valid"),v=o.items?(0,dataType_1.getSchemaTypes)(o.items):[];e.block$data(_,g,(0,codegen_1$d._)`${s} === false`),e.ok(_);function g(){const B=t.let("i",(0,codegen_1$d._)`${r}.length`),D=t.let("j");e.setParams({i:B,j:D}),t.assign(_,!0),t.if((0,codegen_1$d._)`${B} > 1`,()=>(S()?U:k)(B,D))}function S(){return v.length>0&&!v.some(B=>B==="object"||B==="array")}function U(B,D){const L=t.name("item"),R=(0,dataType_1.checkDataTypes)(v,L,u.opts.strictNumbers,dataType_1.DataType.Wrong),G=t.const("indices",(0,codegen_1$d._)`{}`);t.for((0,codegen_1$d._)`;${B}--;`,()=>{t.let(L,(0,codegen_1$d._)`${r}[${B}]`),t.if(R,(0,codegen_1$d._)`continue`),v.length>1&&t.if((0,codegen_1$d._)`typeof ${L} == "string"`,(0,codegen_1$d._)`${L} += "_"`),t.if((0,codegen_1$d._)`typeof ${G}[${L}] == "number"`,()=>{t.assign(D,(0,codegen_1$d._)`${G}[${L}]`),e.error(),t.assign(_,!1).break()}).code((0,codegen_1$d._)`${G}[${L}] = ${B}`)})}function k(B,D){const L=(0,util_1$g.useFunc)(t,equal_1$2.default),R=t.name("outer");t.label(R).for((0,codegen_1$d._)`;${B}--;`,()=>t.for((0,codegen_1$d._)`${D} = ${B}; ${D}--;`,()=>t.if((0,codegen_1$d._)`${L}(${r}[${B}], ${r}[${D}])`,()=>{e.error(),t.assign(_,!1).break(R)})))}}};uniqueItems.default=def$j;var _const={};Object.defineProperty(_const,"__esModule",{value:!0});const codegen_1$c=codegen,util_1$f=util,equal_1$1=equal$1,error$a={message:"must be equal to constant",params:({schemaCode:e})=>(0,codegen_1$c._)`{allowedValue: ${e}}`},def$i={keyword:"const",$data:!0,error:error$a,code(e){const{gen:t,data:r,$data:n,schemaCode:a,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,codegen_1$c._)`!${(0,util_1$f.useFunc)(t,equal_1$1.default)}(${r}, ${a})`):e.fail((0,codegen_1$c._)`${o} !== ${r}`)}};_const.default=def$i;var _enum={};Object.defineProperty(_enum,"__esModule",{value:!0});const codegen_1$b=codegen,util_1$e=util,equal_1=equal$1,error$9={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,codegen_1$b._)`{allowedValues: ${e}}`},def$h={keyword:"enum",schemaType:"array",$data:!0,error:error$9,code(e){const{gen:t,data:r,$data:n,schema:a,schemaCode:o,it:s}=e;if(!n&&a.length===0)throw new Error("enum must have non-empty array");const u=a.length>=s.opts.loopEnum;let _;const v=()=>_??(_=(0,util_1$e.useFunc)(t,equal_1.default));let g;if(u||n)g=t.let("valid"),e.block$data(g,S);else{if(!Array.isArray(a))throw new Error("ajv implementation error");const k=t.const("vSchema",o);g=(0,codegen_1$b.or)(...a.map((B,D)=>U(k,D)))}e.pass(g);function S(){t.assign(g,!1),t.forOf("v",o,k=>t.if((0,codegen_1$b._)`${v()}(${r}, ${k})`,()=>t.assign(g,!0).break()))}function U(k,B){const D=a[B];return typeof D=="object"&&D!==null?(0,codegen_1$b._)`${v()}(${r}, ${k}[${B}])`:(0,codegen_1$b._)`${r} === ${D}`}}};_enum.default=def$h;Object.defineProperty(validation$1,"__esModule",{value:!0});const limitNumber_1=limitNumber,multipleOf_1=multipleOf,limitLength_1=limitLength,pattern_1=pattern,limitProperties_1=limitProperties,required_1=required,limitItems_1=limitItems,uniqueItems_1=uniqueItems,const_1=_const,enum_1=_enum,validation=[limitNumber_1.default,multipleOf_1.default,limitLength_1.default,pattern_1.default,limitProperties_1.default,required_1.default,limitItems_1.default,uniqueItems_1.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},const_1.default,enum_1.default];validation$1.default=validation;var applicator={},additionalItems={};Object.defineProperty(additionalItems,"__esModule",{value:!0});additionalItems.validateAdditionalItems=void 0;const codegen_1$a=codegen,util_1$d=util,error$8={message:({params:{len:e}})=>(0,codegen_1$a.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,codegen_1$a._)`{limit: ${e}}`},def$g={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:error$8,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,util_1$d.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}validateAdditionalItems(e,n)}};function validateAdditionalItems(e,t){const{gen:r,schema:n,data:a,keyword:o,it:s}=e;s.items=!0;const u=r.const("len",(0,codegen_1$a._)`${a}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,codegen_1$a._)`${u} <= ${t.length}`);else if(typeof n=="object"&&!(0,util_1$d.alwaysValidSchema)(s,n)){const v=r.var("valid",(0,codegen_1$a._)`${u} <= ${t.length}`);r.if((0,codegen_1$a.not)(v),()=>_(v)),e.ok(v)}function _(v){r.forRange("i",t.length,u,g=>{e.subschema({keyword:o,dataProp:g,dataPropType:util_1$d.Type.Num},v),s.allErrors||r.if((0,codegen_1$a.not)(v),()=>r.break())})}}additionalItems.validateAdditionalItems=validateAdditionalItems;additionalItems.default=def$g;var prefixItems={},items={};Object.defineProperty(items,"__esModule",{value:!0});items.validateTuple=void 0;const codegen_1$9=codegen,util_1$c=util,code_1$5=code,def$f={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return validateTuple(e,"additionalItems",t);r.items=!0,!(0,util_1$c.alwaysValidSchema)(r,t)&&e.ok((0,code_1$5.validateArray)(e))}};function validateTuple(e,t,r=e.schema){const{gen:n,parentSchema:a,data:o,keyword:s,it:u}=e;g(a),u.opts.unevaluated&&r.length&&u.items!==!0&&(u.items=util_1$c.mergeEvaluated.items(n,r.length,u.items));const _=n.name("valid"),v=n.const("len",(0,codegen_1$9._)`${o}.length`);r.forEach((S,U)=>{(0,util_1$c.alwaysValidSchema)(u,S)||(n.if((0,codegen_1$9._)`${v} > ${U}`,()=>e.subschema({keyword:s,schemaProp:U,dataProp:U},_)),e.ok(_))});function g(S){const{opts:U,errSchemaPath:k}=u,B=r.length,D=B===S.minItems&&(B===S.maxItems||S[t]===!1);if(U.strictTuples&&!D){const L=`"${s}" is ${B}-tuple, but minItems or maxItems/${t} are not specified or different at path "${k}"`;(0,util_1$c.checkStrictMode)(u,L,U.strictTuples)}}}items.validateTuple=validateTuple;items.default=def$f;Object.defineProperty(prefixItems,"__esModule",{value:!0});const items_1$1=items,def$e={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,items_1$1.validateTuple)(e,"items")};prefixItems.default=def$e;var items2020={};Object.defineProperty(items2020,"__esModule",{value:!0});const codegen_1$8=codegen,util_1$b=util,code_1$4=code,additionalItems_1$1=additionalItems,error$7={message:({params:{len:e}})=>(0,codegen_1$8.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,codegen_1$8._)`{limit: ${e}}`},def$d={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:error$7,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:a}=r;n.items=!0,!(0,util_1$b.alwaysValidSchema)(n,t)&&(a?(0,additionalItems_1$1.validateAdditionalItems)(e,a):e.ok((0,code_1$4.validateArray)(e)))}};items2020.default=def$d;var contains={};Object.defineProperty(contains,"__esModule",{value:!0});const codegen_1$7=codegen,util_1$a=util,error$6={message:({params:{min:e,max:t}})=>t===void 0?(0,codegen_1$7.str)`must contain at least ${e} valid item(s)`:(0,codegen_1$7.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,codegen_1$7._)`{minContains: ${e}}`:(0,codegen_1$7._)`{minContains: ${e}, maxContains: ${t}}`},def$c={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:error$6,code(e){const{gen:t,schema:r,parentSchema:n,data:a,it:o}=e;let s,u;const{minContains:_,maxContains:v}=n;o.opts.next?(s=_===void 0?1:_,u=v):s=1;const g=t.const("len",(0,codegen_1$7._)`${a}.length`);if(e.setParams({min:s,max:u}),u===void 0&&s===0){(0,util_1$a.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(u!==void 0&&s>u){(0,util_1$a.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,util_1$a.alwaysValidSchema)(o,r)){let D=(0,codegen_1$7._)`${g} >= ${s}`;u!==void 0&&(D=(0,codegen_1$7._)`${D} && ${g} <= ${u}`),e.pass(D);return}o.items=!0;const S=t.name("valid");u===void 0&&s===1?k(S,()=>t.if(S,()=>t.break())):s===0?(t.let(S,!0),u!==void 0&&t.if((0,codegen_1$7._)`${a}.length > 0`,U)):(t.let(S,!1),U()),e.result(S,()=>e.reset());function U(){const D=t.name("_valid"),L=t.let("count",0);k(D,()=>t.if(D,()=>B(L)))}function k(D,L){t.forRange("i",0,g,R=>{e.subschema({keyword:"contains",dataProp:R,dataPropType:util_1$a.Type.Num,compositeRule:!0},D),L()})}function B(D){t.code((0,codegen_1$7._)`${D}++`),u===void 0?t.if((0,codegen_1$7._)`${D} >= ${s}`,()=>t.assign(S,!0).break()):(t.if((0,codegen_1$7._)`${D} > ${u}`,()=>t.assign(S,!1).break()),s===1?t.assign(S,!0):t.if((0,codegen_1$7._)`${D} >= ${s}`,()=>t.assign(S,!0)))}}};contains.default=def$c;var dependencies={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=codegen,r=util,n=code;e.error={message:({params:{property:_,depsCount:v,deps:g}})=>{const S=v===1?"property":"properties";return(0,t.str)`must have ${S} ${g} when property ${_} is present`},params:({params:{property:_,depsCount:v,deps:g,missingProperty:S}})=>(0,t._)`{property: ${_},
    missingProperty: ${S},
    depsCount: ${v},
    deps: ${g}}`};const a={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(_){const[v,g]=o(_);s(_,v),u(_,g)}};function o({schema:_}){const v={},g={};for(const S in _){if(S==="__proto__")continue;const U=Array.isArray(_[S])?v:g;U[S]=_[S]}return[v,g]}function s(_,v=_.schema){const{gen:g,data:S,it:U}=_;if(Object.keys(v).length===0)return;const k=g.let("missing");for(const B in v){const D=v[B];if(D.length===0)continue;const L=(0,n.propertyInData)(g,S,B,U.opts.ownProperties);_.setParams({property:B,depsCount:D.length,deps:D.join(", ")}),U.allErrors?g.if(L,()=>{for(const R of D)(0,n.checkReportMissingProp)(_,R)}):(g.if((0,t._)`${L} && (${(0,n.checkMissingProp)(_,D,k)})`),(0,n.reportMissingProp)(_,k),g.else())}}e.validatePropertyDeps=s;function u(_,v=_.schema){const{gen:g,data:S,keyword:U,it:k}=_,B=g.name("valid");for(const D in v)(0,r.alwaysValidSchema)(k,v[D])||(g.if((0,n.propertyInData)(g,S,D,k.opts.ownProperties),()=>{const L=_.subschema({keyword:U,schemaProp:D},B);_.mergeValidEvaluated(L,B)},()=>g.var(B,!0)),_.ok(B))}e.validateSchemaDeps=u,e.default=a})(dependencies);var propertyNames={};Object.defineProperty(propertyNames,"__esModule",{value:!0});const codegen_1$6=codegen,util_1$9=util,error$5={message:"property name must be valid",params:({params:e})=>(0,codegen_1$6._)`{propertyName: ${e.propertyName}}`},def$b={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:error$5,code(e){const{gen:t,schema:r,data:n,it:a}=e;if((0,util_1$9.alwaysValidSchema)(a,r))return;const o=t.name("valid");t.forIn("key",n,s=>{e.setParams({propertyName:s}),e.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},o),t.if((0,codegen_1$6.not)(o),()=>{e.error(!0),a.allErrors||t.break()})}),e.ok(o)}};propertyNames.default=def$b;var additionalProperties={};Object.defineProperty(additionalProperties,"__esModule",{value:!0});const code_1$3=code,codegen_1$5=codegen,names_1=names$1,util_1$8=util,error$4={message:"must NOT have additional properties",params:({params:e})=>(0,codegen_1$5._)`{additionalProperty: ${e.additionalProperty}}`},def$a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:error$4,code(e){const{gen:t,schema:r,parentSchema:n,data:a,errsCount:o,it:s}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:u,opts:_}=s;if(s.props=!0,_.removeAdditional!=="all"&&(0,util_1$8.alwaysValidSchema)(s,r))return;const v=(0,code_1$3.allSchemaProperties)(n.properties),g=(0,code_1$3.allSchemaProperties)(n.patternProperties);S(),e.ok((0,codegen_1$5._)`${o} === ${names_1.default.errors}`);function S(){t.forIn("key",a,L=>{!v.length&&!g.length?B(L):t.if(U(L),()=>B(L))})}function U(L){let R;if(v.length>8){const G=(0,util_1$8.schemaRefOrVal)(s,n.properties,"properties");R=(0,code_1$3.isOwnProperty)(t,G,L)}else v.length?R=(0,codegen_1$5.or)(...v.map(G=>(0,codegen_1$5._)`${L} === ${G}`)):R=codegen_1$5.nil;return g.length&&(R=(0,codegen_1$5.or)(R,...g.map(G=>(0,codegen_1$5._)`${(0,code_1$3.usePattern)(e,G)}.test(${L})`))),(0,codegen_1$5.not)(R)}function k(L){t.code((0,codegen_1$5._)`delete ${a}[${L}]`)}function B(L){if(_.removeAdditional==="all"||_.removeAdditional&&r===!1){k(L);return}if(r===!1){e.setParams({additionalProperty:L}),e.error(),u||t.break();return}if(typeof r=="object"&&!(0,util_1$8.alwaysValidSchema)(s,r)){const R=t.name("valid");_.removeAdditional==="failing"?(D(L,R,!1),t.if((0,codegen_1$5.not)(R),()=>{e.reset(),k(L)})):(D(L,R),u||t.if((0,codegen_1$5.not)(R),()=>t.break()))}}function D(L,R,G){const J={keyword:"additionalProperties",dataProp:L,dataPropType:util_1$8.Type.Str};G===!1&&Object.assign(J,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(J,R)}}};additionalProperties.default=def$a;var properties$1={};Object.defineProperty(properties$1,"__esModule",{value:!0});const validate_1=validate,code_1$2=code,util_1$7=util,additionalProperties_1$1=additionalProperties,def$9={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:a,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&additionalProperties_1$1.default.code(new validate_1.KeywordCxt(o,additionalProperties_1$1.default,"additionalProperties"));const s=(0,code_1$2.allSchemaProperties)(r);for(const S of s)o.definedProperties.add(S);o.opts.unevaluated&&s.length&&o.props!==!0&&(o.props=util_1$7.mergeEvaluated.props(t,(0,util_1$7.toHash)(s),o.props));const u=s.filter(S=>!(0,util_1$7.alwaysValidSchema)(o,r[S]));if(u.length===0)return;const _=t.name("valid");for(const S of u)v(S)?g(S):(t.if((0,code_1$2.propertyInData)(t,a,S,o.opts.ownProperties)),g(S),o.allErrors||t.else().var(_,!0),t.endIf()),e.it.definedProperties.add(S),e.ok(_);function v(S){return o.opts.useDefaults&&!o.compositeRule&&r[S].default!==void 0}function g(S){e.subschema({keyword:"properties",schemaProp:S,dataProp:S},_)}}};properties$1.default=def$9;var patternProperties={};Object.defineProperty(patternProperties,"__esModule",{value:!0});const code_1$1=code,codegen_1$4=codegen,util_1$6=util,util_2=util,def$8={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:a,it:o}=e,{opts:s}=o,u=(0,code_1$1.allSchemaProperties)(r),_=u.filter(D=>(0,util_1$6.alwaysValidSchema)(o,r[D]));if(u.length===0||_.length===u.length&&(!o.opts.unevaluated||o.props===!0))return;const v=s.strictSchema&&!s.allowMatchingProperties&&a.properties,g=t.name("valid");o.props!==!0&&!(o.props instanceof codegen_1$4.Name)&&(o.props=(0,util_2.evaluatedPropsToName)(t,o.props));const{props:S}=o;U();function U(){for(const D of u)v&&k(D),o.allErrors?B(D):(t.var(g,!0),B(D),t.if(g))}function k(D){for(const L in v)new RegExp(D).test(L)&&(0,util_1$6.checkStrictMode)(o,`property ${L} matches pattern ${D} (use allowMatchingProperties)`)}function B(D){t.forIn("key",n,L=>{t.if((0,codegen_1$4._)`${(0,code_1$1.usePattern)(e,D)}.test(${L})`,()=>{const R=_.includes(D);R||e.subschema({keyword:"patternProperties",schemaProp:D,dataProp:L,dataPropType:util_2.Type.Str},g),o.opts.unevaluated&&S!==!0?t.assign((0,codegen_1$4._)`${S}[${L}]`,!0):!R&&!o.allErrors&&t.if((0,codegen_1$4.not)(g),()=>t.break())})})}}};patternProperties.default=def$8;var not={};Object.defineProperty(not,"__esModule",{value:!0});const util_1$5=util,def$7={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,util_1$5.alwaysValidSchema)(n,r)){e.fail();return}const a=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},a),e.failResult(a,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};not.default=def$7;var anyOf={};Object.defineProperty(anyOf,"__esModule",{value:!0});const code_1=code,def$6={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:code_1.validateUnion,error:{message:"must match a schema in anyOf"}};anyOf.default=def$6;var oneOf={};Object.defineProperty(oneOf,"__esModule",{value:!0});const codegen_1$3=codegen,util_1$4=util,error$3={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,codegen_1$3._)`{passingSchemas: ${e.passing}}`},def$5={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:error$3,code(e){const{gen:t,schema:r,parentSchema:n,it:a}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(a.opts.discriminator&&n.discriminator)return;const o=r,s=t.let("valid",!1),u=t.let("passing",null),_=t.name("_valid");e.setParams({passing:u}),t.block(v),e.result(s,()=>e.reset(),()=>e.error(!0));function v(){o.forEach((g,S)=>{let U;(0,util_1$4.alwaysValidSchema)(a,g)?t.var(_,!0):U=e.subschema({keyword:"oneOf",schemaProp:S,compositeRule:!0},_),S>0&&t.if((0,codegen_1$3._)`${_} && ${s}`).assign(s,!1).assign(u,(0,codegen_1$3._)`[${u}, ${S}]`).else(),t.if(_,()=>{t.assign(s,!0),t.assign(u,S),U&&e.mergeEvaluated(U,codegen_1$3.Name)})})}}};oneOf.default=def$5;var allOf={};Object.defineProperty(allOf,"__esModule",{value:!0});const util_1$3=util,def$4={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const a=t.name("valid");r.forEach((o,s)=>{if((0,util_1$3.alwaysValidSchema)(n,o))return;const u=e.subschema({keyword:"allOf",schemaProp:s},a);e.ok(a),e.mergeEvaluated(u)})}};allOf.default=def$4;var _if={};Object.defineProperty(_if,"__esModule",{value:!0});const codegen_1$2=codegen,util_1$2=util,error$2={message:({params:e})=>(0,codegen_1$2.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,codegen_1$2._)`{failingKeyword: ${e.ifClause}}`},def$3={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:error$2,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,util_1$2.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const a=hasSchema(n,"then"),o=hasSchema(n,"else");if(!a&&!o)return;const s=t.let("valid",!0),u=t.name("_valid");if(_(),e.reset(),a&&o){const g=t.let("ifClause");e.setParams({ifClause:g}),t.if(u,v("then",g),v("else",g))}else a?t.if(u,v("then")):t.if((0,codegen_1$2.not)(u),v("else"));e.pass(s,()=>e.error(!0));function _(){const g=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},u);e.mergeEvaluated(g)}function v(g,S){return()=>{const U=e.subschema({keyword:g},u);t.assign(s,u),e.mergeValidEvaluated(U,s),S?t.assign(S,(0,codegen_1$2._)`${g}`):e.setParams({ifClause:g})}}}};function hasSchema(e,t){const r=e.schema[t];return r!==void 0&&!(0,util_1$2.alwaysValidSchema)(e,r)}_if.default=def$3;var thenElse={};Object.defineProperty(thenElse,"__esModule",{value:!0});const util_1$1=util,def$2={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,util_1$1.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};thenElse.default=def$2;Object.defineProperty(applicator,"__esModule",{value:!0});const additionalItems_1=additionalItems,prefixItems_1=prefixItems,items_1=items,items2020_1=items2020,contains_1=contains,dependencies_1=dependencies,propertyNames_1=propertyNames,additionalProperties_1=additionalProperties,properties_1=properties$1,patternProperties_1=patternProperties,not_1=not,anyOf_1=anyOf,oneOf_1=oneOf,allOf_1=allOf,if_1=_if,thenElse_1=thenElse;function getApplicator(e=!1){const t=[not_1.default,anyOf_1.default,oneOf_1.default,allOf_1.default,if_1.default,thenElse_1.default,propertyNames_1.default,additionalProperties_1.default,dependencies_1.default,properties_1.default,patternProperties_1.default];return e?t.push(prefixItems_1.default,items2020_1.default):t.push(additionalItems_1.default,items_1.default),t.push(contains_1.default),t}applicator.default=getApplicator;var format$2={},format$1={};Object.defineProperty(format$1,"__esModule",{value:!0});const codegen_1$1=codegen,error$1={message:({schemaCode:e})=>(0,codegen_1$1.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,codegen_1$1._)`{format: ${e}}`},def$1={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:error$1,code(e,t){const{gen:r,data:n,$data:a,schema:o,schemaCode:s,it:u}=e,{opts:_,errSchemaPath:v,schemaEnv:g,self:S}=u;if(!_.validateFormats)return;a?U():k();function U(){const B=r.scopeValue("formats",{ref:S.formats,code:_.code.formats}),D=r.const("fDef",(0,codegen_1$1._)`${B}[${s}]`),L=r.let("fType"),R=r.let("format");r.if((0,codegen_1$1._)`typeof ${D} == "object" && !(${D} instanceof RegExp)`,()=>r.assign(L,(0,codegen_1$1._)`${D}.type || "string"`).assign(R,(0,codegen_1$1._)`${D}.validate`),()=>r.assign(L,(0,codegen_1$1._)`"string"`).assign(R,D)),e.fail$data((0,codegen_1$1.or)(G(),J()));function G(){return _.strictSchema===!1?codegen_1$1.nil:(0,codegen_1$1._)`${s} && !${R}`}function J(){const ee=g.$async?(0,codegen_1$1._)`(${D}.async ? await ${R}(${n}) : ${R}(${n}))`:(0,codegen_1$1._)`${R}(${n})`,re=(0,codegen_1$1._)`(typeof ${R} == "function" ? ${ee} : ${R}.test(${n}))`;return(0,codegen_1$1._)`${R} && ${R} !== true && ${L} === ${t} && !${re}`}}function k(){const B=S.formats[o];if(!B){G();return}if(B===!0)return;const[D,L,R]=J(B);D===t&&e.pass(ee());function G(){if(_.strictSchema===!1){S.logger.warn(re());return}throw new Error(re());function re(){return`unknown format "${o}" ignored in schema at path "${v}"`}}function J(re){const le=re instanceof RegExp?(0,codegen_1$1.regexpCode)(re):_.code.formats?(0,codegen_1$1._)`${_.code.formats}${(0,codegen_1$1.getProperty)(o)}`:void 0,je=r.scopeValue("formats",{key:o,ref:re,code:le});return typeof re=="object"&&!(re instanceof RegExp)?[re.type||"string",re.validate,(0,codegen_1$1._)`${je}.validate`]:["string",re,je]}function ee(){if(typeof B=="object"&&!(B instanceof RegExp)&&B.async){if(!g.$async)throw new Error("async format in sync schema");return(0,codegen_1$1._)`await ${R}(${n})`}return typeof L=="function"?(0,codegen_1$1._)`${R}(${n})`:(0,codegen_1$1._)`${R}.test(${n})`}}}};format$1.default=def$1;Object.defineProperty(format$2,"__esModule",{value:!0});const format_1$1=format$1,format=[format_1$1.default];format$2.default=format;var metadata={};Object.defineProperty(metadata,"__esModule",{value:!0});metadata.contentVocabulary=metadata.metadataVocabulary=void 0;metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(draft7,"__esModule",{value:!0});const core_1=core$1,validation_1=validation$1,applicator_1=applicator,format_1=format$2,metadata_1=metadata,draft7Vocabularies=[core_1.default,validation_1.default,(0,applicator_1.default)(),format_1.default,metadata_1.metadataVocabulary,metadata_1.contentVocabulary];draft7.default=draft7Vocabularies;var discriminator={},types={};Object.defineProperty(types,"__esModule",{value:!0});types.DiscrError=void 0;var DiscrError;(function(e){e.Tag="tag",e.Mapping="mapping"})(DiscrError||(types.DiscrError=DiscrError={}));Object.defineProperty(discriminator,"__esModule",{value:!0});const codegen_1=codegen,types_1$1=types,compile_1=compile,ref_error_1=ref_error,util_1=util,error={message:({params:{discrError:e,tagName:t}})=>e===types_1$1.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,codegen_1._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},def={keyword:"discriminator",type:"object",schemaType:"object",error,code(e){const{gen:t,data:r,schema:n,parentSchema:a,it:o}=e,{oneOf:s}=a;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const u=n.propertyName;if(typeof u!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");const _=t.let("valid",!1),v=t.const("tag",(0,codegen_1._)`${r}${(0,codegen_1.getProperty)(u)}`);t.if((0,codegen_1._)`typeof ${v} == "string"`,()=>g(),()=>e.error(!1,{discrError:types_1$1.DiscrError.Tag,tag:v,tagName:u})),e.ok(_);function g(){const k=U();t.if(!1);for(const B in k)t.elseIf((0,codegen_1._)`${v} === ${B}`),t.assign(_,S(k[B]));t.else(),e.error(!1,{discrError:types_1$1.DiscrError.Mapping,tag:v,tagName:u}),t.endIf()}function S(k){const B=t.name("valid"),D=e.subschema({keyword:"oneOf",schemaProp:k},B);return e.mergeEvaluated(D,codegen_1.Name),B}function U(){var k;const B={},D=R(a);let L=!0;for(let ee=0;ee<s.length;ee++){let re=s[ee];if(re!=null&&re.$ref&&!(0,util_1.schemaHasRulesButRef)(re,o.self.RULES)){const je=re.$ref;if(re=compile_1.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,je),re instanceof compile_1.SchemaEnv&&(re=re.schema),re===void 0)throw new ref_error_1.default(o.opts.uriResolver,o.baseId,je)}const le=(k=re==null?void 0:re.properties)===null||k===void 0?void 0:k[u];if(typeof le!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${u}"`);L=L&&(D||R(re)),G(le,ee)}if(!L)throw new Error(`discriminator: "${u}" must be required`);return B;function R({required:ee}){return Array.isArray(ee)&&ee.includes(u)}function G(ee,re){if(ee.const)J(ee.const,re);else if(ee.enum)for(const le of ee.enum)J(le,re);else throw new Error(`discriminator: "properties/${u}" must have "const" or "enum"`)}function J(ee,re){if(typeof ee!="string"||ee in B)throw new Error(`discriminator: "${u}" values must be unique strings`);B[ee]=re}}}};discriminator.default=def;const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type,properties,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=core$2,n=draft7,a=discriminator,o=require$$3,s=["/properties"],u="http://json-schema.org/draft-07/schema";class _ extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(B=>this.addVocabulary(B)),this.opts.discriminator&&this.addKeyword(a.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const B=this.opts.$data?this.$dataMetaSchema(o,s):o;this.addMetaSchema(B,u,!1),this.refs["http://json-schema.org/schema"]=u}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(u)?u:void 0)}}t.Ajv=_,e.exports=t=_,e.exports.Ajv=_,Object.defineProperty(t,"__esModule",{value:!0}),t.default=_;var v=validate;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return v.KeywordCxt}});var g=codegen;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return g._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return g.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return g.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return g.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return g.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return g.CodeGen}});var S=validation_error;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return S.default}});var U=ref_error;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return U.default}})})(ajv,ajv.exports);var ajvExports=ajv.exports,dist={exports:{}},formats={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(_e,we){return{validate:_e,compare:we}}e.fullFormats={date:t(o,s),time:t(_,v),"date-time":t(S,U),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:D,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:rt,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:R,int32:{type:"number",validate:ee},int64:{type:"number",validate:re},float:{type:"number",validate:le},double:{type:"number",validate:le},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,v),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,U),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(_e){return _e%4===0&&(_e%100!==0||_e%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(_e){const we=n.exec(_e);if(!we)return!1;const Ee=+we[1],ie=+we[2],M=+we[3];return ie>=1&&ie<=12&&M>=1&&M<=(ie===2&&r(Ee)?29:a[ie])}function s(_e,we){if(_e&&we)return _e>we?1:_e<we?-1:0}const u=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function _(_e,we){const Ee=u.exec(_e);if(!Ee)return!1;const ie=+Ee[1],M=+Ee[2],c=+Ee[3],p=Ee[5];return(ie<=23&&M<=59&&c<=59||ie===23&&M===59&&c===60)&&(!we||p!=="")}function v(_e,we){if(!(_e&&we))return;const Ee=u.exec(_e),ie=u.exec(we);if(Ee&&ie)return _e=Ee[1]+Ee[2]+Ee[3]+(Ee[4]||""),we=ie[1]+ie[2]+ie[3]+(ie[4]||""),_e>we?1:_e<we?-1:0}const g=/t|\s/i;function S(_e){const we=_e.split(g);return we.length===2&&o(we[0])&&_(we[1],!0)}function U(_e,we){if(!(_e&&we))return;const[Ee,ie]=_e.split(g),[M,c]=we.split(g),p=s(Ee,M);if(p!==void 0)return p||v(ie,c)}const k=/\/|:/,B=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function D(_e){return k.test(_e)&&B.test(_e)}const L=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function R(_e){return L.lastIndex=0,L.test(_e)}const G=-(2**31),J=2**31-1;function ee(_e){return Number.isInteger(_e)&&_e<=J&&_e>=G}function re(_e){return Number.isInteger(_e)}function le(){return!0}const je=/[^\\]\\Z/;function rt(_e){if(je.test(_e))return!1;try{return new RegExp(_e),!0}catch{return!1}}})(formats);var limit={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=ajvExports,r=codegen,n=r.operators,a={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},o={message:({keyword:u,schemaCode:_})=>r.str`should be ${a[u].okStr} ${_}`,params:({keyword:u,schemaCode:_})=>r._`{comparison: ${a[u].okStr}, limit: ${_}}`};e.formatLimitDefinition={keyword:Object.keys(a),type:"string",schemaType:"string",$data:!0,error:o,code(u){const{gen:_,data:v,schemaCode:g,keyword:S,it:U}=u,{opts:k,self:B}=U;if(!k.validateFormats)return;const D=new t.KeywordCxt(U,B.RULES.all.format.definition,"format");D.$data?L():R();function L(){const J=_.scopeValue("formats",{ref:B.formats,code:k.code.formats}),ee=_.const("fmt",r._`${J}[${D.schemaCode}]`);u.fail$data(r.or(r._`typeof ${ee} != "object"`,r._`${ee} instanceof RegExp`,r._`typeof ${ee}.compare != "function"`,G(ee)))}function R(){const J=D.schema,ee=B.formats[J];if(!ee||ee===!0)return;if(typeof ee!="object"||ee instanceof RegExp||typeof ee.compare!="function")throw new Error(`"${S}": format "${J}" does not define "compare" function`);const re=_.scopeValue("formats",{key:J,ref:ee,code:k.code.formats?r._`${k.code.formats}${r.getProperty(J)}`:void 0});u.fail$data(G(re))}function G(J){return r._`${J}.compare(${v}, ${g}) ${a[S].fail} 0`}},dependencies:["format"]};const s=u=>(u.addKeyword(e.formatLimitDefinition),u);e.default=s})(limit);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=formats,n=limit,a=codegen,o=new a.Name("fullFormats"),s=new a.Name("fastFormats"),u=(v,g={keywords:!0})=>{if(Array.isArray(g))return _(v,g,r.fullFormats,o),v;const[S,U]=g.mode==="fast"?[r.fastFormats,s]:[r.fullFormats,o],k=g.formats||r.formatNames;return _(v,k,S,U),g.keywords&&n.default(v),v};u.get=(v,g="full")=>{const U=(g==="fast"?r.fastFormats:r.fullFormats)[v];if(!U)throw new Error(`Unknown format "${v}"`);return U};function _(v,g,S,U){var k,B;(k=(B=v.opts.code).formats)!==null&&k!==void 0||(B.formats=a._`require("ajv-formats/dist/formats").${U}`);for(const D of g)v.addFormat(D,S[D])}e.exports=t=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u})(dist,dist.exports);var distExports=dist.exports,lib$4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AbiSerializationType=e.AbiFunctionModifier=e.AbiFunctionKind=e.SCHEMA_VERSION=void 0,e.SCHEMA_VERSION="0.3.0",function(t){t.View="view",t.Call="call"}(e.AbiFunctionKind||(e.AbiFunctionKind={})),function(t){t.Init="init",t.Private="private",t.Payable="payable"}(e.AbiFunctionModifier||(e.AbiFunctionModifier={})),function(t){t.Json="json",t.Borsh="borsh"}(e.AbiSerializationType||(e.AbiSerializationType={}))})(lib$4);var errors={};Object.defineProperty(errors,"__esModule",{value:!0});errors.ConflictingOptions=errors.ArgumentSchemaError=errors.UnknownArgumentError=errors.UnsupportedSerializationError=void 0;class UnsupportedSerializationError extends Error{constructor(t,r){super(`Contract method '${t}' is using an unsupported serialization type ${r}`)}}errors.UnsupportedSerializationError=UnsupportedSerializationError;class UnknownArgumentError extends Error{constructor(t,r){super(`Unrecognized argument '${t}', expected '${JSON.stringify(r)}'`)}}errors.UnknownArgumentError=UnknownArgumentError;class ArgumentSchemaError extends Error{constructor(t,r){super(`Argument '${t}' does not conform to the specified ABI schema: '${JSON.stringify(r)}'`)}}errors.ArgumentSchemaError=ArgumentSchemaError;class ConflictingOptions extends Error{constructor(){super("Conflicting contract method options have been passed. You can either specify ABI or a list of view/call methods.")}}errors.ConflictingOptions=ConflictingOptions;var __awaiter$3=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(contract$1,"__esModule",{value:!0});contract$1.Contract=void 0;const utils_1=lib$9,types_1=lib$b,ajv_1=__importDefault$2(ajvExports),ajv_formats_1=__importDefault$2(distExports),bn_js_1$2=__importDefault$2(bnExports),depd_1=__importDefault$2(browser$2),near_abi_1=lib$4,errors_1=errors;function nameFunction(e,t){return{[e](...r){return t(...r)}}[e]}function validateArguments(e,t,r,n){var a;if(!isObject(e))return;if(t.params&&t.params.serialization_type!==near_abi_1.AbiSerializationType.Json)throw new errors_1.UnsupportedSerializationError(t.name,t.params.serialization_type);if(t.result&&t.result.serialization_type!==near_abi_1.AbiSerializationType.Json)throw new errors_1.UnsupportedSerializationError(t.name,t.result.serialization_type);const o=((a=t.params)===null||a===void 0?void 0:a.args)||[];for(const s of o){const u=e[s.name],_=s.type_schema;_.definitions=n.body.root_schema.definitions;const v=r.compile(_);if(!v(u))throw new errors_1.ArgumentSchemaError(s.name,v.errors)}for(const s of Object.keys(e))if(!o.find(_=>_.name===s))throw new errors_1.UnknownArgumentError(s,o.map(_=>_.name))}function createAjv(){const e=new ajv_1.default({strictSchema:!1,formats:{uint32:!0,uint64:!0}});return(0,ajv_formats_1.default)(e),e}const isUint8Array=e=>e&&e.byteLength!==void 0&&e.byteLength===e.length,isObject=e=>Object.prototype.toString.call(e)==="[object Object]";class Contract{constructor(t,r,n){this.account=t,this.contractId=r;const{viewMethods:a=[],changeMethods:o=[],abi:s}=n;let u=a.map(g=>({name:g,abi:null})),_=o.map(g=>({name:g,abi:null}));if(s){if(u.length>0||_.length>0)throw new errors_1.ConflictingOptions;u=s.body.functions.filter(g=>g.kind===near_abi_1.AbiFunctionKind.View).map(g=>({name:g.name,abi:g})),_=s.body.functions.filter(g=>g.kind===near_abi_1.AbiFunctionKind.Call).map(g=>({name:g.name,abi:g}))}const v=createAjv();u.forEach(({name:g,abi:S})=>{Object.defineProperty(this,g,{writable:!1,enumerable:!0,value:nameFunction(g,(U={},k={},...B)=>__awaiter$3(this,void 0,void 0,function*(){if(B.length||!(isObject(U)||isUint8Array(U))||!isObject(k))throw new types_1.PositionalArgsError;return S&&validateArguments(U,S,v,s),this.account.viewFunction(Object.assign({contractId:this.contractId,methodName:g,args:U},k))}))})}),_.forEach(({name:g,abi:S})=>{Object.defineProperty(this,g,{writable:!1,enumerable:!0,value:nameFunction(g,(...U)=>__awaiter$3(this,void 0,void 0,function*(){if(U.length&&(U.length>3||!(isObject(U[0])||isUint8Array(U[0]))))throw new types_1.PositionalArgsError;return(U.length>1||!(U[0]&&U[0].args))&&((0,depd_1.default)("contract.methodName(args, gas, amount)")("use `contract.methodName({ args, gas?, amount?, callbackUrl?, meta? })` instead"),U[0]={args:U[0],gas:U[1],amount:U[2]}),S&&validateArguments(U[0].args,S,v,s),this._changeMethod(Object.assign({methodName:g},U[0]))}))})})}_changeMethod({args:t,methodName:r,gas:n,amount:a,meta:o,callbackUrl:s}){return __awaiter$3(this,void 0,void 0,function*(){validateBNLike({gas:n,amount:a});const u=yield this.account.functionCall({contractId:this.contractId,methodName:r,args:t,gas:n,attachedDeposit:a,walletMeta:o,walletCallbackUrl:s});return(0,utils_1.getTransactionLastResult)(u)})}}contract$1.Contract=Contract;function validateBNLike(e){const t="number, decimal string or BN";for(const r of Object.keys(e)){const n=e[r];if(n&&!bn_js_1$2.default.isBN(n)&&isNaN(n))throw new types_1.ArgumentTypeError(r,t,n)}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=e.UnsupportedSerializationError=e.UnknownArgumentError=e.ConflictingOptions=e.ArgumentSchemaError=e.Contract=e.MULTISIG_CONFIRM_METHODS=e.MULTISIG_CHANGE_METHODS=e.MULTISIG_DEPOSIT=e.MULTISIG_GAS=e.MULTISIG_ALLOWANCE=e.MULTISIG_STORAGE_KEY=e.Connection=e.AccountMultisig=e.UrlAccountCreator=e.LocalAccountCreator=e.AccountCreator=e.Account2FA=e.Account=void 0;var t=account$1;Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return t.Account}});var r=account_2fa;Object.defineProperty(e,"Account2FA",{enumerable:!0,get:function(){return r.Account2FA}});var n=account_creator$1;Object.defineProperty(e,"AccountCreator",{enumerable:!0,get:function(){return n.AccountCreator}}),Object.defineProperty(e,"LocalAccountCreator",{enumerable:!0,get:function(){return n.LocalAccountCreator}}),Object.defineProperty(e,"UrlAccountCreator",{enumerable:!0,get:function(){return n.UrlAccountCreator}});var a=account_multisig$1;Object.defineProperty(e,"AccountMultisig",{enumerable:!0,get:function(){return a.AccountMultisig}});var o=connection$1;Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return o.Connection}});var s=constants;Object.defineProperty(e,"MULTISIG_STORAGE_KEY",{enumerable:!0,get:function(){return s.MULTISIG_STORAGE_KEY}}),Object.defineProperty(e,"MULTISIG_ALLOWANCE",{enumerable:!0,get:function(){return s.MULTISIG_ALLOWANCE}}),Object.defineProperty(e,"MULTISIG_GAS",{enumerable:!0,get:function(){return s.MULTISIG_GAS}}),Object.defineProperty(e,"MULTISIG_DEPOSIT",{enumerable:!0,get:function(){return s.MULTISIG_DEPOSIT}}),Object.defineProperty(e,"MULTISIG_CHANGE_METHODS",{enumerable:!0,get:function(){return s.MULTISIG_CHANGE_METHODS}}),Object.defineProperty(e,"MULTISIG_CONFIRM_METHODS",{enumerable:!0,get:function(){return s.MULTISIG_CONFIRM_METHODS}});var u=contract$1;Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return u.Contract}});var _=errors;Object.defineProperty(e,"ArgumentSchemaError",{enumerable:!0,get:function(){return _.ArgumentSchemaError}}),Object.defineProperty(e,"ConflictingOptions",{enumerable:!0,get:function(){return _.ConflictingOptions}}),Object.defineProperty(e,"UnknownArgumentError",{enumerable:!0,get:function(){return _.UnknownArgumentError}}),Object.defineProperty(e,"UnsupportedSerializationError",{enumerable:!0,get:function(){return _.UnsupportedSerializationError}});var v=types$1;Object.defineProperty(e,"MultisigDeleteRequestRejectionError",{enumerable:!0,get:function(){return v.MultisigDeleteRequestRejectionError}}),Object.defineProperty(e,"MultisigStateStatus",{enumerable:!0,get:function(){return v.MultisigStateStatus}})})(lib$6);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.TypedError=e.PositionalArgsError=e.ErrorContext=e.ArgumentTypeError=e.UnsupportedSerializationError=e.UnknownArgumentError=e.ConflictingOptions=e.ArgumentSchemaError=void 0;var t=lib$6;Object.defineProperty(e,"ArgumentSchemaError",{enumerable:!0,get:function(){return t.ArgumentSchemaError}}),Object.defineProperty(e,"ConflictingOptions",{enumerable:!0,get:function(){return t.ConflictingOptions}}),Object.defineProperty(e,"UnknownArgumentError",{enumerable:!0,get:function(){return t.UnknownArgumentError}}),Object.defineProperty(e,"UnsupportedSerializationError",{enumerable:!0,get:function(){return t.UnsupportedSerializationError}});var r=lib$b;Object.defineProperty(e,"ArgumentTypeError",{enumerable:!0,get:function(){return r.ArgumentTypeError}}),Object.defineProperty(e,"ErrorContext",{enumerable:!0,get:function(){return r.ErrorContext}}),Object.defineProperty(e,"PositionalArgsError",{enumerable:!0,get:function(){return r.PositionalArgsError}}),Object.defineProperty(e,"TypedError",{enumerable:!0,get:function(){return r.TypedError}});var n=lib$9;Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return n.logWarning}})})(errors$2);(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(U,k,B,D){D===void 0&&(D=B);var L=Object.getOwnPropertyDescriptor(k,B);(!L||("get"in L?!k.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return k[B]}}),Object.defineProperty(U,D,L)}:function(U,k,B,D){D===void 0&&(D=B),U[D]=k[B]}),r=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(U,k){Object.defineProperty(U,"default",{enumerable:!0,value:k})}:function(U,k){U.default=k}),n=commonjsGlobal&&commonjsGlobal.__importStar||function(U){if(U&&U.__esModule)return U;var k={};if(U!=null)for(var B in U)B!=="default"&&Object.prototype.hasOwnProperty.call(U,B)&&t(k,U,B);return r(k,U),k};Object.defineProperty(e,"__esModule",{value:!0}),e.logWarning=e.rpc_errors=e.KeyPairEd25519=e.KeyPair=e.PublicKey=e.format=e.enums=e.web=e.serialize=e.key_pair=void 0;const a=n(key_pair);e.key_pair=a;const o=n(serialize$1);e.serialize=o;const s=n(web);e.web=s;const u=n(enums);e.enums=u;const _=n(format$3);e.format=_;const v=n(rpc_errors);e.rpc_errors=v;const g=key_pair;Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return g.PublicKey}}),Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return g.KeyPair}}),Object.defineProperty(e,"KeyPairEd25519",{enumerable:!0,get:function(){return g.KeyPairEd25519}});const S=errors$2;Object.defineProperty(e,"logWarning",{enumerable:!0,get:function(){return S.logWarning}})})(utils$1);var transaction={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.transfer=e.stake=e.functionCallAccessKey=e.functionCall=e.fullAccessKey=e.deployContract=e.deleteKey=e.deleteAccount=e.createAccount=e.addKey=e.encodeDelegateAction=e.encodeSignedDelegate=e.Transaction=e.SignedTransaction=e.Signature=e.signTransaction=e.createTransaction=e.SCHEMA=e.Transfer=e.Stake=e.FunctionCallPermission=e.FunctionCall=e.FullAccessPermission=e.DeployContract=e.DeleteKey=e.DeleteAccount=e.CreateAccount=e.AddKey=e.AccessKeyPermission=e.AccessKey=e.Action=e.stringifyJsonOrBytes=void 0;var t=lib$7;Object.defineProperty(e,"stringifyJsonOrBytes",{enumerable:!0,get:function(){return t.stringifyJsonOrBytes}}),Object.defineProperty(e,"Action",{enumerable:!0,get:function(){return t.Action}}),Object.defineProperty(e,"AccessKey",{enumerable:!0,get:function(){return t.AccessKey}}),Object.defineProperty(e,"AccessKeyPermission",{enumerable:!0,get:function(){return t.AccessKeyPermission}}),Object.defineProperty(e,"AddKey",{enumerable:!0,get:function(){return t.AddKey}}),Object.defineProperty(e,"CreateAccount",{enumerable:!0,get:function(){return t.CreateAccount}}),Object.defineProperty(e,"DeleteAccount",{enumerable:!0,get:function(){return t.DeleteAccount}}),Object.defineProperty(e,"DeleteKey",{enumerable:!0,get:function(){return t.DeleteKey}}),Object.defineProperty(e,"DeployContract",{enumerable:!0,get:function(){return t.DeployContract}}),Object.defineProperty(e,"FullAccessPermission",{enumerable:!0,get:function(){return t.FullAccessPermission}}),Object.defineProperty(e,"FunctionCall",{enumerable:!0,get:function(){return t.FunctionCall}}),Object.defineProperty(e,"FunctionCallPermission",{enumerable:!0,get:function(){return t.FunctionCallPermission}}),Object.defineProperty(e,"Stake",{enumerable:!0,get:function(){return t.Stake}}),Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return t.Transfer}}),Object.defineProperty(e,"SCHEMA",{enumerable:!0,get:function(){return t.SCHEMA}}),Object.defineProperty(e,"createTransaction",{enumerable:!0,get:function(){return t.createTransaction}}),Object.defineProperty(e,"signTransaction",{enumerable:!0,get:function(){return t.signTransaction}}),Object.defineProperty(e,"Signature",{enumerable:!0,get:function(){return t.Signature}}),Object.defineProperty(e,"SignedTransaction",{enumerable:!0,get:function(){return t.SignedTransaction}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return t.Transaction}}),Object.defineProperty(e,"encodeSignedDelegate",{enumerable:!0,get:function(){return t.encodeSignedDelegate}}),Object.defineProperty(e,"encodeDelegateAction",{enumerable:!0,get:function(){return t.encodeDelegateAction}});const r=lib$7,n=(k,B)=>r.actionCreators.addKey(k,B);e.addKey=n;const a=()=>r.actionCreators.createAccount();e.createAccount=a;const o=k=>r.actionCreators.deleteAccount(k);e.deleteAccount=o;const s=k=>r.actionCreators.deleteKey(k);e.deleteKey=s;const u=k=>r.actionCreators.deployContract(k);e.deployContract=u;const _=()=>r.actionCreators.fullAccessKey();e.fullAccessKey=_;const v=(k,B,D,L,R,G)=>r.actionCreators.functionCall(k,B,D,L,R,G);e.functionCall=v;const g=(k,B,D)=>r.actionCreators.functionCallAccessKey(k,B,D);e.functionCallAccessKey=g;const S=(k,B)=>r.actionCreators.stake(k,B);e.stake=S;const U=k=>r.actionCreators.transfer(k);e.transfer=U})(transaction);var validators={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findSeatPrice=e.diffEpochValidators=void 0;var t=lib$9;Object.defineProperty(e,"diffEpochValidators",{enumerable:!0,get:function(){return t.diffEpochValidators}}),Object.defineProperty(e,"findSeatPrice",{enumerable:!0,get:function(){return t.findSeatPrice}})})(validators);var account={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Account=void 0;var t=lib$6;Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return t.Account}})})(account);var account_multisig={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MultisigStateStatus=e.MultisigDeleteRequestRejectionError=e.MULTISIG_CONFIRM_METHODS=e.MULTISIG_CHANGE_METHODS=e.MULTISIG_DEPOSIT=e.MULTISIG_GAS=e.MULTISIG_ALLOWANCE=e.MULTISIG_STORAGE_KEY=e.AccountMultisig=e.Account2FA=void 0;var t=lib$6;Object.defineProperty(e,"Account2FA",{enumerable:!0,get:function(){return t.Account2FA}}),Object.defineProperty(e,"AccountMultisig",{enumerable:!0,get:function(){return t.AccountMultisig}}),Object.defineProperty(e,"MULTISIG_STORAGE_KEY",{enumerable:!0,get:function(){return t.MULTISIG_STORAGE_KEY}}),Object.defineProperty(e,"MULTISIG_ALLOWANCE",{enumerable:!0,get:function(){return t.MULTISIG_ALLOWANCE}}),Object.defineProperty(e,"MULTISIG_GAS",{enumerable:!0,get:function(){return t.MULTISIG_GAS}}),Object.defineProperty(e,"MULTISIG_DEPOSIT",{enumerable:!0,get:function(){return t.MULTISIG_DEPOSIT}}),Object.defineProperty(e,"MULTISIG_CHANGE_METHODS",{enumerable:!0,get:function(){return t.MULTISIG_CHANGE_METHODS}}),Object.defineProperty(e,"MULTISIG_CONFIRM_METHODS",{enumerable:!0,get:function(){return t.MULTISIG_CONFIRM_METHODS}}),Object.defineProperty(e,"MultisigDeleteRequestRejectionError",{enumerable:!0,get:function(){return t.MultisigDeleteRequestRejectionError}}),Object.defineProperty(e,"MultisigStateStatus",{enumerable:!0,get:function(){return t.MultisigStateStatus}})})(account_multisig);var account_creator={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.UrlAccountCreator=e.LocalAccountCreator=e.AccountCreator=void 0;var t=lib$6;Object.defineProperty(e,"AccountCreator",{enumerable:!0,get:function(){return t.AccountCreator}}),Object.defineProperty(e,"LocalAccountCreator",{enumerable:!0,get:function(){return t.LocalAccountCreator}}),Object.defineProperty(e,"UrlAccountCreator",{enumerable:!0,get:function(){return t.UrlAccountCreator}})})(account_creator);var connection={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Connection=void 0;var t=lib$6;Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return t.Connection}})})(connection);var signer={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Signer=e.InMemorySigner=void 0;var t=lib$5;Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return t.InMemorySigner}}),Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return t.Signer}})})(signer);var contract={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Contract=void 0;var t=lib$6;Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return t.Contract}})})(contract);var near$1={},lib$3={},near={},__awaiter$2=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(near,"__esModule",{value:!0});near.Near=void 0;const accounts_1$1=lib$6,bn_js_1$1=__importDefault$1(bnExports);class Near{constructor(t){var r;if(this.config=t,this.connection=accounts_1$1.Connection.fromConfig({networkId:t.networkId,provider:{type:"JsonRpcProvider",args:{url:t.nodeUrl,headers:t.headers}},signer:t.signer||{type:"InMemorySigner",keyStore:t.keyStore||((r=t.deps)===null||r===void 0?void 0:r.keyStore)},jsvmAccountId:t.jsvmAccountId||`jsvm.${t.networkId}`}),t.masterAccount){const n=t.initialBalance?new bn_js_1$1.default(t.initialBalance):new bn_js_1$1.default("500000000000000000000000000");this.accountCreator=new accounts_1$1.LocalAccountCreator(new accounts_1$1.Account(this.connection,t.masterAccount),n)}else t.helperUrl?this.accountCreator=new accounts_1$1.UrlAccountCreator(this.connection,t.helperUrl):this.accountCreator=null}account(t){return __awaiter$2(this,void 0,void 0,function*(){return new accounts_1$1.Account(this.connection,t)})}createAccount(t,r){return __awaiter$2(this,void 0,void 0,function*(){if(!this.accountCreator)throw new Error("Must specify account creator, either via masterAccount or helperUrl configuration settings.");return yield this.accountCreator.createAccount(t,r),new accounts_1$1.Account(this.connection,t)})}}near.Near=Near;var wallet_account={},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wallet_account,"__esModule",{value:!0});wallet_account.ConnectedWalletAccount=wallet_account.WalletConnection=void 0;const accounts_1=lib$6,crypto_1=lib$d,transactions_1=lib$7,bn_js_1=__importDefault(bnExports),borsh_1=lib$c,LOGIN_WALLET_URL_SUFFIX="/login/",MULTISIG_HAS_METHOD="add_request_and_confirm",LOCAL_STORAGE_KEY_SUFFIX="_wallet_auth_key",PENDING_ACCESS_KEY_PREFIX="pending_key";class WalletConnection{constructor(t,r){if(typeof r!="string")throw new Error("Please define a clear appKeyPrefix for this WalletConnection instance as the second argument to the constructor");if(typeof window>"u")return new Proxy(this,{get(o,s){return s==="isSignedIn"?()=>!1:s==="getAccountId"?()=>"":o[s]&&typeof o[s]=="function"?()=>{throw new Error("No window found in context, please ensure you are using WalletConnection on the browser")}:o[s]}});this._near=t;const n=r+LOCAL_STORAGE_KEY_SUFFIX,a=JSON.parse(window.localStorage.getItem(n));this._networkId=t.config.networkId,this._walletBaseUrl=t.config.walletUrl,r=r||t.config.contractName||"default",this._keyStore=t.connection.signer.keyStore,this._authData=a||{allKeys:[]},this._authDataKey=n,this.isSignedIn()||(this._completeSignInPromise=this._completeSignInWithAccessKey())}isSignedIn(){return!!this._authData.accountId}isSignedInAsync(){return __awaiter$1(this,void 0,void 0,function*(){return this._completeSignInPromise?(yield this._completeSignInPromise,this.isSignedIn()):this.isSignedIn()})}getAccountId(){return this._authData.accountId||""}requestSignIn({contractId:t,methodNames:r,successUrl:n,failureUrl:a}){return __awaiter$1(this,void 0,void 0,function*(){const o=new URL(window.location.href),s=new URL(this._walletBaseUrl+LOGIN_WALLET_URL_SUFFIX);if(s.searchParams.set("success_url",n||o.href),s.searchParams.set("failure_url",a||o.href),t){yield(yield this._near.account(t)).state(),s.searchParams.set("contract_id",t);const _=crypto_1.KeyPair.fromRandom("ed25519");s.searchParams.set("public_key",_.getPublicKey().toString()),yield this._keyStore.setKey(this._networkId,PENDING_ACCESS_KEY_PREFIX+_.getPublicKey(),_)}r&&r.forEach(u=>{s.searchParams.append("methodNames",u)}),window.location.assign(s.toString())})}requestSignTransactions({transactions:t,meta:r,callbackUrl:n}){return __awaiter$1(this,void 0,void 0,function*(){const a=new URL(window.location.href),o=new URL("sign",this._walletBaseUrl);o.searchParams.set("transactions",t.map(s=>(0,borsh_1.serialize)(transactions_1.SCHEMA,s)).map(s=>Buffer.from(s).toString("base64")).join(",")),o.searchParams.set("callbackUrl",n||a.href),r&&o.searchParams.set("meta",r),window.location.assign(o.toString())})}_completeSignInWithAccessKey(){return __awaiter$1(this,void 0,void 0,function*(){const t=new URL(window.location.href),r=t.searchParams.get("public_key")||"",n=(t.searchParams.get("all_keys")||"").split(","),a=t.searchParams.get("account_id")||"";if(a){const o={accountId:a,allKeys:n};window.localStorage.setItem(this._authDataKey,JSON.stringify(o)),r&&(yield this._moveKeyFromTempToPermanent(a,r)),this._authData=o}t.searchParams.delete("public_key"),t.searchParams.delete("all_keys"),t.searchParams.delete("account_id"),t.searchParams.delete("meta"),t.searchParams.delete("transactionHashes"),window.history.replaceState({},document.title,t.toString())})}_moveKeyFromTempToPermanent(t,r){return __awaiter$1(this,void 0,void 0,function*(){const n=yield this._keyStore.getKey(this._networkId,PENDING_ACCESS_KEY_PREFIX+r);yield this._keyStore.setKey(this._networkId,t,n),yield this._keyStore.removeKey(this._networkId,PENDING_ACCESS_KEY_PREFIX+r)})}signOut(){this._authData={},window.localStorage.removeItem(this._authDataKey)}account(){return this._connectedAccount||(this._connectedAccount=new ConnectedWalletAccount(this,this._near.connection,this._authData.accountId)),this._connectedAccount}}wallet_account.WalletConnection=WalletConnection;class ConnectedWalletAccount extends accounts_1.Account{constructor(t,r,n){super(r,n),this.walletConnection=t}signAndSendTransaction({receiverId:t,actions:r,walletMeta:n,walletCallbackUrl:a=window.location.href}){const o=Object.create(null,{signAndSendTransaction:{get:()=>super.signAndSendTransaction}});return __awaiter$1(this,void 0,void 0,function*(){const s=yield this.connection.signer.getPublicKey(this.accountId,this.connection.networkId);let u=yield this.accessKeyForTransaction(t,r,s);if(!u)throw new Error(`Cannot find matching key for transaction sent to ${t}`);if(s&&s.toString()===u.public_key)try{return yield o.signAndSendTransaction.call(this,{receiverId:t,actions:r})}catch(k){if(k.type==="NotEnoughAllowance")u=yield this.accessKeyForTransaction(t,r);else throw k}const _=yield this.connection.provider.block({finality:"final"}),v=(0,borsh_1.baseDecode)(_.header.hash),g=crypto_1.PublicKey.from(u.public_key),S=u.access_key.nonce.add(new bn_js_1.default(1)),U=(0,transactions_1.createTransaction)(this.accountId,g,t,S,r,v);return yield this.walletConnection.requestSignTransactions({transactions:[U],meta:n,callbackUrl:a}),new Promise((k,B)=>{setTimeout(()=>{B(new Error("Failed to redirect to sign transaction"))},1e3)})})}accessKeyMatchesTransaction(t,r,n){return __awaiter$1(this,void 0,void 0,function*(){const{access_key:{permission:a}}=t;if(a==="FullAccess")return!0;if(a.FunctionCall){const{receiver_id:o,method_names:s}=a.FunctionCall;if(o===this.accountId&&s.includes(MULTISIG_HAS_METHOD))return!0;if(o===r){if(n.length!==1)return!1;const[{functionCall:u}]=n;return u&&(!u.deposit||u.deposit.toString()==="0")&&(s.length===0||s.includes(u.methodName))}}return!1})}accessKeyForTransaction(t,r,n){return __awaiter$1(this,void 0,void 0,function*(){const a=yield this.getAccessKeys();if(n){const s=a.find(u=>u.public_key.toString()===n.toString());if(s&&(yield this.accessKeyMatchesTransaction(s,t,r)))return s}const o=this.walletConnection._authData.allKeys;for(const s of a)if(o.indexOf(s.public_key)!==-1&&(yield this.accessKeyMatchesTransaction(s,t,r)))return s;return null})}}wallet_account.ConnectedWalletAccount=ConnectedWalletAccount;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.ConnectedWalletAccount=e.Near=void 0;var t=near;Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return t.Near}});var r=wallet_account;Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return r.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return r.WalletConnection}})})(lib$3);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Near=void 0;var t=lib$3;Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return t.Near}})})(near$1);var walletAccount={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.ConnectedWalletAccount=void 0;var t=lib$3;Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return t.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return t.WalletConnection}})})(walletAccount);(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(R,G,J,ee){ee===void 0&&(ee=J);var re=Object.getOwnPropertyDescriptor(G,J);(!re||("get"in re?!G.__esModule:re.writable||re.configurable))&&(re={enumerable:!0,get:function(){return G[J]}}),Object.defineProperty(R,ee,re)}:function(R,G,J,ee){ee===void 0&&(ee=J),R[ee]=G[J]}),r=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(R,G){Object.defineProperty(R,"default",{enumerable:!0,value:G})}:function(R,G){R.default=G}),n=commonjsGlobal&&commonjsGlobal.__importStar||function(R){if(R&&R.__esModule)return R;var G={};if(R!=null)for(var J in R)J!=="default"&&Object.prototype.hasOwnProperty.call(R,J)&&t(G,R,J);return r(G,R),G};Object.defineProperty(e,"__esModule",{value:!0}),e.WalletConnection=e.ConnectedWalletAccount=e.Near=e.KeyPair=e.Signer=e.InMemorySigner=e.Contract=e.Connection=e.Account=e.multisig=e.validators=e.transactions=e.utils=e.providers=e.accountCreator=void 0;const a=n(providers);e.providers=a;const o=n(utils$1);e.utils=o;const s=n(transaction);e.transactions=s;const u=n(validators);e.validators=u;const _=account;Object.defineProperty(e,"Account",{enumerable:!0,get:function(){return _.Account}});const v=n(account_multisig);e.multisig=v;const g=n(account_creator);e.accountCreator=g;const S=connection;Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return S.Connection}});const U=signer;Object.defineProperty(e,"Signer",{enumerable:!0,get:function(){return U.Signer}}),Object.defineProperty(e,"InMemorySigner",{enumerable:!0,get:function(){return U.InMemorySigner}});const k=contract;Object.defineProperty(e,"Contract",{enumerable:!0,get:function(){return k.Contract}});const B=key_pair;Object.defineProperty(e,"KeyPair",{enumerable:!0,get:function(){return B.KeyPair}});const D=near$1;Object.defineProperty(e,"Near",{enumerable:!0,get:function(){return D.Near}});const L=walletAccount;Object.defineProperty(e,"ConnectedWalletAccount",{enumerable:!0,get:function(){return L.ConnectedWalletAccount}}),Object.defineProperty(e,"WalletConnection",{enumerable:!0,get:function(){return L.WalletConnection}})})(commonIndex);var browserConnect={},__awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,r,n){function a(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function u(g){try{v(n.next(g))}catch(S){s(S)}}function _(g){try{v(n.throw(g))}catch(S){s(S)}}function v(g){g.done?o(g.value):a(g.value).then(u,_)}v((n=n.apply(e,t||[])).next())})};Object.defineProperty(browserConnect,"__esModule",{value:!0});browserConnect.connect=void 0;const near_1=near$1;function connect(e){return __awaiter(this,void 0,void 0,function*(){return new near_1.Near(e)})}browserConnect.connect=connect;var CapabilityDetector$1=function(){this.tests={},this.cache={}};CapabilityDetector$1.prototype={constructor:CapabilityDetector$1,define:function(e,t){if(typeof e!="string"||!(t instanceof Function))throw new Error("Invalid capability definition.");if(this.tests[e])throw new Error('Duplicated capability definition by "'+e+'".');this.tests[e]=t},check:function(e){if(!this.test(e))throw new Error('The current environment does not support "'+e+'", therefore we cannot continue.')},test:function(e){if(this.cache[e]!==void 0)return this.cache[e];if(!this.tests[e])throw new Error('Unknown capability with name "'+e+'".');var t=this.tests[e];return this.cache[e]=!!t(),this.cache[e]}};var CapabilityDetector_1=CapabilityDetector$1,CapabilityDetector=CapabilityDetector_1,detector=new CapabilityDetector,capability$3=function(e){return detector.test(e)};capability$3.define=function(e,t){detector.define(e,t)};capability$3.check=function(e){detector.check(e)};capability$3.test=capability$3;var lib$2=capability$3,capability$2=lib$2,define=capability$2.define,test=capability$2.test;define("strict mode",function(){return this===void 0});define("arguments.callee.caller",function(){try{return function(){return arguments.callee.caller}()===arguments.callee}catch{return!1}});define("es5",function(){return test("Array.prototype.forEach")&&test("Array.prototype.map")&&test("Function.prototype.bind")&&test("Object.create")&&test("Object.defineProperties")&&test("Object.defineProperty")&&test("Object.prototype.hasOwnProperty")});define("Array.prototype.forEach",function(){return Array.prototype.forEach});define("Array.prototype.map",function(){return Array.prototype.map});define("Function.prototype.bind",function(){return Function.prototype.bind});define("Object.create",function(){return Object.create});define("Object.defineProperties",function(){return Object.defineProperties});define("Object.defineProperty",function(){return Object.defineProperty});define("Object.prototype.hasOwnProperty",function(){return Object.prototype.hasOwnProperty});define("Error.captureStackTrace",function(){return Error.captureStackTrace});define("Error.prototype.stack",function(){try{throw new Error}catch(e){return e.stack||e.stacktrace}});var capability$1=lib$2;capability$1.check("es5");var prepareStackTrace_1,hasRequiredPrepareStackTrace;function requirePrepareStackTrace(){if(hasRequiredPrepareStackTrace)return prepareStackTrace_1;hasRequiredPrepareStackTrace=1;var e=function(t,r,n){var a="";if(a+=t.name||"Error",a+=": "+(t.message||""),n instanceof Array)for(var o in n){var s=n[o];a+=`
   # `+s}for(var u in r){var _=r[u];a+=`
   at `+_.toString()}return a};return prepareStackTrace_1=e,prepareStackTrace_1}var v8,hasRequiredV8;function requireV8(){if(hasRequiredV8)return v8;hasRequiredV8=1;var e=requirePrepareStackTrace();return v8=function(){return Error.getStackTrace=function(t){return t.stack},{prepareStackTrace:e}},v8}var Class_1,hasRequiredClass;function requireClass(){if(hasRequiredClass)return Class_1;hasRequiredClass=1;var e=function(){var t=Object.create({Source:Object,config:{},buildArgs:[]});function r(_){var v="config";if(_ instanceof Function)v="Source";else if(_ instanceof Array)v="buildArgs";else if(_ instanceof Object)v="config";else throw new Error("Invalid configuration option.");if(t.hasOwnProperty(v))throw new Error("Duplicated configuration option: "+v+".");t[v]=_}for(var n=0,a=arguments.length;n<a;++n)r(arguments[n]);var o=t.Source,s=t.config,u=t.buildArgs;return(o.extend||e.extend).call(o,s,u)};return e.factory=function(){return function(){var t=this;t.build instanceof Function&&t.build.apply(t,arguments),t.init instanceof Function&&t.init.apply(t,arguments)}},e.extend=function(t,r){var n=this;t||(t={});var a;return t.prototype instanceof Object&&t.prototype.constructor!==Object?a=t.prototype.constructor:t.factory instanceof Function&&(a=t.factory.call(n)),a=(n.clone||e.clone).call(n,a,r),(a.merge||e.merge).call(a,t),a},e.prototype.extend=function(t,r){var n=this,a=(n.clone||e.prototype.clone).apply(n,r);return(a.merge||e.prototype.merge).call(a,t),a},e.clone=function(t,r){var n=this;t instanceof Function||(t=(n.factory||e.factory).call(n)),t.prototype=(n.prototype.clone||e.prototype.clone).apply(n.prototype,r||[]),t.prototype.constructor=t;for(var a in n)a!=="prototype"&&(t[a]=n[a]);return t},e.prototype.clone=function(){var t=this,r=Object.create(t);return r.build instanceof Function&&r.build.apply(r,arguments),r},e.merge=function(t){var r=this;for(var n in t)n!=="prototype"&&(r[n]=t[n]);return t.prototype instanceof Object&&(r.prototype.merge||e.prototype.merge).call(r.prototype,t.prototype),r},e.prototype.merge=function(t){var r=this;for(var n in t)n!=="constructor"&&(r[n]=t[n]);return r},e.absorb=function(t){var r=this;for(var n in t)n!=="prototype"&&(r[n]===void 0||r[n]===Function.prototype[n])&&(r[n]=t[n]);return t.prototype instanceof Object&&(r.prototype.absorb||e.prototype.absorb).call(r.prototype,t.prototype),r},e.prototype.absorb=function(t){var r=this;for(var n in t)n!=="constructor"&&(r[n]===void 0||r[n]===Object.prototype[n])&&(r[n]=t[n]);return r},e.getAncestor=function(){var t=this;if(t!==t.prototype.constructor)return t.prototype.constructor},e.newInstance=function(){var t=this,r=Object.create(this.prototype);return t.apply(r,arguments),r},Class_1=e,Class_1}var abstractMethod,hasRequiredAbstractMethod;function requireAbstractMethod(){return hasRequiredAbstractMethod||(hasRequiredAbstractMethod=1,abstractMethod=function(){throw new Error("Not implemented.")}),abstractMethod}var lib$1,hasRequiredLib$1;function requireLib$1(){return hasRequiredLib$1||(hasRequiredLib$1=1,lib$1={Class:requireClass(),abstractMethod:requireAbstractMethod()}),lib$1}var o3,hasRequiredO3;function requireO3(){return hasRequiredO3||(hasRequiredO3=1,o3=requireLib$1()),o3}var cache_1,hasRequiredCache;function requireCache(){if(hasRequiredCache)return cache_1;hasRequiredCache=1;var e=function(t){var r=!1,n;return t instanceof Function||(r=!0,n=t,t=null),function(){return r||(r=!0,n=t.apply(this,arguments),t=null),n}};return cache_1=e,cache_1}var eachCombination,hasRequiredEachCombination;function requireEachCombination(){return hasRequiredEachCombination||(hasRequiredEachCombination=1,eachCombination=function e(t,r,n){if(n||(n=[]),n.length<t.length){var a=t[n.length];for(var o in a)n[n.length]=a[o],e(t,r,n),--n.length}else r.apply(null,n)}),eachCombination}var lib,hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,lib={cache:requireCache(),eachCombination:requireEachCombination()}),lib}var u3,hasRequiredU3;function requireU3(){return hasRequiredU3||(hasRequiredU3=1,u3=requireLib()),u3}var FrameStringSource,hasRequiredFrameStringSource;function requireFrameStringSource(){if(hasRequiredFrameStringSource)return FrameStringSource;hasRequiredFrameStringSource=1;var e=requireO3().Class,t=requireO3().abstractMethod,r=requireU3().eachCombination,n=requireU3().cache,a=capability$1,o=e(Object,{prototype:{captureFrameStrings:function(u){var _=this.createError();u.unshift(this.captureFrameStrings),u.unshift(this.createError);var v=this.getFrameStrings(_),g=v.slice(u.length),S=[];if(a("arguments.callee.caller")){var U=[this.createError,this.captureFrameStrings];try{for(var k=arguments.callee;k=k.caller;)U.push(k)}catch{}S=U.slice(u.length)}return{frameStrings:g,functionValues:S}},getFrameStrings:function(u){var _=u.message||"",v=u.name||"",g=this.getStackString(u);if(g!==void 0){var S=g.split(`
`),U=0,k=S.length;return this.hasHeader&&(U+=v.split(`
`).length+_.split(`
`).length-1),this.hasFooter&&(k-=1),S.slice(U,k)}},createError:t,getStackString:t,hasHeader:void 0,hasFooter:void 0}}),s=e(Object,{prototype:{calibrateClass:function(u){return this.calibrateMethods(u)&&this.calibrateEnvelope(u)},calibrateMethods:function(u){try{r([[function(_){return new Error(_)},function(_){try{throw new Error(_)}catch(v){return v}}],[function(_){return _.stack},function(_){return _.stacktrace}]],function(_,v){if(v(_()))throw{getStackString:v,createError:_}})}catch(_){return e.merge.call(u,{prototype:_}),!0}return!1},calibrateEnvelope:function(u){var _=u.prototype.getStackString,v=u.prototype.createError,g=_(v("marker")),S=g.split(`
`);return e.merge.call(u,{prototype:{hasHeader:/marker/.test(S[0]),hasFooter:S[S.length-1]===""}}),!0}}});return FrameStringSource={getClass:n(function(){var u;if(u)return u;u=e(o,{});var _=new s;if(!_.calibrateClass(u))throw new Error("Cannot read Error.prototype.stack in this environment.");return u}),getInstance:n(function(){var u=this.getClass(),_=new u;return _})},FrameStringSource}var Frame_1,hasRequiredFrame;function requireFrame(){if(hasRequiredFrame)return Frame_1;hasRequiredFrame=1;var e=requireO3().Class,t=requireO3().abstractMethod,r=e(Object,{prototype:{init:e.prototype.merge,frameString:void 0,toString:function(){return this.frameString},functionValue:void 0,getThis:t,getTypeName:t,getFunction:function(){return this.functionValue},getFunctionName:t,getMethodName:t,getFileName:t,getLineNumber:t,getColumnNumber:t,getEvalOrigin:t,isTopLevel:t,isEval:t,isNative:t,isConstructor:t}});return Frame_1=r,Frame_1}var FrameStringParser_1,hasRequiredFrameStringParser;function requireFrameStringParser(){if(hasRequiredFrameStringParser)return FrameStringParser_1;hasRequiredFrameStringParser=1;var e=requireO3().Class,t=requireFrame(),r=requireU3().cache,n=e(Object,{prototype:{stackParser:null,frameParser:null,locationParsers:null,constructor:function(a){e.prototype.merge.call(this,a)},getFrames:function(a,o){for(var s=[],u=0,_=a.length;u<_;++u)s[u]=this.getFrame(a[u],o[u]);return s},getFrame:function(a,o){var s={frameString:a,functionValue:o};return new t(s)}}});return FrameStringParser_1={getClass:r(function(){return n}),getInstance:r(function(){var a=this.getClass(),o=new a;return o})},FrameStringParser_1}var nonV8,hasRequiredNonV8;function requireNonV8(){if(hasRequiredNonV8)return nonV8;hasRequiredNonV8=1;var e=requireFrameStringSource(),t=requireFrameStringParser(),r=requireU3().cache,n=requirePrepareStackTrace();return nonV8=function(){return Error.captureStackTrace=function a(o,s){var u,_=[a];s&&_.push(s);var v=e.getInstance().captureFrameStrings(_);Object.defineProperties(o,{stack:{configurable:!0,get:r(function(){var g=t.getInstance().getFrames(v.frameStrings,v.functionValues);return(Error.prepareStackTrace||n)(o,g,u)})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(a){if(a.cachedStack)return a.stack;var o=e.getInstance().getFrameStrings(a),s=[],u;o?s=t.getInstance().getFrames(o,[]):u=["The stack is not readable by unthrown errors in this environment."];var _=(Error.prepareStackTrace||n)(a,s,u);if(o)try{Object.defineProperties(a,{stack:{configurable:!0,writable:!0,enumerable:!1,value:_},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return _},{prepareStackTrace:n}},nonV8}var unsupported,hasRequiredUnsupported;function requireUnsupported(){if(hasRequiredUnsupported)return unsupported;hasRequiredUnsupported=1;var e=requireU3().cache,t=requirePrepareStackTrace();return unsupported=function(){return Error.captureStackTrace=function(r,n){Object.defineProperties(r,{stack:{configurable:!0,get:e(function(){return(Error.prepareStackTrace||t)(r,[])})},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})},Error.getStackTrace=function(r){if(r.cachedStack)return r.stack;var n=(Error.prepareStackTrace||t)(r,[]);try{Object.defineProperties(r,{stack:{configurable:!0,writable:!0,enumerable:!1,value:n},cachedStack:{configurable:!0,writable:!0,enumerable:!1,value:!0}})}catch{}return n},{prepareStackTrace:t}},unsupported}var capability=capability$1,polyfill;capability("Error.captureStackTrace")?polyfill=requireV8():capability("Error.prototype.stack")?polyfill=requireNonV8():polyfill=requireUnsupported();polyfill();(function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,s,u,_){_===void 0&&(_=u);var v=Object.getOwnPropertyDescriptor(s,u);(!v||("get"in v?!s.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(o,_,v)}:function(o,s,u,_){_===void 0&&(_=u),o[_]=s[u]}),r=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(o,s){Object.defineProperty(o,"default",{enumerable:!0,value:s})}:function(o,s){o.default=s}),n=commonjsGlobal&&commonjsGlobal.__importStar||function(o){if(o&&o.__esModule)return o;var s={};if(o!=null)for(var u in o)u!=="default"&&Object.prototype.hasOwnProperty.call(o,u)&&t(s,o,u);return r(s,o),s},a=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,s){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(s,u)&&t(s,o,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.keyStores=void 0,e.keyStores=n(browserIndex),a(commonIndex,e),a(browserConnect,e)})(browserIndex$1);const network={networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://testnet.nearblocks.io",indexerUrl:"https://testnet-api.kitwallet.app"};let _walletState;const jsonRpcProvider=new browserIndex$1.providers.JsonRpcProvider({url:network.nodeUrl}),setupWalletState=async()=>{const e=new browserIndex$1.keyStores.BrowserLocalStorageKeyStore,t=await browserIndex$1.connect({keyStore:e,walletUrl:"https://testnet.mynearwallet.com",...network,headers:{}});return{wallet:new browserIndex$1.WalletConnection(t,"near_app"),keyStore:e}};(async()=>_walletState=await setupWalletState())();const signInButton=document.getElementById("sign-in"),signTransactionButton=document.getElementById("sign-transaction");signInButton.addEventListener("click",()=>{_walletState.wallet.requestSignIn({contractId:"guest-book.testnet",methodNames:["getMessages","addMessage"]})});signTransactionButton.addEventListener("click",async()=>{const e="guest-book.testnet",t={text:"test"},r=[browserIndex$1.transactions.functionCall("addMessage",buffer.Buffer.from(JSON.stringify(t)),BigInt(1e13),BigInt(0))],n=await _walletState.wallet.account(),{networkId:a,signer:o}=n.connection,s=await o.getPublicKey(n.accountId,a),u=await n.accessKeyForTransaction(e,r,s);if(!u)throw new Error(`Failed to find matching key for transaction sent to ${e}`);const _=await jsonRpcProvider.block({finality:"final"}),v=u.access_key.nonce+BigInt(1),g=browserIndex$1.transactions.createTransaction(n.accountId,browserIndex$1.utils.PublicKey.from(u.public_key),e,v,r,browserIndex$1.utils.serialize.base_decode(_.header.hash)),S=g.encode(),U=browserIndex$1.transactions.Transaction.decode(S);console.log({originalTX:g}),console.log({decodedTX:U}),console.log({publicKey:U.publicKey.toString()}),await browserIndex$1.transactions.signTransaction(g,o,n.accountId,a)});
